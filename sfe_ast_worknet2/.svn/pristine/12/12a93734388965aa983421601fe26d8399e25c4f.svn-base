<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panTop=null;$.panDAYwhls=null;$.grdDAYwhls=null;$.panDAYlist=null;$.grdDAYlist=null;$.panDelete=null;$.panDelete2=null;$.grdDelete=null;$.panProduct=null;$.btnDel=null;$.btnStart=null;$.btnFinal=null;$.btnVIEW=null;$.btnDo=null;$.txt_WHLSNM=null;$.btnClean=null;$.btnName=null;$.btnSaleEdit=null;$.btnRequest=null;$.mem_SaleEdit=null;$.lbl_Ex1=null;$.cbo_Field1=null;$.txt_Field1=null;$.lbl_Ex2=null;$.cbo_Field2=null;$.txt_Field2=null;$.lbl_Ex3=null;$.cbo_Field3=null;$.txt_Field3=null;$.btnFind=null;$.rbo_Op=null;$.btnPRODJOB=null;$.btnPRODDO=null;$.lbl_EPROD=null;$.txt_EPROD=null;$.lbl_Oprod=null;$.cbo_Oprod=null;$.lbl_Fpoint=null;$.txt_Fpoint=null;$.rowIndex=0;$.initRow=false;function createJson_Q(workType){var json=createExecuteParamInfo("P_crmSD_DAYWHLS_Q",[workType]);return json}function createJson_Q1(workType){var json=createExecuteParamInfo("P_crmSD_DAYSALE_Q",[workType,$.txt_WHLSNM.getValue()]);return json}function createJson_S(workType){var json=createExecuteParamInfo("P_crmSD_DAYMAKE_S",[workType,$.txt_WHLSNM.getValue()]);return json}function createJson_S1(workType){var json=createExecuteParamInfo("P_crmSD_DAYDEL_S",[workType,$.txt_WHLSNM.getValue(),$.cbo_Field1.getValue(),$.cbo_Field2.getValue()||"",$.cbo_Field3.getValue()||"",$.txt_Field1.getValue()||"",$.txt_Field2.getValue()||"",$.txt_Field3.getValue()||"",$.mem_SaleEdit.getValue()||"",$.rbo_Op.getValue()]);return json}function createJson_S2(workType){var json=createExecuteParamInfo("P_crmSD_DAYPROD_S",[workType,$.txt_EPROD.getValue()||"",$.cbo_Oprod.getValue()||"",$.txt_Fpoint.getValue()||""]);return json}function searchSD_DAYWHLS(workType){var json=createJson_Q(workType);callQuery(["req",json],"DAYWHLS",$)}function searchSD_DAYSALE(workType){var json=createJson_Q1(workType);callQuery(["req",json],"DAYSALE",$)}function saveSD_DAYMAKE(workType){var json=createJson_S(workType);$.workType=workType;callExecute(["req",json],"DAYMAKE",$)}function searchSD_DAYDEL(workType){var json=createJson_S1(workType);callQuery(["req",json],"DAYDEL_Q",$)}function saveSD_DAYDEL(workType){var json=createJson_S1(workType);$.workType=workType;callExecute(["req",json],"DAYDEL",$)}function saveSD_DAYPROD(workType){var json=createJson_S2(workType);$.workType=workType;callExecute(["req",json],"PROD",$)}function after_P_crmSD_DAYMAKE_S(){$.txt_WHLSNM.setValue("");$.cbo_Field1.setValue("");$.cbo_Field2.setValue("");$.cbo_Field3.setValue("");$.txt_Field1.setValue("");$.txt_Field2.setValue("");5;$.txt_Field3.setValue("");$.txt_EPROD.setValue("");$.cbo_Oprod.setValue("");$.txt_Fpoint.setValue("");$.grdDAYlist.clear();searchSD_DAYWHLS("Q")}function after_P_crmSD_DAYDEL_S(){$.cbo_Field1.setValue("");$.cbo_Field2.setValue("");$.cbo_Field3.setValue("");$.txt_Field1.setValue("");$.txt_Field2.setValue("");$.txt_Field3.setValue("");$.mem_SaleEdit.setValue("");$.grdDelete.clear()}function countChk(value,obj){if(obj.count_row<obj.before_count){return{color:"violet !important"}}}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,895);$.panMain.setText("");$.panMain.setBottomLine(true);$.panTop=new FingerPanel(host,"panTop",0,0,1200,55);$.panTop.setText("");$.panTop.setBottomLine(true);$.panDAYwhls=new FingerPanel(host,"panDAYwhls",0,65,400,380);$.panDAYwhls.setText("도매 조회");$.panDAYwhls.setBottomLine(true);$.grdDAYwhls=new FingerDataGrid(host,"grdDAYwhls",0,0,400,335);$.panDAYlist=new FingerPanel(host,"panDAYlist",410,65,790,380);$.panDAYlist.setText("도매 상세");$.panDAYlist.setBottomLine(true);$.grdDAYlist=new FingerDataGrid(host,"grdDAYlist",0,0,790,335);$.panDelete=new FingerPanel(host,"panDelete",0,455,900,150);$.panDelete.setText("이상데이터");$.panDelete.setBottomLine(true);$.panDelete2=new FingerPanel(host,"panDelete2",0,615,900,250);$.panDelete2.setText(" 이상데이터 조회");$.panDelete2.setBottomLine(true);$.grdDelete=new FingerDataGrid(host,"grdDelete",0,0,900,205);$.panProduct=new FingerPanel(host,"panProduct",910,455,290,411);$.panProduct.setText("소분처리");$.panProduct.setBottomLine(true);$.btnDel=new FingerButton(host,"btnDel",20,10,160,35);$.btnDel.setText("해당도매자료 삭제");$.btnStart=new FingerButton(host,"btnStart",300,10,100,35);$.btnStart.setText("초기화면");$.btnFinal=new FingerButton(host,"btnFinal",430,10,100,35);$.btnFinal.setText("일마감");$.btnVIEW=new FingerButton(host,"btnVIEW",860,10,160,35);$.btnVIEW.setText("실적처리미리보기");$.btnDo=new FingerButton(host,"btnDo",1005,10,195,35);$.btnDo.setText("해당도매자료 실적처리");$.txt_WHLSNM=new FingerEdit(host,"txt_WHLSNM",580,15,70,20);$.btnClean=new FingerButton(host,"btnClean",20,10,80,30);$.btnClean.setText("삭제");$.btnName=new FingerButton(host,"btnName",85,10,80,30);$.btnName.setText("이름");$.btnSaleEdit=new FingerButton(host,"btnSaleEdit",150,10,80,30);$.btnSaleEdit.setText("구분");$.btnRequest=new FingerButton(host,"btnRequest",215,10,80,30);$.btnRequest.setText("전달");$.mem_SaleEdit=new FingerMemoEdit(host,"mem_SaleEdit",20,45,250,45);$.lbl_Ex1=new FingerLabel(host,"lbl_Ex1",300,10,50,20);$.lbl_Ex1.setText("필드1");$.cbo_Field1=new FingerComboBox(host,"cbo_Field1",355,10,165,20);$.txt_Field1=new FingerEdit(host,"txt_Field1",525,10,225,20);$.lbl_Ex2=new FingerLabel(host,"lbl_Ex2",300,40,50,20);$.lbl_Ex2.setText("필드2");$.cbo_Field2=new FingerComboBox(host,"cbo_Field2",355,40,165,20);$.txt_Field2=new FingerEdit(host,"txt_Field2",525,40,225,20);$.lbl_Ex3=new FingerLabel(host,"lbl_Ex3",300,70,50,20);$.lbl_Ex3.setText("필드3");$.cbo_Field3=new FingerComboBox(host,"cbo_Field3",355,70,165,20);$.txt_Field3=new FingerEdit(host,"txt_Field3",525,70,225,20);$.btnFind=new FingerButton(host,"btnFind",790,10,110,55);$.btnFind.setText("자료찾기");$.rbo_Op=new FingerRadioBox(host,"rbo_Op",793,70,100,20);$.btnPRODJOB=new FingerButton(host,"btnPRODJOB",20,10,110,55);$.btnPRODJOB.setText("사전작업");$.btnPRODDO=new FingerButton(host,"btnPRODDO",180,10,110,55);$.btnPRODDO.setText("소분정리");$.lbl_EPROD=new FingerLabel(host,"lbl_EPROD",15,85,200,20);$.lbl_EPROD.setText("소분처리할품목명");$.txt_EPROD=new FingerEdit(host,"txt_EPROD",20,110,250,20);$.lbl_Oprod=new FingerLabel(host,"lbl_Oprod",15,145,200,20);$.lbl_Oprod.setText("대체품목선택");$.cbo_Oprod=new FingerComboBox(host,"cbo_Oprod",20,170,250,20);$.lbl_Fpoint=new FingerLabel(host,"lbl_Fpoint",15,205,200,20);$.lbl_Fpoint.setText("수량조정수치(분모입력)");$.txt_Fpoint=new FingerSpinEdit(host,"txt_Fpoint",20,230,140,20);$.panTop.setBorder(true);$.panDelete.setBorder(true);$.panProduct.setBorder(true);$.txt_WHLSNM.setVisible(false);$.cbo_Field1.setEmptyRow(true);$.cbo_Field2.setEmptyRow(true);$.cbo_Field3.setEmptyRow(true);$.cbo_Oprod.setEmptyRow(true);$.lbl_EPROD.setAlign("left");$.lbl_Oprod.setAlign("left");$.lbl_Fpoint.setAlign("left");$.rbo_Op.addButtons([{sub_code:"and",code_name:"and"},{sub_code:"or",code_name:"or"}]);$.rbo_Op.setValue("and");$.cbo_Oprod.setAllowBlank(false,"대체품목선택");$.txt_Fpoint.setAllowBlank(false,"수량조정수치");$.txt_Field1.setAllowBlank(true,"필드1");$.txt_Field2.setAllowBlank(true,"필드2");$.txt_Field3.setAllowBlank(true,"필드3");$.grdDAYwhls.setColumns([new FingerDataGridColumn("zip_sido",60,"left","string","시도"),new FingerDataGridColumn("zip_gungu",70,"left","string","군구"),new FingerDataGridColumn("wholesaler_name",0,"left","string","도매명"),new FingerDataGridColumn("count_row",60,"right","int","건수",{cssFormat:countChk,format:"int"}),new FingerDataGridColumn("before_count",93,"right","int","1일전건수",{cssFormat:countChk,format:"int"})]);$.grdDAYwhls.init({panel:$.panDAYwhls,scroll:"xy"});$.grdDAYwhls.setEditable(false);$.grdDAYlist.setColumns([new FingerDataGridColumn("input_seq",60,"center","int","순번"),new FingerDataGridColumn("sale_date",90,"center","string","판매일자"),new FingerDataGridColumn("product_name",190,"left","string","품목"),new FingerDataGridColumn("detail_qty",60,"center","string","소분"),new FingerDataGridColumn("sale_qty",60,"right","int","수량",{format:"number"}),new FingerDataGridColumn("sale_company",80,"left","string","판매구분"),new FingerDataGridColumn("sale_area",140,"left","string","지역"),new FingerDataGridColumn("insert_time",93,"left","string","전송시간")]);$.grdDAYlist.init({panel:$.panDAYlist,scroll:"xy"});$.grdDAYlist.setEditable(false);$.grdDelete.setColumns([new FingerDataGridColumn("input_seq",70,"left","int","순번"),new FingerDataGridColumn("sale_date",120,"left","string","판매일자"),new FingerDataGridColumn("product_name",200,"left","string","품목"),new FingerDataGridColumn("sale_qty",70,"right","int","수량",{format:"number"}),new FingerDataGridColumn("sale_company",110,"left","string","판매구분"),new FingerDataGridColumn("sale_area",160,"left","string","지역"),new FingerDataGridColumn("insert_time",153,"left","string","전송시간")]);$.grdDelete.init({panel:$.panDelete2,scroll:"xy"});$.grdDelete.setEditable(false);$.host=host;$.args=args};$.start=function(){$.panMain.add($.panTop);$.panMain.add($.panDAYwhls);$.panMain.add($.panDAYlist);$.panMain.add($.panProduct);$.panMain.add($.panDelete2);$.panMain.add($.panDelete);$.panTop.add($.btnDel);$.panTop.add($.btnStart);$.panTop.add($.btnFinal);$.panTop.add($.btnVIEW);$.panTop.add($.btnDo);$.panTop.add($.txt_WHLSNM);$.panDAYwhls.add($.grdDAYwhls);$.panDAYlist.add($.grdDAYlist);$.panDelete.add($.btnClean);$.panDelete.add($.btnName);$.panDelete.add($.btnSaleEdit);$.panDelete.add($.btnRequest);$.panDelete.add($.mem_SaleEdit);$.panDelete.add($.lbl_Ex1);$.panDelete.add($.cbo_Field1);$.panDelete.add($.txt_Field1);$.panDelete.add($.lbl_Ex2);$.panDelete.add($.cbo_Field2);$.panDelete.add($.txt_Field2);$.panDelete.add($.lbl_Ex3);$.panDelete.add($.cbo_Field3);$.panDelete.add($.txt_Field3);$.panDelete.add($.btnFind);$.panDelete.add($.rbo_Op);$.panDelete2.add($.grdDelete);$.panProduct.add($.lbl_Fpoint);$.panProduct.add($.cbo_Oprod);$.panProduct.add($.lbl_Oprod);$.panProduct.add($.txt_EPROD);$.panProduct.add($.lbl_EPROD);$.panProduct.add($.btnPRODDO);$.panProduct.add($.btnPRODJOB);$.panProduct.add($.txt_Fpoint);relocateChildIndexInPanel([$.panDelete,$.panProduct]);var ds=bizComponentData2($,"Q1","L_CRM0056");$.cbo_Oprod.setColumn("product_code","product_name");setComboBind([$.cbo_Oprod],ds);var ds1=bizComponentData2($,"Q2","L_CRM217|L_CRM217|L_CRM217");setComboBind([$.cbo_Field1,$.cbo_Field2,$.cbo_Field3],ds1);searchSD_DAYWHLS("Q")};$.callback=function(type,ds){if(type=="DAYWHLS"){setDataGrid([$.grdDAYwhls],ds);var rIndex=0;if($.initRow){rIndex=$.rowIndex}$.initRow=false;$.grdDAYwhls.selectRow(rIndex)}else{if(type=="DAYSALE"){setDataGrid([$.grdDAYlist],ds);$.grdDAYlist.selectRow(0)}else{if(type=="DAYMAKE"){if(ds){if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg)}else{if(ds.errorCode=="MSG0001"||ds.errorCode==""){if($.workType=="D"){MessageBoxShow("정상적으로 삭제 되었습니다.")}else{MessageBoxShow("정상적으로 저장 되었습니다.")}}else{if(ds.errorCode=="MSG0006"){MessageBoxShow("조회된 자료가 없습니다.")}}}}after_P_crmSD_DAYMAKE_S()}else{if(type=="DAYDEL_Q"){setDataGrid([$.grdDelete],ds)}else{if(type=="DAYDEL"){if(ds){if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg)}else{if(ds.errorCode=="MSG0001"){if($.workType=="D"){MessageBoxShow("정상적으로 삭제 되었습니다.");$.initRow=true;var rId=$.grdDAYwhls.getSelectedRowIdx();var strRowIndex=$.grdDAYwhls.getValue(rId,"wholesaler_name");$.rowIndex=$.grdDAYwhls.getGridRowIndex("wholesaler_name",strRowIndex);$.grdDAYlist.clear();$.grdDelete.setDisplayPanelRowCount(0)}else{MessageBoxShow("정상적으로 저장 되었습니다.")}}else{if(ds.errorCode=="MSG0006"){MessageBoxShow("조회된 자료가 없습니다.")}}}}after_P_crmSD_DAYDEL_S();searchSD_DAYWHLS("Q")}else{if(type=="PROD"){if(ds){if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg)}else{if(ds.errorCode=="MSG0001"){MessageBoxShow("정상적으로 저장되었습니다.")}else{if(ds.errorCode=="MSG0006"){MessageBoxShow("조회된 자료가 없습니다.")}}}}if($.workType=="S"){$.txt_EPROD.setValue("");$.cbo_Oprod.setValue("");$.txt_Fpoint.setValue("");$.cbo_Field1.setValue("");$.cbo_Field2.setValue("");$.cbo_Field3.setValue("");$.txt_Field1.setValue("");$.txt_Field2.setValue("");$.txt_Field3.setValue("");$.grdDAYlist.clear()}searchSD_DAYSALE("Q")}}}}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnDel"){confirmBoxShow("진짜? 정말? 삭제하실려고요?",function(){if(g_main.msgShare==true){if($.txt_WHLSNM.getValue()==null||$.txt_WHLSNM.getValue()==""){MessageBoxShow("대상도매가 선택되지 않았습니다.");return}else{saveSD_DAYMAKE("D")}}})}else{if(id=="btnDo"){if($.txt_WHLSNM.getValue()==null||$.txt_WHLSNM.getValue()==""){MessageBoxShow("대상도매가 선택되지 않았습니다.");return}else{saveSD_DAYMAKE("N")}}else{if(id=="btnFinal"){saveSD_DAYMAKE("E")}else{if(id=="btnClean"){if($.grdDelete.getRowCount()==0){MessageBoxShow("삭제할 데이터가 없습니다.");return}else{saveSD_DAYDEL("D")}}else{if(id=="btnFind"){if($.cbo_Field1.getValue()==null||$.cbo_Field1.getValue()==""){MessageBoxShow("조건이 입력되지 선택되지 않았습니다.");return}else{if(!$.panDelete.validateControls()){return}else{searchSD_DAYDEL("Q")}}}else{if(id=="btnPRODJOB"){saveSD_DAYPROD("N")}else{if(id=="btnPRODDO"){if(!$.panProduct.validateControls()){return}saveSD_DAYPROD("S")}else{if(id=="btnStart"){$.rowIndex=0;$.txt_WHLSNM.setValue("");$.cbo_Field1.setValue("");$.cbo_Field2.setValue("");$.cbo_Field3.setValue("");$.txt_Field1.setValue("");$.txt_Field2.setValue("");$.txt_Field3.setValue("");$.txt_EPROD.setValue("");$.cbo_Oprod.setValue("");$.txt_Fpoint.setValue("");$.grdDAYlist.clear();$.grdDelete.clear();$.grdDelete.setDisplayPanelRowCount(0);searchSD_DAYWHLS("Q")}else{if(id=="btnSaleEdit"){if($.grdDelete.getRowCount()==0){MessageBoxShow("편집할 데이터가 없습니다.");return}else{saveSD_DAYDEL("Ds")}}else{if(id=="btnName"){if($.grdDelete.getRowCount()==0){MessageBoxShow("편집할 데이터가 없습니다.");return}else{saveSD_DAYDEL("Ds2")}}else{if(id=="btnRequest"){confirmBoxShow("진짜? 정말? 전달하실려고요?",function(){if(g_main.msgShare==true){if($.grdDelete.getRowCount()==0){MessageBoxShow("편집할 데이터가 없습니다.");return}else{saveSD_DAYDEL("Ds3")}}})}else{if(id=="btnVIEW"){$.popUpCallId=id;var param={wholesaler_name:$.txt_WHLSNM.getValue()||""};g_main.openPopup("popSDPopup.html","popSDPopup","",0,0,"","",param,"","")}}}}}}}}}}}}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){if(id=="cbo_Field1"){if(value==""){$.txt_Field1.setValue("");$.txt_Field1.setAllowBlank(true,"필드1")}else{$.txt_Field1.setAllowBlank(false,"필드1")}}else{if(id=="cbo_Field2"){if(value==""){$.txt_Field2.setValue("");$.txt_Field2.setAllowBlank(true,"필드2")}else{$.txt_Field2.setAllowBlank(false,"필드2")}}else{if(id=="cbo_Field3"){if(value==""){$.txt_Field3.setValue("");$.txt_Field3.setAllowBlank(true,"필드3")}else{$.txt_Field3.setAllowBlank(false,"필드3")}}}}};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdDAYwhls"){$.txt_WHLSNM.setValue($.grdDAYwhls.getValue(rId,"wholesaler_name"));searchSD_DAYSALE("Q");if($.grdDAYwhls.getValue(rId,"zip_sido").substring(0,1)=="*"){$.btnDo.setEnable(false)}else{$.btnDo.setEnable(true)}}else{if(id=="grdDAYlist"){$.txt_EPROD.setValue($.grdDAYlist.getValue(rId,"product_name"));if($.cbo_Field1.getValue()==""){return}else{if($.cbo_Field1.getValue()!=""){$.txt_Field1.setValue($.grdDAYlist.getValue(rId,$.cbo_Field1.getValue()))}}if($.cbo_Field2.getValue()==""){return}else{if($.cbo_Field2.getValue()!=""){$.txt_Field2.setValue($.grdDAYlist.getValue(rId,$.cbo_Field2.getValue()))}}if($.cbo_Field3.getValue()==""){return}else{if($.cbo_Field3.getValue()!=""){$.txt_Field3.setValue($.grdDAYlist.getValue(rId,$.cbo_Field3.getValue()))}}}}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerimage_click=function(id){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){};$.fingerpopup_close=function(id){};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>