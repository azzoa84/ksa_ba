<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panList=null;$.panMenu=null;$.grdList=null;$.lbl_menu_id=null;$.txt_menu_id=null;$.lbl_parent_menu_id=null;$.bte_parent_menu_id=null;$.chk_top_level=null;$.lbl_gubn=null;$.rbo_gubn=null;$.lbl_menu_caption=null;$.txt_menu_caption=null;$.lbl_form_id=null;$.txt_form_id=null;$.lbl_group=null;$.cmb_group=null;$.lbl_assembly=null;$.txt_assembly=null;$.lbl_distribution=null;$.cmb_distribution=null;$.lbl_sort=null;$.panQuery=null;$.lbl_menu_name=null;$.txt_menu_name=null;$.lbl_menu_form_id=null;$.txt_menu_form_id=null;$.btnSearch=null;$.spe_sort=null;$.lblPointMenu=null;$.cmbPointMenu=null;$.initRow=false;$.save_key_id="";function createJSON_Q(workType){var json=createExecuteParamInfo("P_MenuManage_Q",[workType,$.txt_menu_name.getValue()||"","",$.txt_menu_form_id.getValue()||""]);return json}function createJSON_S(workType){var json=createExecuteParamInfo("P_MenuManage_S",[workType,$.txt_menu_id.getValue()||"",$.parent_menu_id,$.rbo_gubn.getValue(),$.txt_menu_caption.getValue()||"",$.txt_form_id.getValue()||"",$.txt_assembly.getValue()||"",$.cmb_distribution.getValue()||"",Number($.spe_sort.getValue()),$.cmbPointMenu.getValue()||""]);return json}function searchData(workType){var json=createJSON_Q(workType);callQuery(["req",json],workType,$)}function saveData(workType){if(!$.panMenu.validateControls()){return}var json=createJSON_S(workType);callExecute(["req",json],workType,$)}function menuInit(bo){if(bo){$.panMenu.enableButton(["btnDelete","btnSave","btnCopy","btnNew"])}else{$.panMenu.disableButton(["btnDelete","btnSave","btnCopy","btnNew"])}}function radioChange(value){if(value=="GROUP"){$.txt_form_id.setAllowBlank(true,"폼 ID");$.txt_assembly.setAllowBlank(true,"파일/URL")}else{$.txt_form_id.setAllowBlank(false,"폼 ID");$.txt_assembly.setAllowBlank(false,"파일/URL")}}function checkBoxChange(value){if(value=="Y"){$.parent_menu_id="";$.bte_parent_menu_id.setText("");$.bte_parent_menu_id.setAllowBlank(true,"상위메뉴");$.bte_parent_menu_id.setEnable(false)}else{$.bte_parent_menu_id.setEnable(true);$.bte_parent_menu_id.setAllowBlank(false,"상위메뉴")}}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,800);$.panMain.setText("");$.panMain.setBottomLine(true);$.panList=new FingerPanel(host,"panList",0,95,450,675);$.panList.setText("메뉴");$.panList.setBottomLine(true);$.panMenu=new FingerPanel(host,"panMenu",460,0,740,770);$.panMenu.setText("메뉴 편집");$.panMenu.setBottomLine(true);$.grdList=new FingerDataGrid(host,"grdList",0,0,450,630);$.lbl_menu_id=new FingerLabel(host,"lbl_menu_id",0,10,100,20);$.lbl_menu_id.setText("메뉴ID");$.txt_menu_id=new FingerEdit(host,"txt_menu_id",105,10,185,20);$.lbl_parent_menu_id=new FingerLabel(host,"lbl_parent_menu_id",295,10,100,20);$.lbl_parent_menu_id.setText("상위메뉴");$.bte_parent_menu_id=new FingerButtonEdit(host,"bte_parent_menu_id",400,10,235,20);$.bte_parent_menu_id.setText("");$.chk_top_level=new FingerCheckBox(host,"chk_top_level",645,10,85,20);$.chk_top_level.setText("최상위");$.lbl_gubn=new FingerLabel(host,"lbl_gubn",0,55,100,20);$.lbl_gubn.setText("구분");$.rbo_gubn=new FingerRadioBox(host,"rbo_gubn",105,55,290,20);$.lbl_menu_caption=new FingerLabel(host,"lbl_menu_caption",0,100,100,20);$.lbl_menu_caption.setText("메뉴캡션");$.txt_menu_caption=new FingerEdit(host,"txt_menu_caption",105,100,533,20);$.lbl_form_id=new FingerLabel(host,"lbl_form_id",0,145,100,20);$.lbl_form_id.setText("폼 ID");$.txt_form_id=new FingerEdit(host,"txt_form_id",105,145,185,20);$.lbl_group=new FingerLabel(host,"lbl_group",295,145,100,20);$.lbl_group.setText("업무그룹");$.cmb_group=new FingerComboBox(host,"cmb_group",400,145,243,20);$.lbl_assembly=new FingerLabel(host,"lbl_assembly",0,190,100,20);$.lbl_assembly.setText("파일/URL");$.txt_assembly=new FingerEdit(host,"txt_assembly",105,190,533,20);$.lbl_distribution=new FingerLabel(host,"lbl_distribution",0,235,100,20);$.lbl_distribution.setText("배포상태");$.cmb_distribution=new FingerComboBox(host,"cmb_distribution",105,235,189,20);$.lbl_sort=new FingerLabel(host,"lbl_sort",0,280,100,20);$.lbl_sort.setText("정렬순서");$.panQuery=new FingerPanel(host,"panQuery",0,0,450,85);$.panQuery.setText("");$.panQuery.setBottomLine(true);$.lbl_menu_name=new FingerLabel(host,"lbl_menu_name",0,15,100,20);$.lbl_menu_name.setText("메뉴명");$.txt_menu_name=new FingerEdit(host,"txt_menu_name",110,15,210,20);$.lbl_menu_form_id=new FingerLabel(host,"lbl_menu_form_id",0,45,100,20);$.lbl_menu_form_id.setText("폼ID");$.txt_menu_form_id=new FingerEdit(host,"txt_menu_form_id",110,45,210,20);$.btnSearch=new FingerButton(host,"btnSearch",370,45,80,20);$.btnSearch.setText("조회");$.spe_sort=new FingerSpinEdit(host,"spe_sort",105,280,185,20);$.lblPointMenu=new FingerLabel(host,"lblPointMenu",0,325,100,20);$.lblPointMenu.setText("강조메뉴지정");$.cmbPointMenu=new FingerComboBox(host,"cmbPointMenu",105,325,189,20);$.panQuery.setBorder(true);$.panMenu.addButtons(["btnDelete","btnSave","btnCopy","btnNew"]);$.grdList.setColumns([new FingerDataGridColumn("parent_id",99,"left","string","",{hidden:true}),new FingerDataGridColumn("menu_name",250,"left","string","메뉴명",{template:"tree"}),new FingerDataGridColumn("form_id",180,"left","string","폼ID"),new FingerDataGridColumn("key_id",180,"left","string","",{hidden:true}),new FingerDataGridColumn("menu_category",0,"left","string","",{hidden:true}),new FingerDataGridColumn("assembly_file",0,"left","string","",{hidden:true}),new FingerDataGridColumn("sort_seq",0,"left","string","",{hidden:true}),new FingerDataGridColumn("parent_name",0,"left","string","",{hidden:true})]);$.grdList.init({panel:$.panList,view:"treetable",treeKey:{id:"key_id",parent:"parent_id"}});$.grdList.setBorder(false);$.txt_menu_id.setReadOnly(true);$.rbo_gubn.addButtons([{sub_code:"GROUP",code_name:"GROUP"},{sub_code:"FORM",code_name:"FORM"},{sub_code:"WEB",code_name:"WEB"}]);$.bte_parent_menu_id.setAllowBlank(false,"상위메뉴");$.rbo_gubn.setAllowBlank(false,"구분");$.txt_menu_caption.setAllowBlank(false,"메뉴캡션");$.txt_form_id.setAllowBlank(false,"폼 ID");$.txt_assembly.setAllowBlank(false,"파일/URL");$.cmb_distribution.setAllowBlank(false,"배포상태");$.lbl_group.setVisible(false);$.cmb_group.setVisible(false);$.cmb_distribution.setEmptyRow(true);$.cmb_distribution.addItem("R","배포");$.cmb_distribution.addItem("H","숨김");$.cmbPointMenu.setColumnConfig([{id:"sub_code",width:100},{id:"code_name",width:400}]);$.cmbPointMenu.setEmptyRow(true);$.cmbPointMenu.setData([{sub_code:"point_menu1",code_name:"강조스타일1 (빨강폰트/배경흰색/빨강테두리)"},{sub_code:"point_menu2",code_name:"강조스타일2 (흰색폰트/배경빨강/테두리없음)"},]);$.host=host;$.args=args};$.start=function(){$.panMain.add($.panList);$.panMain.add($.panMenu);$.panMain.add($.panQuery);$.panList.add($.grdList);$.panMenu.add($.lbl_sort);$.panMenu.add($.cmb_distribution);$.panMenu.add($.lbl_distribution);$.panMenu.add($.txt_assembly);$.panMenu.add($.lbl_assembly);$.panMenu.add($.cmb_group);$.panMenu.add($.lbl_group);$.panMenu.add($.txt_form_id);$.panMenu.add($.lbl_form_id);$.panMenu.add($.txt_menu_caption);$.panMenu.add($.lbl_menu_caption);$.panMenu.add($.rbo_gubn);$.panMenu.add($.lbl_gubn);$.panMenu.add($.chk_top_level);$.panMenu.add($.bte_parent_menu_id);$.panMenu.add($.lbl_parent_menu_id);$.panMenu.add($.txt_menu_id);$.panMenu.add($.lbl_menu_id);$.panMenu.add($.spe_sort);$.panMenu.add($.lblPointMenu);$.panMenu.add($.cmbPointMenu);$.panQuery.add($.lbl_menu_name);$.panQuery.add($.txt_menu_name);$.panQuery.add($.lbl_menu_form_id);$.panQuery.add($.txt_menu_form_id);$.panQuery.add($.btnSearch);relocateChildIndexInPanel([$.panQuery,$.panMenu]);searchData("Q")};$.callback=function(type,ds){if(type=="Q"){var rIndex=0;if(ds&&ds.errorCode=="MSG0001"){for(var i in ds.resultList[0]){if(ds.resultList[0][i].parent_id==""&&ds.resultList[0][i].parent_menu_id==""){ds.resultList[0][i].open=true}}}setDataGrid([$.grdList],ds);if($.initRow&&$.grdList.getRowCount()>0){rIndex=$.grdList.getGridRowIndex("key_id",$.save_key_id)}$.grdList.selectRow(rIndex);$.initRow=false}else{if(type=="N"||type=="U"||type=="D"){if(ds){if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg);return}else{if(ds.errorCode=="MSG0004"){$.initRow=true;$.save_key_id=ds.resultList[0][0].s_menu_id;MessageBoxShow("정상적으로 수정되었습니다.")}else{if(ds.errorCode=="MSG0003"){MessageBoxShow("정상적으로 삭제되었습니다.")}else{if(ds.errorCode=="MSG0002"){$.initRow=true;$.save_key_id=ds.resultList[0][0].s_menu_id;MessageBoxShow("정상적으로 등록되었습니다.")}}}}searchData("Q")}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){searchData("Q")}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){if(id=="bte_parent_menu_id"){var param={parent_menu_id:""};g_main.openPopup("popMenuList.html","popMenuList","",0,0,"","",param,"","")}};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){if(id=="bte_parent_menu_id"){if($.bte_parent_menu_id.getText()==""){$.parent_menu_id=""}}};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){if(id=="chk_top_level"){checkBoxChange(value)}};$.fingercombobox_change=function(id,value){};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdList"){$.varId=rId;var data=$.grdList.getValue(rId);if(data.parent_menu_id=="P"){$.panMenu.clear();menuInit(false);return}else{menuInit(true)}$.rbo_gubn.setValue(data.menu_category);radioChange(data.menu_category);$.txt_menu_id.setValue(data.key_id);$.txt_form_id.setValue(data.form_id);$.txt_assembly.setValue(data.assembly_file);$.spe_sort.setValue(data.sort_seq);$.txt_menu_caption.setValue(data.menu_name);$.bte_parent_menu_id.setText(data.parent_name);$.cmb_distribution.setValue(data.worknet40);$.cmbPointMenu.setValue(data.menu_class||"");$.parent_menu_id=data.parent_menu_id;if($.parent_menu_id==""){$.chk_top_level.setValue("Y");$.chk_top_level.setEnable(false)}else{$.chk_top_level.setValue("N");$.chk_top_level.setEnable(true)}checkBoxChange($.chk_top_level.getValue())}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){if(id=="txt_form_id"){if($.rbo_gubn.getValue()=="FORM"){$.txt_assembly.setValue($.txt_form_id.getValue()+".html")}}};$.fingeredit_keypress=function(id,value){if((id=="txt_menu_name"||id=="txt_menu_form_id")&&value=="13"){searchData("Q")}};$.fingeredit_lostfocus=function(id,value){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panMenu"){if(btnId=="btnNew"){$.panMenu.clear();$.bte_parent_menu_id.setEnable(true);$.bte_parent_menu_id.setAllowBlank(false,"상위메뉴");$.chk_top_level.setEnable(true)}else{if(btnId=="btnCopy"){$.txt_menu_id.setValue("")}else{if(btnId=="btnSave"){confirmBoxShow("입력한 내용을 저장하시겠습니까?",function(){if(g_main.msgShare){saveData($.txt_menu_id.getValue()==""?"N":"U")}})}else{if(btnId=="btnDelete"){if(!$.varId){MessageBoxShow("삭제할 내용이 없습니다.");return}confirmBoxShow($.txt_menu_caption.getValue()+" 메뉴를 삭제하시겠습니까?",function(){if(g_main.msgShare){saveData("D")}})}}}}}};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(popResult){if(id=="popMenuList"){$.bte_parent_menu_id.setText(popResult.menu_name);$.parent_menu_id=popResult.key_id}}};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){if(id=="rbo_gubn"){radioChange(value)}};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerimage_click=function(id){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>