<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panQuery=null;$.panList=null;$.panInfo=null;$.lblId_Q=null;$.lblName_Q=null;$.lblAddress_Q=null;$.txtId_Q=null;$.txtName_Q=null;$.txtAddress_Q=null;$.chk1_Q=null;$.chk2_Q=null;$.chk3_Q=null;$.btnSearch=null;$.grdList=null;$.lblId=null;$.lblSAP=null;$.lblName=null;$.lblAddress=null;$.lblGungu=null;$.lblCompType=null;$.lblGetType=null;$.lblCompPhone=null;$.lblWholeType=null;$.lblTell=null;$.lblFAX=null;$.lblEmail=null;$.lblBusinessId=null;$.lblStartDate=null;$.lblEmp=null;$.lblEtc=null;$.lblSaleYn=null;$.lblLastDate=null;$.lblClosure=null;$.txtId=null;$.txtSAP=null;$.txtName=null;$.bteAdd=null;$.txtAdd1=null;$.txtAdd2=null;$.cmbGungu1=null;$.cmbGungu2=null;$.cmbCompType=null;$.cmbGetType=null;$.txtCompPhone=null;$.cmbWholeType=null;$.txtTell=null;$.txtFAX=null;$.txtEmail=null;$.txtBusinessId=null;$.dteStartDate=null;$.txtEmp=null;$.txtEtc=null;$.chkSaleYn=null;$.chkCloser=null;$.txtLastDate=null;$.lblBusiNo_Q=null;$.txtBusiNo_Q=null;$.varWholeId="";$.varOrgBusinessId="";function createJSON_Q(workType){var json=createExecuteParamInfo("P_crmWholeSaler_Q",[workType,$.txtId_Q.getValue()||"",$.txtName_Q.getValue()||"",$.txtAddress_Q.getValue()||"",$.txtBusinessId.getValue()||"",$.chk1_Q.getValue()||"N",$.chk2_Q.getValue()||"N",$.chk3_Q.getValue()||"N",$.txtBusiNo_Q.getValue()||""]);return json}function createJSON_S(workType){var json=createExecuteParamInfo("P_crmWholeSaler_S",[workType,$.txtId.getValue()||"",$.txtName.getValue()||"",$.bteAdd.getValue()||"",$.txtAdd1.getValue()||"",$.txtAdd2.getValue()||"",$.cmbGungu1.getValue()||"",$.cmbGungu2.getValue()||"",$.cmbCompType.getValue()||"",$.txtCompPhone.getValue()||"",$.txtBusinessId.getValue()||"",$.chkSaleYn.getValue()||"",$.dteStartDate.getValue()||"","#UserID#",$.txtTell.getValue()||"",$.txtFAX.getValue()||"",$.txtEmail.getValue()||"",$.txtEmp.getValue()||"",$.txtEtc.getValue()||"",$.cmbGetType.getValue()||"",$.cmbWholeType.getValue()||"",(workType=="D"?"Y":$.chkCloser.getValue())]);return json}function searchList(workType){var json=createJSON_Q(workType);if(workType=="Q"){callQuery(["req",json],workType,$)}else{if(workType=="BUSINESS"){var ds=callExecuteSync(["req",json],workType,$);if(ds.resultList[0][0]&&ds.resultList[0][0].business_no==$.txtBusinessId.getValue()){return false}else{return true}}}}function saveWholeSaler(workType){var json=createJSON_S(workType);if(json){var ds=callExecuteSync(["req",json],workType,$);if(ds){if(workType=="N"){$.varWholeId=ds.returnStr;$.chk1_Q.setValue("N");$.chk2_Q.setValue("N");$.chk3_Q.setValue("N")}else{if(workType=="D"){$.varWholeId=""}}searchList("Q")}}}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,760);$.panMain.setText("");$.panMain.setBottomLine(true);$.panQuery=new FingerPanel(host,"panQuery",0,0,490,145);$.panQuery.setText("");$.panQuery.setBottomLine(true);$.panList=new FingerPanel(host,"panList",0,155,490,600);$.panList.setText("도매상리스트");$.panList.setBottomLine(true);$.panInfo=new FingerPanel(host,"panInfo",500,0,700,750);$.panInfo.setText("기본정보");$.panInfo.setBottomLine(true);$.lblId_Q=new FingerLabel(host,"lblId_Q",0,10,100,20);$.lblId_Q.setText("도매상아이디");$.lblName_Q=new FingerLabel(host,"lblName_Q",0,40,100,20);$.lblName_Q.setText("도매상명");$.lblAddress_Q=new FingerLabel(host,"lblAddress_Q",0,70,100,20);$.lblAddress_Q.setText("주소");$.txtId_Q=new FingerEdit(host,"txtId_Q",105,10,210,20);$.txtName_Q=new FingerEdit(host,"txtName_Q",105,40,210,20);$.txtAddress_Q=new FingerEdit(host,"txtAddress_Q",105,70,210,20);$.chk1_Q=new FingerCheckBox(host,"chk1_Q",330,10,140,20);$.chk1_Q.setText("1차도매상");$.chk2_Q=new FingerCheckBox(host,"chk2_Q",330,40,140,20);$.chk2_Q.setText("일소화 거래 여부");$.chk3_Q=new FingerCheckBox(host,"chk3_Q",330,70,140,20);$.chk3_Q.setText("휴폐업 Y/N");$.btnSearch=new FingerButton(host,"btnSearch",410,105,80,20);$.btnSearch.setText("조회");$.grdList=new FingerDataGrid(host,"grdList",0,0,490,550);$.lblId=new FingerLabel(host,"lblId",30,15,100,20);$.lblId.setText("도매상아이디");$.lblSAP=new FingerLabel(host,"lblSAP",350,15,100,20);$.lblSAP.setText("SAP아이디");$.lblName=new FingerLabel(host,"lblName",30,45,100,20);$.lblName.setText("도매상명");$.lblAddress=new FingerLabel(host,"lblAddress",30,75,100,20);$.lblAddress.setText("주소");$.lblGungu=new FingerLabel(host,"lblGungu",30,135,100,20);$.lblGungu.setText("시도군구");$.lblCompType=new FingerLabel(host,"lblCompType",30,165,100,20);$.lblCompType.setText("거래처구분");$.lblGetType=new FingerLabel(host,"lblGetType",350,165,100,20);$.lblGetType.setText("입수방식");$.lblCompPhone=new FingerLabel(host,"lblCompPhone",30,195,100,20);$.lblCompPhone.setText("전화번호");$.lblWholeType=new FingerLabel(host,"lblWholeType",350,195,100,20);$.lblWholeType.setText("도매상구분");$.lblTell=new FingerLabel(host,"lblTell",30,225,100,20);$.lblTell.setText("내선번호");$.lblFAX=new FingerLabel(host,"lblFAX",350,225,100,20);$.lblFAX.setText("FAX");$.lblEmail=new FingerLabel(host,"lblEmail",30,255,100,20);$.lblEmail.setText("이메일");$.lblBusinessId=new FingerLabel(host,"lblBusinessId",30,285,100,20);$.lblBusinessId.setText("사업자번호");$.lblStartDate=new FingerLabel(host,"lblStartDate",30,315,100,20);$.lblStartDate.setText("거래시작일");$.lblEmp=new FingerLabel(host,"lblEmp",25,345,105,20);$.lblEmp.setText("매출자료담당자");$.lblEtc=new FingerLabel(host,"lblEtc",30,375,100,20);$.lblEtc.setText("비고");$.lblSaleYn=new FingerLabel(host,"lblSaleYn",30,405,100,20);$.lblSaleYn.setText("1차여부");$.lblLastDate=new FingerLabel(host,"lblLastDate",345,405,105,20);$.lblLastDate.setText("마지막수정일자");$.lblClosure=new FingerLabel(host,"lblClosure",30,435,100,20);$.lblClosure.setText("휴폐업 Y/N");$.txtId=new FingerEdit(host,"txtId",135,15,200,20);$.txtSAP=new FingerEdit(host,"txtSAP",455,15,200,20);$.txtName=new FingerEdit(host,"txtName",135,45,200,20);$.bteAdd=new FingerButtonEdit(host,"bteAdd",135,75,200,20);$.bteAdd.setText("");$.txtAdd1=new FingerEdit(host,"txtAdd1",340,75,315,20);$.txtAdd2=new FingerEdit(host,"txtAdd2",135,105,520,20);$.cmbGungu1=new FingerComboBox(host,"cmbGungu1",135,135,80,20);$.cmbGungu2=new FingerComboBox(host,"cmbGungu2",220,135,115,20);$.cmbCompType=new FingerComboBox(host,"cmbCompType",135,165,200,20);$.cmbGetType=new FingerComboBox(host,"cmbGetType",455,165,200,20);$.txtCompPhone=new FingerEdit(host,"txtCompPhone",135,195,200,20);$.cmbWholeType=new FingerComboBox(host,"cmbWholeType",455,195,200,20);$.txtTell=new FingerEdit(host,"txtTell",135,225,200,20);$.txtFAX=new FingerEdit(host,"txtFAX",455,225,200,20);$.txtEmail=new FingerEdit(host,"txtEmail",135,255,200,20);$.txtBusinessId=new FingerEdit(host,"txtBusinessId",135,285,200,20);$.dteStartDate=new FingerDateEdit(host,"dteStartDate",135,315,200,20);$.txtEmp=new FingerEdit(host,"txtEmp",135,345,200,20);$.txtEtc=new FingerEdit(host,"txtEtc",135,375,520,20);$.chkSaleYn=new FingerCheckBox(host,"chkSaleYn",135,408,140,20);$.chkSaleYn.setText("");$.chkCloser=new FingerCheckBox(host,"chkCloser",135,438,140,20);$.chkCloser.setText("");$.txtLastDate=new FingerEdit(host,"txtLastDate",455,405,200,20);$.lblBusiNo_Q=new FingerLabel(host,"lblBusiNo_Q",0,100,100,20);$.lblBusiNo_Q.setText("사업자번호");$.txtBusiNo_Q=new FingerEdit(host,"txtBusiNo_Q",105,100,210,20);$.panQuery.setBorder(true);$.panList.setBorder(false);$.panInfo.addButtons(["btnSave","btnNew"]);$.grdList.setColumns([new FingerDataGridColumn("wholesaler_sap_id",1,"left","string","SAP아이디",{hidden:false}),new FingerDataGridColumn("wholesaler_id",120,"left","string","도매상아이디"),new FingerDataGridColumn("wholesaler_name",150,"left","string","도매상명"),new FingerDataGridColumn("zip_code",99,"left","string","zip코드",{hidden:true}),new FingerDataGridColumn("address1",200,"left","string","주소"),new FingerDataGridColumn("address2",99,"left","string","주소2",{hidden:true}),new FingerDataGridColumn("zip_sido",99,"center","string","시도",{hidden:true}),new FingerDataGridColumn("zip_gungu",99,"left","string","군구",{hidden:true}),new FingerDataGridColumn("comp_type",99,"left","string","회사구분",{hidden:true}),new FingerDataGridColumn("company_phone",99,"left","string","회사번호",{hidden:true}),new FingerDataGridColumn("business_no",99,"left","string","사업자등록번호"),new FingerDataGridColumn("sale_yn",99,"left","string","1차여부",{hidden:true}),new FingerDataGridColumn("start_date",99,"left","string","거래시작일",{hidden:true}),new FingerDataGridColumn("extension",99,"left","string","회사번호확정",{hidden:true}),new FingerDataGridColumn("fax",99,"left","string","팩스번호",{hidden:true}),new FingerDataGridColumn("email",99,"left","string","이메일",{hidden:true}),new FingerDataGridColumn("incharge",99,"left","string","도매담당자",{hidden:true}),new FingerDataGridColumn("etc",99,"left","string","비고",{hidden:true}),new FingerDataGridColumn("updae_time",150,"left","string","마지막수정일자"),new FingerDataGridColumn("wholesaler_get",99,"left","string","입수방식",{hidden:true}),new FingerDataGridColumn("wholesaler_type",99,"left","string","도매상구분",{hidden:true}),new FingerDataGridColumn("delete_yn",99,"left","string","휴폐업 Y/N",{hidden:true})]);$.grdList.init({panel:$.panList,nonExcel:false,scroll:"xy"});$.txtName.setAllowBlank(false,"도매상명");$.txtBusinessId.setAllowBlank(false,"사업자번호");$.txtId.setReadOnly(true);$.txtSAP.setReadOnly(true);$.cmbCompType.setEnable(false);$.cmbGungu2.setEnable(false);$.txtLastDate.setEnable(false);$.txtBusinessId.setMaxLength(12);$.chk1_Q.setValue("Y");$.host=host;$.args=args};$.start=function(){$.panMain.add($.panQuery);$.panMain.add($.panList);$.panMain.add($.panInfo);$.panQuery.add($.lblId_Q);$.panQuery.add($.lblName_Q);$.panQuery.add($.lblAddress_Q);$.panQuery.add($.txtId_Q);$.panQuery.add($.txtName_Q);$.panQuery.add($.txtAddress_Q);$.panQuery.add($.chk1_Q);$.panQuery.add($.chk2_Q);$.panQuery.add($.chk3_Q);$.panQuery.add($.btnSearch);$.panQuery.add($.lblBusiNo_Q);$.panQuery.add($.txtBusiNo_Q);$.panList.add($.grdList);$.panInfo.add($.lblId);$.panInfo.add($.lblSAP);$.panInfo.add($.lblName);$.panInfo.add($.lblAddress);$.panInfo.add($.lblGungu);$.panInfo.add($.lblCompType);$.panInfo.add($.lblGetType);$.panInfo.add($.lblCompPhone);$.panInfo.add($.lblWholeType);$.panInfo.add($.lblTell);$.panInfo.add($.lblFAX);$.panInfo.add($.lblEmail);$.panInfo.add($.lblBusinessId);$.panInfo.add($.lblStartDate);$.panInfo.add($.lblEmp);$.panInfo.add($.lblEtc);$.panInfo.add($.lblSaleYn);$.panInfo.add($.lblLastDate);$.panInfo.add($.lblClosure);$.panInfo.add($.txtId);$.panInfo.add($.txtSAP);$.panInfo.add($.txtName);$.panInfo.add($.bteAdd);$.panInfo.add($.txtAdd1);$.panInfo.add($.txtAdd2);$.panInfo.add($.cmbGungu1);$.panInfo.add($.cmbGungu2);$.panInfo.add($.cmbCompType);$.panInfo.add($.cmbGetType);$.panInfo.add($.txtCompPhone);$.panInfo.add($.cmbWholeType);$.panInfo.add($.txtTell);$.panInfo.add($.txtFAX);$.panInfo.add($.txtEmail);$.panInfo.add($.txtBusinessId);$.panInfo.add($.dteStartDate);$.panInfo.add($.txtEmp);$.panInfo.add($.txtEtc);$.panInfo.add($.chkSaleYn);$.panInfo.add($.chkCloser);$.panInfo.add($.txtLastDate);$.cmbGungu1.setColumn("code","name");$.cmbGungu2.setColumn("code","name");$.cmbGungu1.setEmptyRow(true);$.cmbGungu2.setEmptyRow(true);$.cmbCompType.setEmptyRow(true);$.cmbGetType.setEmptyRow(true);$.cmbWholeType.setEmptyRow(true);var ds=bizComponentData2($,"Q1","L_CRM219|L_CRM0016|");setComboBind([$.cmbGungu1,$.cmbCompType],ds);var ds=bizComponentData2($,"Q2","L_CRM276|L_CRM277");setComboBind([$.cmbGetType,$.cmbWholeType],ds)};$.callback=function(type,ds){if(type=="Q"){convertJavaDateToJs(ds.resultList);setDataGrid([$.grdList],ds);if($.varWholeId==""){$.grdList.selectRow(0)}else{$.grdList.selectRow($.grdList.getGridRowIndex("wholesaler_id",$.varWholeId,0))}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){searchList("Q")}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){$.popUpCallId=id;if(id=="bteAdd"){var param={};g_main.openPopup("popBaseZipCode.html","popBaseZipCode","",0,0,"","",param,"","")}};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){if(id=="cmbGungu1"){if(!value||value==""){$.cmbGungu2.setEnable(false);return}$.cmbGungu2.clear();$.cmbGungu2.setEnable(true);var ds=bizComponentData2($,"Q4","L_CRM220","and parent_sidogu = (select sidogu_code from crmzipcodesido where sidogu_name = '"+value+"')");setComboBind([$.cmbGungu2],ds)}};$.fingerdateedit_click=function(id){if(id=="txtBusinessId"){$.varOrgBusinessId=$.txtBusinessId.getValue()}};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdList"){$.varWholeId=$.grdList.getValue(rId,"wholesaler_id");$.varOrgBusinessId="";$.txtId.setValue($.grdList.getValue(rId,"wholesaler_id")||"");$.txtSAP.setValue($.grdList.getValue(rId,"wholesaler_sap_id")||"");$.txtName.setValue($.grdList.getValue(rId,"wholesaler_name")||"");$.bteAdd.setText($.grdList.getValue(rId,"zip_code")||"");$.txtAdd1.setValue($.grdList.getValue(rId,"address1")||"");$.txtAdd2.setValue($.grdList.getValue(rId,"address2")||"");$.cmbGungu1.setValue($.grdList.getValue(rId,"zip_sido")||"");$.cmbGungu2.setValue($.grdList.getValue(rId,"zip_gungu")||"");$.cmbCompType.setValue($.grdList.getValue(rId,"comp_type")||"");$.cmbGetType.setValue($.grdList.getValue(rId,"wholesaler_get")||"");$.txtCompPhone.setValue($.grdList.getValue(rId,"company_phone")||"");$.cmbWholeType.setValue($.grdList.getValue(rId,"wholesaler_type")||"");$.txtTell.setValue($.grdList.getValue(rId,"extension")||"");$.txtFAX.setValue($.grdList.getValue(rId,"fax")||"");$.txtEmail.setValue($.grdList.getValue(rId,"email")||"");$.txtBusinessId.setValue($.grdList.getValue(rId,"business_no")||"");$.dteStartDate.setValue($.grdList.getValue(rId,"start_date")||"");$.txtEmp.setValue($.grdList.getValue(rId,"incharge")||"");$.txtEtc.setValue($.grdList.getValue(rId,"etc")||"");$.chkSaleYn.setValue($.grdList.getValue(rId,"sale_yn")||"");$.chkCloser.setValue($.grdList.getValue(rId,"delete_yn")||"");$.txtLastDate.setValue(extFormat($.grdList.getValue(rId,"update_time"),"yyyyMMddHHmmss")||"");$.cmbGungu2.setEnable(true)}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){if(id=="txtId_Q"||id=="txtName_Q"||id=="txtAddress_Q"||id=="txtBusiNo_Q"){if(value=="13"){searchList("Q")}}else{if(id=="txtBusinessId"){var val=$.txtBusinessId.getValue();switch(val.length){case 3:$.txtBusinessId.setValue(val+"-");break;case 6:$.txtBusinessId.setValue(val+"-");break}}}};$.fingeredit_lostfocus=function(id,value){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panInfo"){if(btnId=="btnNew"){$.panInfo.clear();$.varWholeId="";$.cmbCompType.setValue("20");$.dteStartDate.setValue(getToday(""));$.txtName.setFocus()}else{if(btnId=="btnSave"){searchList("BUSINESS");if(!validateControls([$.txtName,$.txtBusinessId])){return}if($.txtBusinessId.getValue().length<12){MessageBoxShow("잘못된 사업자번호 입니다.");return}var workType=($.txtId.getValue()==""?"N":"U");if(workType=="N"){if(!searchList("BUSINESS")){MessageBoxShow("중복된 사업자명이 있습니다.");return}}else{if(workType=="U"){if($.varOrgBusinessId!=""&&$.txtBusinessId.getValue()!=$.varOrgBusinessId){if(!searchList("BUSINESS")){MessageBoxShow("중복된 사업자명이 있습니다.");return}}}}saveWholeSaler(workType)}}}};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(popResult){if(id=="popBaseZipCode"){if($.popUpCallId=="bteAdd"){$.bteAdd.setText(popResult.zip_code);$.txtAdd1.setValue(popResult.Addr);$.txtAdd2.setFocus()}}}};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerimage_click=function(id){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>