<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panTab1=null;$.panTab2=null;$.panTop=null;$.panTopLeft=null;$.panTopRight=null;$.panBottom=null;$.grdSampleShipment=null;$.grdYoyang=null;$.lblCompanyName=null;$.lblYoyangNo=null;$.btnSave=null;$.btnLoad=null;$.txtCompanyName=null;$.txtCompanyId=null;$.txtCompanyLike=null;$.txtYoyangNo=null;$.tabMain=null;$.btnSave2=null;$.btnLoad2=null;function createJSON_Q2(workType){var json=createExecuteParamInfo("P_crmSampleShipment_Q",[workType]);return json}function createJSON_Q1(workType){var json=createExecuteParamInfo("P_crmCompanyYoYang_Q",[workType,$.txtCompanyLike.getValue()]);return json}function createJSON_S1(workType){var json=createExecuteParamInfo("P_crmCompanyYoYang_S",[workType,$.txtCompanyId.getValue(),$.txtYoyangNo.getValue()]);return json}function createJSON_S2(rows){var arr=[];for(var i in rows){arr.push(["S",rows[i].Employee_Id||"",rows[i].SampleShipment||"","#UserId#"])}var json=createExecuteParamInfo("P_crmSampleShipment_S",arr);return json}function createJSON_D(){var json=createExecuteParamInfo("P_crmSampleShipment_S",["D","","","#UserId#"]);return json}function searchSampleShipment(){var json=createJSON_Q2("Q");callQuery(["req",json],"Q2",$)}function searchYoyang(){var json=createJSON_Q1("Q");callQuery(["req",json],"Q1",$)}function saveYoyang(){if(!validateControls([$.txtYoyangNo])){return}var json=createJSON_S1("S");callExecute(["req",json],"S1",$)}function saveSampleShipment(){var rows=$.grdSampleShipment.getAllRows();if(rows.length<1){return}var ds=null;var json=createJSON_D();ds=callExecuteSync(["req",json],"D");json=createJSON_S2(rows);callExecute(["req",json],"S2",$)}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,760);$.panMain.setText("");$.panMain.setBottomLine(true);$.panTab1=new FingerPanel(host,"panTab1",0,0,1195,720);$.panTab1.setText("");$.panTab1.setBottomLine(true);$.panTab2=new FingerPanel(host,"panTab2",0,0,1195,720);$.panTab2.setText("");$.panTab2.setBottomLine(true);$.panTop=new FingerPanel(host,"panTop",0,0,1190,100);$.panTop.setText("");$.panTop.setBottomLine(true);$.panTopLeft=new FingerPanel(host,"panTopLeft",0,10,495,80);$.panTopLeft.setText("");$.panTopLeft.setBottomLine(true);$.panTopRight=new FingerPanel(host,"panTopRight",505,0,685,90);$.panTopRight.setText("요양기관기호변경");$.panTopRight.setBottomLine(true);$.panBottom=new FingerPanel(host,"panBottom",0,100,1190,615);$.panBottom.setText("");$.panBottom.setBottomLine(true);$.grdSampleShipment=new FingerDataGrid(host,"grdSampleShipment",0,55,1190,660);$.grdYoyang=new FingerDataGrid(host,"grdYoyang",0,0,1190,610);$.lblCompanyName=new FingerLabel(host,"lblCompanyName",0,30,100,20);$.lblCompanyName.setText("거래처명");$.lblYoyangNo=new FingerLabel(host,"lblYoyangNo",355,10,100,20);$.lblYoyangNo.setText("요양기관기호");$.btnSave=new FingerButton(host,"btnSave",615,10,80,20);$.btnSave.setText("변경");$.btnLoad=new FingerButton(host,"btnLoad",395,30,80,20);$.btnLoad.setText("조회");$.txtCompanyName=new FingerEdit(host,"txtCompanyName",155,10,200,20);$.txtCompanyId=new FingerEdit(host,"txtCompanyId",10,10,140,20);$.txtCompanyLike=new FingerEdit(host,"txtCompanyLike",110,30,200,20);$.txtYoyangNo=new FingerEdit(host,"txtYoyangNo",465,10,140,20);$.tabMain=new FingerTab(host,"tabMain",0,0,1200,760);$.btnSave2=new FingerButton(host,"btnSave2",1100,15,100,20);$.btnSave2.setText("저장");$.btnLoad2=new FingerButton(host,"btnLoad2",1010,15,100,20);$.btnLoad2.setText("조회");$.company_id="";$.Employee_Id="";$.panTopLeft.setBorder(true);$.panTopRight.setBorder(true);$.txtCompanyId.setReadOnly(true);$.txtCompanyName.setReadOnly(true);$.grdYoyang.setColumns([new FingerDataGridColumn("company_id",130,"left","string","거래처아이디"),new FingerDataGridColumn("company_name",250,"left","string","거래처명"),new FingerDataGridColumn("addr",400,"left","string","주소"),new FingerDataGridColumn("channel_name",130,"left","string","채널"),new FingerDataGridColumn("business_no",130,"left","string","사업자번호"),new FingerDataGridColumn("yoyang_no",140,"left","string","요양기관기호"),new FingerDataGridColumn("channel",130,"left","string","채널")]);$.grdYoyang.init();$.grdYoyang.setBorder(true);$.grdYoyang.setColumnHidden(["channel"],true);$.grdSampleShipment.setColumns([new FingerDataGridColumn("DeptName",300,"left","string","부서명",{readonly:true}),new FingerDataGridColumn("Employee_Id",230,"left","string","사번",{readonly:true}),new FingerDataGridColumn("EmpName",300,"left","string","사원명",{readonly:true}),new FingerDataGridColumn("SampleShipment",350,"left","string","배송처")]);$.grdSampleShipment.init({editable:true});$.grdSampleShipment.setBorder(true);$.txtYoyangNo.setAllowBlank(false,"요양기관기호");$.host=host;$.args=args};$.start=function(){$.panMain.add($.tabMain);$.panTab1.add($.panTop);$.panTab1.add($.panBottom);$.panTab2.add($.grdSampleShipment);$.panTab2.add($.btnSave2);$.panTab2.add($.btnLoad2);$.panTop.add($.panTopLeft);$.panTop.add($.panTopRight);$.panTopLeft.add($.lblCompanyName);$.panTopLeft.add($.btnLoad);$.panTopLeft.add($.txtCompanyLike);$.panTopRight.add($.btnSave);$.panTopRight.add($.lblYoyangNo);$.panTopRight.add($.txtCompanyName);$.panTopRight.add($.txtCompanyId);$.panTopRight.add($.txtYoyangNo);$.panBottom.add($.grdYoyang);$.tabMain.addTab([{text:"요양기관기호변경",body:$.panTab1,width:150},{text:"샘플배송처변경",body:$.panTab2,width:150}]);var ds=bizComponentData2($,"Q1","L_HRI998");$.grdSampleShipment.setColumnDropDownList("SampleShipment",ds.resultList[0])};$.callback=function(type,ds){if(type=="Q1"){$.panTopRight.clear();setDataGrid([$.grdYoyang],ds);if($.company_id==""){$.grdYoyang.selectRow(0)}else{$.grdYoyang.selectRow($.grdYoyang.getGridRowIndex("company_id",$.company_id))}}else{if(type=="S1"){searchYoyang()}else{if(type=="Q2"){setDataGrid([$.grdSampleShipment],ds);if($.Employee_Id==""){$.grdSampleShipment.selectRow(0)}else{$.grdSampleShipment.selectRow($.grdSampleShipment.getGridRowIndex("Employee_Id",$.Employee_Id))}}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnLoad"){$.company_id="";searchYoyang()}else{if(id=="btnSave"){if($.grdYoyang.getRowCount()<1){MessageBoxShow("변경대상을 선택해 주세요.");return}saveYoyang()}else{if(id=="btnLoad2"){$.Employee_Id="";searchSampleShipment()}else{if(id=="btnSave2"){saveSampleShipment()}}}}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdYoyang"){$.panTopRight.clear();$.txtCompanyName.setValue($.grdYoyang.getValue(rId,"company_name"));$.txtCompanyId.setValue($.grdYoyang.getValue(rId,"company_id"));$.txtYoyangNo.setValue($.grdYoyang.getValue(rId,"yoyang_no"));$.company_id=$.grdYoyang.getValue(rId,"company_id")}else{if(id=="grdSampleShipment"){$.Employee_Id=$.grdSampleShipment.getValue(rId,"Employee_Id")}}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){if(id=="txtCompanyLike"&&value==13){$.company_id="";searchYoyang()}};$.fingeredit_lostfocus=function(id,value){};$.fingerimage_click=function(id){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){};$.fingerpopup_close=function(id){};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){}};</script>