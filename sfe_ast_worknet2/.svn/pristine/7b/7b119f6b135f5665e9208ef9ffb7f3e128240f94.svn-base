<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panQuery=null;$.panList=null;$.panTab=null;$.lblDate=null;$.dteStart=null;$.dteEnddate=null;$.lblDateDelimiter=null;$.lblProjectName=null;$.txtProjectName=null;$.lblInstituteName=null;$.txtInstituteName=null;$.lblClinicalId=null;$.txtClinicalId=null;$.lblClinicalStatus=null;$.cmbClinicalStatus=null;$.lblProductName=null;$.cmbProductName=null;$.lblNickName=null;$.txtNickName=null;$.lblInvestigatorName=null;$.txtInvestigatorName=null;$.lblEmployee=null;$.bteEmployee=null;$.lblIndNeedYn=null;$.htmView=null;$.btnSearch=null;$.grdList=null;$.panTab1=null;$.btnAKRWithdrawal=null;$.btnIRBWithdrawal=null;$.btnINDWithdrawal=null;$.btnEnd=null;$.btnPayemntEnd=null;$.btndisuse=null;$.lblProjectName2=null;$.lblProjectNickName2=null;$.lblProductName2=null;$.lblProjectType2=null;$.lblTotProjectAmt=null;$.lblInvestigatorName2=null;$.lblEmployee2=null;$.lblProjectRegionType=null;$.lblFinishDate=null;$.lblRealProjectAmt=null;$.memProjectName=null;$.txtNickName2=null;$.txtInstituteName2=null;$.cmbProduct2=null;$.cmbProjectRegionType=null;$.cmbProjectType2=null;$.dteFinishDate=null;$.bteEmployee2=null;$.lblstatus2=null;$.lblAccountingEndDate1=null;$.lblDiscardPlanDate=null;$.lblDiscardDate1=null;$.lblTotGoalPeopleCnt=null;$.lblTotActualPeopleCnt=null;$.lblRegistrationCtDate=null;$.lblDisclosureCtDate=null;$.cmbStatus2=null;$.dteAccountingEndDate1=null;$.dteDiscardPlanDate1=null;$.dteDiscardDate1=null;$.dteRegistrationCtDate=null;$.dteDisclosureCtDate=null;$.lbljournal=null;$.lblauthor=null;$.lbltitle=null;$.lblSubmissionDate=null;$.lblPublishedDate=null;$.lblremark1=null;$.dteSubmissionDate=null;$.dtePublishedDate=null;$.txtJournal=null;$.txtAuthor=null;$.txtTitle=null;$.memRemark=null;$.bteInvestigatorName=null;$.txtDeptCode=null;$.panTab2=null;$.panTab2_1=null;$.panTab2_2=null;$.panTab2_3=null;$.panTab2_4=null;$.lblClinicalId3=null;$.lblIitDocTitle3=null;$.lblIitStatus=null;$.lblIitApprovalDate=null;$.txtAkrApprovalNo3=null;$.bteIitDocTitle=null;$.cmbIitStatus=null;$.dteIitApprovalDate=null;$.chkIitNeedYn=null;$.chkApiNeedYn=null;$.lblApiReviewResult=null;$.lblApiReviewDate=null;$.lblApiReviewText=null;$.cmbApiReviewResult=null;$.dteApiReviewDate=null;$.memApiReviewText=null;$.chkIndNeedYn=null;$.lblMfdsDate=null;$.lblIndApprovalNo=null;$.lblIndApprovalDate=null;$.dteIndRequestDate=null;$.txtIndApprovalNo=null;$.dteIndApprovalDate=null;$.grdAKRDoc=null;$.btnAKR=null;$.btnAddDraft=null;$.panTab3=null;$.panTab3_1=null;$.panTab3_2=null;$.btnContractAdd=null;$.btnContractDel=null;$.grdContract=null;$.grdPayment=null;$.panTab4=null;$.grdFile=null;$.tabProject=null;$.txtProjectAmt=null;$.txtRealAmt=null;$.txtTotGoalPeopleCnt=null;$.txtTotActualPeopleCnt=null;$.btnFileAdd=null;$.btnFileDel=null;$.btnContractUpdate=null;$.btnGianLoad=null;$.cmbStudyType=null;$.lblStudyType=null;$.lblRemark2=null;$.memRemark2=null;$.session=g_main.session.obj;$.strclinical_id="";$.panListWorkType="";$.bSave=false;$.deleteFile=[];$.deletePayment=[];$.iit_wf_doc_id="";$.clinical_id="";$.contract_id="";$.employeeId="";$.varEmployeeId="";$.varEmployeeId2="";$.last_status="";$.institute_id="";$.investigator="";$.strStatus="";function createJSON_Q(workType){var json=createExecuteParamInfo("P_CT1000_Q",[workType,$.dteStart.getValue(),$.dteEnddate.getValue(),$.clinical_id,$.cmbClinicalStatus.getValue()||"",$.txtProjectName.getValue()||"",$.txtNickName.getValue()||"",$.cmbProductName.getValue()||"",$.bteEmployee.getValue()?$.employeeId:"",$.txtInstituteName.getValue()||"",$.txtInvestigatorName.getValue()||"",jQuery("input[name=rdoIND]:checked").val(),"#UserID#",$.contract_id,$.txtClinicalId.getValue()||""]);return json}function createJSON_S(workType){var json=createExecuteParamInfo("P_CT1000_S",[workType,$.clinical_id,$.cmbStatus2.getValue()||"",$.last_status,$.memProjectName.getValue()||"",$.txtNickName2.getValue()||"",$.cmbProduct2.getValue()||"","",$.cmbProjectType2.getValue()||"",$.cmbProjectRegionType.getValue()||"",$.cmbStudyType.getValue()||"",$.txtDeptCode.getValue()||"",$.varEmployeeId,$.dteFinishDate.getValue()||"",$.institute_id,$.txtInstituteName2.getValue()||"",$.investigator,$.bteInvestigatorName.getText()||"",$.dteAccountingEndDate1.getValue()||"",$.dteDiscardPlanDate1.getValue()||"",$.dteDiscardDate1.getValue()||"",Number($.txtProjectAmt.getValue()),Number($.txtTotGoalPeopleCnt.getValue()),Number($.txtTotActualPeopleCnt.getValue()),$.dteRegistrationCtDate.getValue()||"",$.dteDisclosureCtDate.getValue()||"",$.memRemark.getValue()||"",$.memRemark2.getValue()||"",$.txtJournal.getValue()||"",$.txtAuthor.getValue()||"",$.txtTitle.getValue()||"",$.dteSubmissionDate.getValue()||"",$.dtePublishedDate.getValue()||"",$.chkIitNeedYn.getValue()=="Y"?"N":"Y",$.txtAkrApprovalNo3.getValue()||"",$.dteIitApprovalDate.getValue()||"",$.iit_wf_doc_id,$.bteIitDocTitle.getText()||"",$.chkApiNeedYn.getValue()=="Y"?"N":"Y",$.dteApiReviewDate.getValue()||"",$.cmbApiReviewResult.getValue()||"",$.memApiReviewText.getValue()||"","ymdakr_approval_date.yyyymmdd","akr_wf_doc_id","akr_doc_title",$.dteIndRequestDate.getValue(),$.chkIndNeedYn.getValue()=="Y"?"N":"Y",$.txtIndApprovalNo.getValue(),$.dteIndApprovalDate.getValue(),"#UserID#"]);return json}function createJSON_S2(workType){var json=createExecuteParamInfo("P_CTP1000_S",[workType,$.clinical_id,$.grdContract.getValue($.grdContract.getSelectedRowIdx(),"contract_id"),"","","","","","","","N",0,0,0,0,"","","","","","","#UserID#"]);return json}function createJSON_S4(workType,strwf_doc_id){var json=createExecuteParamInfo("P_CT1000_S1",[workType,$.clinical_id,strwf_doc_id]);return json}function createJSON_S5(){var json;var gRow=$.grdFile.getChangedRows();if($.deleteFile.length>0){for(var i in $.deleteFile){gRow.push($.deleteFile[i])}}if(gRow.length<1){MessageBoxShow("저장할 내용이 존재하지 않습니다.");return false}for(var i in gRow){if(gRow[i].rowType=="N"){}}var rows=[];for(var i in gRow){workType=gRow[i].rowType;rows.push([workType,$.clinical_id,Number(gRow[i].file_seq)||0,gRow[i].server_path,gRow[i].server_fname,gRow[i].local_fname,gRow[i].institution||"",gRow[i].contract_yn||"N",gRow[i].plan_yn||"N",gRow[i].use_akr_yn||"N",gRow[i].use_pay_yn||"N","#UserID#"])}json=createExecuteParamInfo("P_CT1000_S3",rows);return json}function createJSON_S3(workType){var json="";if(workType==""){var changedRows=$.grdPayment.getChangedRows();if($.deletePayment.length>0){for(var i in $.deletePayment){changedRows.push($.deletePayment[i])}}if(changedRows.length<1){MessageBoxShow("저장할 내용이 존재하지 않습니다.");return}var rows=[];for(var i in changedRows){workType=changedRows[i].rowType;rows.push([workType,$.grdContract.getValue($.grdContract.getSelectedRowIdx(),"contract_id")||"",changedRows[i].pay_seq||"",$.clinical_id,changedRows[i].draft_type||"",Number(changedRows[i].pay_amt),changedRows[i].approval_date||"",changedRows[i].approval_wf_doc_id||"",changedRows[i].approval_doc_title||"",changedRows[i].pay_date||"",changedRows[i].pay_yn||"","#UserID#"])}json=createExecuteParamInfo("P_CT1000_S2",rows)}return json}function searchClinicalResearch(workType){if(!validateControls([$.dteStart,$.dteEnddate])){return}if(workType=="AKR"){var json=createJSON_Q(workType);return callQuerySync(["req",json],workType)}else{if(workType=="Q"){$.clinical_id="";$.contract_id=""}var json=createJSON_Q(workType);callQuery(["req",json],workType,$)}}function saveWithDrawal(workType){if(workType=="N"||workType=="U"){if(!$.panTab1.validateControls()){return}}var json=createJSON_S(workType);callExecute(["req",json],"DRAWAL_"+workType,$)}function saveContract(workType){if(workType=="D"){var json=createJSON_S2("D");callExecute(["req",json],"D",$)}}function savePayment(workType){var json=createJSON_S3("");if(json){callExecute(["req",json],"S_Pay",$)}}function saveWfList(strWorkType,strwf_doc_id){var json=createJSON_S4(strWorkType,strwf_doc_id);var ds=callExecuteSync(["req",json],"S_WF",$);if(ds){if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg);return false}}else{return false}return true}function saveFile(){var json=createJSON_S5();if(json){callExecute(["req",json],"S_FILE",$)}}function panTab1ButtonHidden(bo){$.btnAKRWithdrawal.setEnable(bo);$.btnIRBWithdrawal.setEnable(bo);$.btnINDWithdrawal.setEnable(bo);$.btnEnd.setEnable(bo);$.btnPayemntEnd.setEnable(bo);$.btndisuse.setEnable(bo)}function fnReFocus(){$.strclinical_id=$.clinical_id}function fnTabchange(value){$.grdPayment.clear();if(value=="0"){searchClinicalResearch("Q1")}else{if(value=="1"){searchClinicalResearch("Q2")}else{if(value=="2"){searchClinicalResearch("Q3")}else{if(value=="3"){searchClinicalResearch("Q4")}}}}}function getDrawalMsg(type){var msg="";if(type=="DRAWAL_N"){msg="정상적으로 등록되었습니다."}else{if(type=="DRAWAL_U"||type=="DRAWAL_U1"){msg="정상적으로 수정되었습니다."}else{if(type=="DRAWAL_D"){msg="정상적으로 삭제되었습니다."}else{msg="정상적으로 처리되었습니다."}}}return msg}function newClick(){$.panTab1.clear();$.panTab2_1.clear();$.panTab2_2.clear();$.panTab2_3.clear();$.tabProject.setActiveTab(0);$.tabProject.hideTab(1);$.tabProject.hideTab(2);$.tabProject.hideTab(3);$.panTab1.setEnable(true);$.txtInstituteName2.setReadOnly(true);$.txtRealAmt.setEnable(false);$.cmbStatus2.setEnable(false);$.dteDiscardPlanDate1.setEnable(false);$.cmbIitStatus.setEnable(false);$.dteIitApprovalDate.setEnable(false);$.btnAKRWithdrawal.setEnable(false);$.btnIRBWithdrawal.setEnable(false);$.btnINDWithdrawal.setEnable(false);$.btnEnd.setEnable(false);$.btnPayemntEnd.setEnable(false);$.btndisuse.setEnable(false);$.panListWorkType="N";$.clinical_id="";$.last_status="";$.institute_id="";$.strStatus="";$.bteEmployee2.setText($.session.EmpName);$.txtDeptCode.setValue($.session.DeptCode);$.varEmployeeId=$.session.UserID;$.grdAKRDoc.clear();$.grdContract.clear();$.grdPayment.clear();$.grdFile.clear();$.cmbProduct2.setEnable(true);$.memProjectName.setFocus()}function changeCheckBox(id,value){if(id=="chkIitNeedYn"){if(value=="Y"){$.panTab2_1.clear();$.chkIitNeedYn.setValue(value);$.txtAkrApprovalNo3.setEnable(false);$.bteIitDocTitle.setEnable(false)}else{$.txtAkrApprovalNo3.setEnable(true);$.bteIitDocTitle.setEnable(true)}}else{if(id=="chkApiNeedYn"){if(value=="Y"){$.panTab2_2.clear();$.iit_wf_doc_id="";$.chkApiNeedYn.setValue(value);$.cmbApiReviewResult.setEnable(false);$.dteApiReviewDate.setEnable(false);$.memApiReviewText.setEnable(false)}else{$.cmbApiReviewResult.setEnable(true);$.dteApiReviewDate.setEnable(true);$.memApiReviewText.setEnable(true)}}else{if(id=="chkIndNeedYn"){if(value=="Y"){$.panTab2_3.clear();$.chkIndNeedYn.setValue(value);$.dteIndRequestDate.setEnable(false);$.txtIndApprovalNo.setEnable(false);$.dteIndApprovalDate.setEnable(false)}else{$.dteIndRequestDate.setEnable(true);$.txtIndApprovalNo.setEnable(true);$.dteIndApprovalDate.setEnable(true)}}}}}function saveButton(bo){if(bo){$.panList.enableButton(["btnSave"])}else{$.panList.disableButton(["btnSave"])}}function chkdoc(strwf_doc_id){for(var i=0;i<$.grdAKRDoc.getRowCount();i++){if(strwf_doc_id==$.grdAKRDoc.getValue(i,"wf_doc_id")){return false}}return true}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,1135);$.panMain.setText("");$.panMain.setBottomLine(true);$.panQuery=new FingerPanel(host,"panQuery",0,0,1200,110);$.panQuery.setText("");$.panQuery.setBottomLine(true);$.panList=new FingerPanel(host,"panList",0,120,1200,500);$.panList.setText("임상 연구 목록");$.panList.setBottomLine(true);$.panTab=new FingerPanel(host,"panTab",0,630,1200,500);$.panTab.setText("");$.panTab.setBottomLine(true);$.lblDate=new FingerLabel(host,"lblDate",0,10,100,20);$.lblDate.setText("등록일");$.dteStart=new FingerDateEdit(host,"dteStart",105,10,100,20);$.dteEnddate=new FingerDateEdit(host,"dteEnddate",215,10,100,20);$.lblDateDelimiter=new FingerLabel(host,"lblDateDelimiter",195,10,15,20);$.lblDateDelimiter.setText("~");$.lblProjectName=new FingerLabel(host,"lblProjectName",310,10,80,20);$.lblProjectName.setText("연구제목");$.txtProjectName=new FingerEdit(host,"txtProjectName",395,10,140,20);$.lblInstituteName=new FingerLabel(host,"lblInstituteName",525,10,100,20);$.lblInstituteName.setText("의뢰기관");$.txtInstituteName=new FingerEdit(host,"txtInstituteName",630,10,140,20);$.lblClinicalId=new FingerLabel(host,"lblClinicalId",765,10,100,20);$.lblClinicalId.setText("AKR App No");$.txtClinicalId=new FingerEdit(host,"txtClinicalId",870,10,140,20);$.lblClinicalStatus=new FingerLabel(host,"lblClinicalStatus",0,40,100,20);$.lblClinicalStatus.setText("진행상태");$.cmbClinicalStatus=new FingerComboBox(host,"cmbClinicalStatus",105,40,147,20);$.lblProductName=new FingerLabel(host,"lblProductName",325,40,65,20);$.lblProductName.setText("품목");$.cmbProductName=new FingerComboBox(host,"cmbProductName",395,40,145,20);$.lblNickName=new FingerLabel(host,"lblNickName",550,40,75,20);$.lblNickName.setText("nickname");$.txtNickName=new FingerEdit(host,"txtNickName",630,40,140,20);$.lblInvestigatorName=new FingerLabel(host,"lblInvestigatorName",765,40,100,20);$.lblInvestigatorName.setText("의뢰자");$.txtInvestigatorName=new FingerEdit(host,"txtInvestigatorName",870,40,140,20);$.lblEmployee=new FingerLabel(host,"lblEmployee",0,70,100,20);$.lblEmployee.setText("담당자");$.bteEmployee=new FingerButtonEdit(host,"bteEmployee",105,70,140,20);$.bteEmployee.setText("");$.lblIndNeedYn=new FingerLabel(host,"lblIndNeedYn",290,70,100,20);$.lblIndNeedYn.setText("MFDS승인");$.htmView=new FingerHTMLView(host,"htmView",385,75,255,20);$.btnSearch=new FingerButton(host,"btnSearch",1120,75,80,20);$.btnSearch.setText("조회");$.grdList=new FingerDataGrid(host,"grdList",0,0,1200,455);$.panTab1=new FingerPanel(host,"panTab1",0,0,1197,430);$.panTab1.setText("연구상세");$.panTab1.setBottomLine(true);$.btnAKRWithdrawal=new FingerButton(host,"btnAKRWithdrawal",565,10,135,30);$.btnAKRWithdrawal.setText("AKR Withdrawal");$.btnIRBWithdrawal=new FingerButton(host,"btnIRBWithdrawal",685,10,135,30);$.btnIRBWithdrawal.setText("IRB Withdrawal");$.btnINDWithdrawal=new FingerButton(host,"btnINDWithdrawal",805,10,145,30);$.btnINDWithdrawal.setText("KFDA Withdrawal");$.btnEnd=new FingerButton(host,"btnEnd",935,10,100,30);$.btnEnd.setText("연구종료");$.btnPayemntEnd=new FingerButton(host,"btnPayemntEnd",1020,10,100,30);$.btnPayemntEnd.setText("회계완료");$.btndisuse=new FingerButton(host,"btndisuse",1105,10,100,30);$.btndisuse.setText("문서폐기");$.lblProjectName2=new FingerLabel(host,"lblProjectName2",0,45,100,20);$.lblProjectName2.setText("연구제목");$.lblProjectNickName2=new FingerLabel(host,"lblProjectNickName2",0,120,100,20);$.lblProjectNickName2.setText("nickname");$.lblProductName2=new FingerLabel(host,"lblProductName2",0,150,100,20);$.lblProductName2.setText("품목");$.lblProjectType2=new FingerLabel(host,"lblProjectType2",245,150,100,20);$.lblProjectType2.setText("연구구분");$.lblTotProjectAmt=new FingerLabel(host,"lblTotProjectAmt",0,210,100,20);$.lblTotProjectAmt.setText("예상 총연구비");$.lblInvestigatorName2=new FingerLabel(host,"lblInvestigatorName2",0,240,100,20);$.lblInvestigatorName2.setText("의뢰자");$.lblEmployee2=new FingerLabel(host,"lblEmployee2",0,270,100,20);$.lblEmployee2.setText("담당자");$.lblProjectRegionType=new FingerLabel(host,"lblProjectRegionType",240,160,100,20);$.lblProjectRegionType.setText("지역구분");$.lblFinishDate=new FingerLabel(host,"lblFinishDate",240,195,100,20);$.lblFinishDate.setText("연구종료일");$.lblRealProjectAmt=new FingerLabel(host,"lblRealProjectAmt",245,210,100,20);$.lblRealProjectAmt.setText("실제 총연구비");$.memProjectName=new FingerMemoEdit(host,"memProjectName",105,10,380,100);$.txtNickName2=new FingerEdit(host,"txtNickName2",105,120,385,20);$.txtInstituteName2=new FingerEdit(host,"txtInstituteName2",105,240,240,20);$.cmbProduct2=new FingerComboBox(host,"cmbProduct2",105,150,140,20);$.cmbProjectRegionType=new FingerComboBox(host,"cmbProjectRegionType",350,160,140,20);$.cmbProjectType2=new FingerComboBox(host,"cmbProjectType2",350,150,140,20);$.dteFinishDate=new FingerDateEdit(host,"dteFinishDate",350,185,140,20);$.bteEmployee2=new FingerButtonEdit(host,"bteEmployee2",105,270,140,20);$.bteEmployee2.setText("");$.lblstatus2=new FingerLabel(host,"lblstatus2",515,70,100,20);$.lblstatus2.setText("진행상태");$.lblAccountingEndDate1=new FingerLabel(host,"lblAccountingEndDate1",510,100,105,20);$.lblAccountingEndDate1.setText("회계정산요청일");$.lblDiscardPlanDate=new FingerLabel(host,"lblDiscardPlanDate",510,130,105,20);$.lblDiscardPlanDate.setText("문서폐기예정일");$.lblDiscardDate1=new FingerLabel(host,"lblDiscardDate1",505,160,110,20);$.lblDiscardDate1.setText("문서폐기일");$.lblTotGoalPeopleCnt=new FingerLabel(host,"lblTotGoalPeopleCnt",495,190,120,20);$.lblTotGoalPeopleCnt.setText("총목표피보험자수");$.lblTotActualPeopleCnt=new FingerLabel(host,"lblTotActualPeopleCnt",495,220,120,20);$.lblTotActualPeopleCnt.setText("총실제피보험자수");$.lblRegistrationCtDate=new FingerLabel(host,"lblRegistrationCtDate",500,250,110,15);$.lblRegistrationCtDate.setText("Registration<br/>CT.gov Date");$.lblDisclosureCtDate=new FingerLabel(host,"lblDisclosureCtDate",485,285,125,15);$.lblDisclosureCtDate.setText("Disclosure<br/>CT.gov Date");$.cmbStatus2=new FingerComboBox(host,"cmbStatus2",620,70,140,20);$.dteAccountingEndDate1=new FingerDateEdit(host,"dteAccountingEndDate1",620,100,140,20);$.dteDiscardPlanDate1=new FingerDateEdit(host,"dteDiscardPlanDate1",620,130,140,20);$.dteDiscardDate1=new FingerDateEdit(host,"dteDiscardDate1",620,160,140,20);$.dteRegistrationCtDate=new FingerDateEdit(host,"dteRegistrationCtDate",620,255,140,20);$.dteDisclosureCtDate=new FingerDateEdit(host,"dteDisclosureCtDate",620,290,140,20);$.lbljournal=new FingerLabel(host,"lbljournal",780,70,100,20);$.lbljournal.setText("Journal");$.lblauthor=new FingerLabel(host,"lblauthor",785,100,95,20);$.lblauthor.setText("Author");$.lbltitle=new FingerLabel(host,"lbltitle",775,130,100,20);$.lbltitle.setText("Title");$.lblSubmissionDate=new FingerLabel(host,"lblSubmissionDate",755,160,120,20);$.lblSubmissionDate.setText("Submission Date");$.lblPublishedDate=new FingerLabel(host,"lblPublishedDate",760,190,115,20);$.lblPublishedDate.setText("Published Date");$.lblremark1=new FingerLabel(host,"lblremark1",775,220,100,20);$.lblremark1.setText("비고");$.dteSubmissionDate=new FingerDateEdit(host,"dteSubmissionDate",880,160,120,20);$.dtePublishedDate=new FingerDateEdit(host,"dtePublishedDate",880,190,120,20);$.txtJournal=new FingerEdit(host,"txtJournal",880,70,305,20);$.txtAuthor=new FingerEdit(host,"txtAuthor",880,100,305,20);$.txtTitle=new FingerEdit(host,"txtTitle",880,130,305,20);$.memRemark=new FingerMemoEdit(host,"memRemark",880,220,300,60);$.bteInvestigatorName=new FingerButtonEdit(host,"bteInvestigatorName",350,240,140,20);$.bteInvestigatorName.setText("");$.txtDeptCode=new FingerEdit(host,"txtDeptCode",255,300,140,20);$.panTab2=new FingerPanel(host,"panTab2",0,0,1200,430);$.panTab2.setText("");$.panTab2.setBottomLine(true);$.panTab2_1=new FingerPanel(host,"panTab2_1",0,0,340,380);$.panTab2_1.setText("IIT검토위원회기안");$.panTab2_1.setBottomLine(true);$.panTab2_2=new FingerPanel(host,"panTab2_2",345,0,260,185);$.panTab2_2.setText("API 승인");$.panTab2_2.setBottomLine(true);$.panTab2_3=new FingerPanel(host,"panTab2_3",345,190,260,190);$.panTab2_3.setText("MFDS 승인");$.panTab2_3.setBottomLine(true);$.panTab2_4=new FingerPanel(host,"panTab2_4",615,0,580,380);$.panTab2_4.setText("AKR 기안목록");$.panTab2_4.setBottomLine(true);$.lblClinicalId3=new FingerLabel(host,"lblClinicalId3",0,10,100,20);$.lblClinicalId3.setText("AKR App No");$.lblIitDocTitle3=new FingerLabel(host,"lblIitDocTitle3",0,40,100,20);$.lblIitDocTitle3.setText("기안명");$.lblIitStatus=new FingerLabel(host,"lblIitStatus",0,70,100,20);$.lblIitStatus.setText("결재상태");$.lblIitApprovalDate=new FingerLabel(host,"lblIitApprovalDate",0,100,100,20);$.lblIitApprovalDate.setText("결재일");$.txtAkrApprovalNo3=new FingerEdit(host,"txtAkrApprovalNo3",110,10,223,20);$.bteIitDocTitle=new FingerButtonEdit(host,"bteIitDocTitle",110,40,220,20);$.bteIitDocTitle.setText("");$.cmbIitStatus=new FingerComboBox(host,"cmbIitStatus",110,70,140,20);$.dteIitApprovalDate=new FingerDateEdit(host,"dteIitApprovalDate",110,100,140,20);$.chkIitNeedYn=new FingerCheckBox(host,"chkIitNeedYn",230,-37.5,105,20);$.chkIitNeedYn.setText("해당사항 없음");$.chkApiNeedYn=new FingerCheckBox(host,"chkApiNeedYn",150,-37.5,105,20);$.chkApiNeedYn.setText("해당사항 없음");$.lblApiReviewResult=new FingerLabel(host,"lblApiReviewResult",0,10,100,20);$.lblApiReviewResult.setText("검토결과");$.lblApiReviewDate=new FingerLabel(host,"lblApiReviewDate",0,40,100,20);$.lblApiReviewDate.setText("API승인일");$.lblApiReviewText=new FingerLabel(host,"lblApiReviewText",0,110,100,20);$.lblApiReviewText.setText("API검토상세");$.cmbApiReviewResult=new FingerComboBox(host,"cmbApiReviewResult",105,10,140,20);$.dteApiReviewDate=new FingerDateEdit(host,"dteApiReviewDate",105,40,140,20);$.memApiReviewText=new FingerMemoEdit(host,"memApiReviewText",105,110,140,20);$.chkIndNeedYn=new FingerCheckBox(host,"chkIndNeedYn",150,-37.5,105,20);$.chkIndNeedYn.setText("해당사항없음");$.lblMfdsDate=new FingerLabel(host,"lblMfdsDate",5,10,100,20);$.lblMfdsDate.setText("MFDS 신청일");$.lblIndApprovalNo=new FingerLabel(host,"lblIndApprovalNo",0,40,105,20);$.lblIndApprovalNo.setText("MFDS 승인번호");$.lblIndApprovalDate=new FingerLabel(host,"lblIndApprovalDate",5,70,100,20);$.lblIndApprovalDate.setText("MFDS 승인일");$.dteIndRequestDate=new FingerDateEdit(host,"dteIndRequestDate",115,10,140,20);$.txtIndApprovalNo=new FingerEdit(host,"txtIndApprovalNo",115,40,140,20);$.dteIndApprovalDate=new FingerDateEdit(host,"dteIndApprovalDate",115,70,140,20);$.grdAKRDoc=new FingerDataGrid(host,"grdAKRDoc",0,0,580,335);$.btnAKR=new FingerButton(host,"btnAKR",365,-40,110,30);$.btnAKR.setText("AKR 기안");$.btnAddDraft=new FingerButton(host,"btnAddDraft",460,-40,135,30);$.btnAddDraft.setText("기안 불러오기");$.panTab3=new FingerPanel(host,"panTab3",0,0,1200,430);$.panTab3.setText("");$.panTab3.setBottomLine(true);$.panTab3_1=new FingerPanel(host,"panTab3_1",0,0,785,380);$.panTab3_1.setText("연구 계약 목록");$.panTab3_1.setBottomLine(true);$.panTab3_2=new FingerPanel(host,"panTab3_2",795,0,400,380);$.panTab3_2.setText("연구비 지급 계획");$.panTab3_2.setBottomLine(true);$.btnContractAdd=new FingerButton(host,"btnContractAdd",545,-40,95,30);$.btnContractAdd.setText("계약추가");$.btnContractDel=new FingerButton(host,"btnContractDel",705,-40,95,30);$.btnContractDel.setText("삭제");$.grdContract=new FingerDataGrid(host,"grdContract",0,0,785,335);$.grdPayment=new FingerDataGrid(host,"grdPayment",0,0,400,335);$.panTab4=new FingerPanel(host,"panTab4",0,0,1197,430);$.panTab4.setText("연구관련 첨부파일");$.panTab4.setBottomLine(true);$.grdFile=new FingerDataGrid(host,"grdFile",0,0,1197,385);$.tabProject=new FingerTab(host,"tabProject",0,0,1200,500);$.txtProjectAmt=new FingerSpinEdit(host,"txtProjectAmt",105,210,140,25);$.txtRealAmt=new FingerSpinEdit(host,"txtRealAmt",350,210,140,25);$.txtTotGoalPeopleCnt=new FingerSpinEdit(host,"txtTotGoalPeopleCnt",620,190,140,25);$.txtTotActualPeopleCnt=new FingerSpinEdit(host,"txtTotActualPeopleCnt",620,220,140,25);$.btnFileAdd=new FingerButton(host,"btnFileAdd",1070,5,80,20);$.btnFileAdd.setText("파일추가");$.btnFileDel=new FingerButton(host,"btnFileDel",1135,5,80,20);$.btnFileDel.setText("파일삭제");$.btnContractUpdate=new FingerButton(host,"btnContractUpdate",625,-40,95,30);$.btnContractUpdate.setText("계약수정");$.btnGianLoad=new FingerButton(host,"btnGianLoad",260,-40,120,30);$.btnGianLoad.setText("결제문서보기");$.cmbStudyType=new FingerComboBox(host,"cmbStudyType",105,180,385,20);$.lblStudyType=new FingerLabel(host,"lblStudyType",0,180,100,20);$.lblStudyType.setText("구분");$.lblRemark2=new FingerLabel(host,"lblRemark2",775,290,100,20);$.lblRemark2.setText("지출보고서 비고");$.memRemark2=new FingerMemoEdit(host,"memRemark2",880,290,300,60);$.panQuery.setBorder(true);$.panList.addButtons(["btnDelete","btnSave","btnNew"]);$.panTab3_2.addButtons(["btnDelete","btnSave","btnAdd"]);$.panTab3_2.setTitleType("SMALL");$.panTab4.addButtons(["btnDelete","btnAdd"]);$.btnFileAdd.setVisible(false);$.btnFileDel.setVisible(false);$.cmbClinicalStatus.setEmptyRow(true);$.cmbProductName.setEmptyRow(true);$.cmbIitStatus.setEmptyRow(true);$.cmbApiReviewResult.setEmptyRow(true);$.cmbStudyType.setEmptyRow(true);$.dteStart.setAllowBlank(false,"등록일");$.dteEnddate.setAllowBlank(false,"등록일");$.cmbStudyType.setAllowBlank(false,"구분");$.txtInstituteName2.setReadOnly(true);$.txtRealAmt.setEnable(false);$.cmbStatus2.setEnable(false);$.dteDiscardPlanDate1.setEnable(false);$.cmbIitStatus.setEnable(false);$.dteIitApprovalDate.setEnable(false);$.htmView.setHTML("<input type = 'radio' id = 'rdoINDA' name = 'rdoIND' value = 'A' style='margin-right: 4px;margin-left: 10px'><label for='rdoINDA'>전체</label></input><input type = 'radio' id = 'rdoINDY' name = 'rdoIND' value = 'Y' style='margin-right: 4px;margin-left: 10px'><label for='rdoINDY'>승인필요</label></input><input type = 'radio' id = 'rdoINDN'  name = 'rdoIND' value = 'N' style='margin-right: 4px;margin-left: 10px'><label for='rdoINDN'>해당없음</label></input>");$.grdList.colIdx=$.grdList.setColumns([new FingerDataGridColumn("seq",30,"right","string",""),new FingerDataGridColumn("create_time",100,"left","string","등록일",{format:"s_ymd"}),new FingerDataGridColumn("akr_approval_no",150,"left","string","AKR App No"),new FingerDataGridColumn("project_name",200,"left","string","연구제목"),new FingerDataGridColumn("project_nickname",200,"left","string","nickname"),new FingerDataGridColumn("status",100,"left","string","진행상태",{excelHidden:true}),new FingerDataGridColumn("status_name",100,"left","string","진행상태"),new FingerDataGridColumn("product_code",100,"left","string","품목",{excelHidden:true}),new FingerDataGridColumn("product_name",100,"left","string","품목"),new FingerDataGridColumn("institute_name",100,"left","string","의뢰기관"),new FingerDataGridColumn("investigator_name",100,"left","string","의뢰자"),new FingerDataGridColumn("project_type",100,"left","string","연구구분",{excelHidden:true}),new FingerDataGridColumn("project_type_name",100,"left","string","연구구분"),new FingerDataGridColumn("tot_project_amt",130,"right","string","예상총연구비",{format:"int"}),new FingerDataGridColumn("tot_real_project_amt",130,"right","string","실제총연구비",{format:"int"}),new FingerDataGridColumn("emplayee_no_msl_name",100,"left","string","담당자"),new FingerDataGridColumn("emplayee_no_msl",100,"left","string","담당자아이디",{excelHidden:false}),new FingerDataGridColumn("finish_date",242,"center","string","연구종료일","yyyyMMdd",{excelHidden:false}),new FingerDataGridColumn("institute",100,"left","string","연구의뢰기관",{excelHidden:false}),new FingerDataGridColumn("investigator",100,"left","string","연구의뢰자",{excelHidden:false}),new FingerDataGridColumn("clinical_id",0,"left","string","clinical_id",{excelHidden:false}),new FingerDataGridColumn("wf_status",100,"left","string","AKR승인상태",{excelHidden:false})]);$.grdList.init({panel:$.panList,scroll:"xy"});$.grdList.setColumnHidden(["emplayee_no_msl","status","product_code","project_type","finish_date","institute","investigator","clinical_id","wf_status"],true);$.grdList.setBorder(false);$.grdAKRDoc.colIdx=$.grdAKRDoc.setColumns([new FingerDataGridColumn("seq",30,"right","string",""),new FingerDataGridColumn("wf_doc_id",100,"left","string","결제문서아이디"),new FingerDataGridColumn("doc_title",330,"left","string","기안명"),new FingerDataGridColumn("wf_status",100,"left","string","결재상태"),new FingerDataGridColumn("wf_time",100,"left","string","결제일",{format:"s_ymd"})]);$.grdAKRDoc.init();$.grdAKRDoc.setColumnHidden(["wf_doc_id"],true);$.grdAKRDoc.setBorder(false);$.grdContract.colIdx=$.grdContract.setColumns([new FingerDataGridColumn("seq",30,"right","string",""),new FingerDataGridColumn("contract_id",100,"left","string","계약ID"),new FingerDataGridColumn("institute_name",230,"left","string","연구기관"),new FingerDataGridColumn("investigator_name",90,"left","string","연구자"),new FingerDataGridColumn("contact_type",99,"center","string","역할"),new FingerDataGridColumn("start_date",85,"left","string","계약시작일",{format:"s_ymd"}),new FingerDataGridColumn("end_date",85,"left","string","계약종료일",""),new FingerDataGridColumn("contract_date",100,"left","string","계약일체결일",{format:"s_ymd"}),new FingerDataGridColumn("contract_amt",100,"right","string","연구비",{format:"int"}),new FingerDataGridColumn("pay_count",90,"left","string","분납횟수"),new FingerDataGridColumn("medicine_support_yn",80,"center","checkbox","임상약지급",{readonly:true}),new FingerDataGridColumn("goal_people_cnt",85,"right","string","목표피험자수"),new FingerDataGridColumn("actual_people_cnt",85,"right","string","실제피험자수"),new FingerDataGridColumn("irb_approval_date",100,"left","string","IRB승인일",{format:"s_ymd"}),new FingerDataGridColumn("irb_approval_no",120,"left","string","IRB승인번호"),new FingerDataGridColumn("exception_end_yn",100,"left","checkbox","계약임의종료"),new FingerDataGridColumn("end_text",100,"left","string","계약종료사유"),new FingerDataGridColumn("remark",100,"left","string","비고")]);$.grdContract.init({scroll:"xy"});$.grdContract.setColumnHidden(["contract_id","contract_date","exception_end_yn","end_text","remark"],true);$.grdContract.setBorder(false);$.grdContract.setEditable(false);$.grdPayment.colIdx=$.grdPayment.setColumns([new FingerDataGridColumn("pay_seq",50,"right","string","차수"),new FingerDataGridColumn("seq",50,"right","string","차수",{readonly:true}),new FingerDataGridColumn("draft_type",110,"left","string",""),new FingerDataGridColumn("pay_amt",243,"right","string","연구비",{format:"int"}),new FingerDataGridColumn("approval_date",100,"left","string","지급승인일",{format:"s_ymd"}),new FingerDataGridColumn("approval_wf_doc_id",100,"left","string","지급승인문서아이디"),new FingerDataGridColumn("approval_doc_title",100,"left","string","지급승인문서제목"),new FingerDataGridColumn("pay_date",100,"left","string","지급일",{format:"int"}),new FingerDataGridColumn("pay_yn",90,"center","checkbox","지급여부",{readonly:true})]);$.grdPayment.init();$.grdPayment.setColumnHidden(["pay_seq","draft_type","approval_date","approval_wf_doc_id","approval_doc_title","pay_date"],true);$.grdPayment.setBorder(false);$.grdPayment.setEditable(true);$.bteEmployee.setDirectSearch("#EMP#");$.grdFile.colIdx=$.grdFile.setColumns([new FingerDataGridColumn("seq",100,"right","string","",{readonly:true}),new FingerDataGridColumn("file_seq",100,"right","string","파일순번",{hidden:true}),new FingerDataGridColumn("server_path",110,"left","string","서버경로",{hidden:true}),new FingerDataGridColumn("server_fname",0,"left","string","",{hidden:true}),new FingerDataGridColumn("institution",230,"left","string","연구기관"),new FingerDataGridColumn("local_fname",550,"left","string","파일명",{readonly:true,isLink:true,pathLinkCols:["server_path","server_fname"]}),new FingerDataGridColumn("contract_yn",80,"center","checkbox","계약서",{sort:null}),new FingerDataGridColumn("plan_yn",80,"center","checkbox","계획서",{sort:null}),new FingerDataGridColumn("use_akr_yn",80,"center","checkbox","AKR기안",{sort:null}),new FingerDataGridColumn("use_pay_yn",80,"center","checkbox","연구비지급기안",{sort:null}),new FingerDataGridColumn("localfilepath",90,"left","string","로컬파일경로",{hidden:true})]);$.grdFile.init({editable:true});$.grdFile.setBorder(false);$.tabProject.addTab([{text:"연구상세",body:$.panTab1,width:140},{text:"연구승인",body:$.panTab2,width:140},{text:"연구계약",body:$.panTab3,width:140},{text:"첨부파일",body:$.panTab4,width:140}]);$.memProjectName.setAllowBlank(false,"연구제목");$.cmbProduct2.setAllowBlank(false,"품목");$.cmbProjectType2.setAllowBlank(false,"연구구분");$.bteInvestigatorName.setAllowBlank(false,"의뢰자");$.bteEmployee2.setAllowBlank(false,"담당자");$.host=host;$.args=args};$.start=function(){$.panMain.add($.panQuery);$.panMain.add($.panList);$.panMain.add($.panTab);$.panQuery.add($.lblDate);$.panQuery.add($.dteStart);$.panQuery.add($.dteEnddate);$.panQuery.add($.lblDateDelimiter);$.panQuery.add($.lblProjectName);$.panQuery.add($.txtProjectName);$.panQuery.add($.lblInstituteName);$.panQuery.add($.txtInstituteName);$.panQuery.add($.lblClinicalId);$.panQuery.add($.txtClinicalId);$.panQuery.add($.lblClinicalStatus);$.panQuery.add($.cmbClinicalStatus);$.panQuery.add($.lblProductName);$.panQuery.add($.cmbProductName);$.panQuery.add($.txtNickName);$.panQuery.add($.lblNickName);$.panQuery.add($.txtInvestigatorName);$.panQuery.add($.lblInvestigatorName);$.panQuery.add($.lblEmployee);$.panQuery.add($.bteEmployee);$.panQuery.add($.lblIndNeedYn);$.panQuery.add($.htmView);$.panQuery.add($.btnSearch);$.panList.add($.grdList);$.panTab.add($.tabProject);$.panTab1.add($.btnAKRWithdrawal);$.panTab1.add($.btndisuse);$.panTab1.add($.btnEnd);$.panTab1.add($.btnINDWithdrawal);$.panTab1.add($.btnIRBWithdrawal);$.panTab1.add($.btnPayemntEnd);$.panTab1.add($.lblTotProjectAmt);$.panTab1.add($.lblRealProjectAmt);$.panTab1.add($.lblProjectType2);$.panTab1.add($.lblProjectRegionType);$.panTab1.add($.lblProjectNickName2);$.panTab1.add($.lblProjectName2);$.panTab1.add($.lblProductName2);$.panTab1.add($.lblInvestigatorName2);$.panTab1.add($.lblFinishDate);$.panTab1.add($.lblEmployee2);$.panTab1.add($.cmbProduct2);$.panTab1.add($.cmbProjectRegionType);$.panTab1.add($.cmbProjectType2);$.panTab1.add($.dteFinishDate);$.panTab1.add($.memProjectName);$.panTab1.add($.txtInstituteName2);$.panTab1.add($.txtNickName2);$.panTab1.add($.bteEmployee2);$.panTab1.add($.lblAccountingEndDate1);$.panTab1.add($.lblDiscardDate1);$.panTab1.add($.lblDiscardPlanDate);$.panTab1.add($.lblDisclosureCtDate);$.panTab1.add($.lblRegistrationCtDate);$.panTab1.add($.lblstatus2);$.panTab1.add($.lblTotActualPeopleCnt);$.panTab1.add($.lblTotGoalPeopleCnt);$.panTab1.add($.cmbStatus2);$.panTab1.add($.dteAccountingEndDate1);$.panTab1.add($.dteDiscardDate1);$.panTab1.add($.dteDiscardPlanDate1);$.panTab1.add($.dteDisclosureCtDate);$.panTab1.add($.dteRegistrationCtDate);$.panTab1.add($.lbltitle);$.panTab1.add($.lblSubmissionDate);$.panTab1.add($.lblremark1);$.panTab1.add($.lblPublishedDate);$.panTab1.add($.lbljournal);$.panTab1.add($.lblauthor);$.panTab1.add($.dteSubmissionDate);$.panTab1.add($.dtePublishedDate);$.panTab1.add($.txtJournal);$.panTab1.add($.txtTitle);$.panTab1.add($.txtAuthor);$.panTab1.add($.memRemark);$.panTab1.add($.bteInvestigatorName);$.panTab1.add($.txtDeptCode);$.panTab1.add($.txtProjectAmt);$.panTab1.add($.txtRealAmt);$.panTab1.add($.txtTotGoalPeopleCnt);$.panTab1.add($.txtTotActualPeopleCnt);$.panTab1.add($.cmbStudyType);$.panTab1.add($.lblStudyType);$.panTab1.add($.lblRemark2);$.panTab1.add($.memRemark2);$.panTab2.add($.panTab2_1);$.panTab2.add($.panTab2_2);$.panTab2.add($.panTab2_3);$.panTab2.add($.panTab2_4);$.panTab2_1.add($.lblClinicalId3);$.panTab2_1.add($.lblIitDocTitle3);$.panTab2_1.add($.lblIitStatus);$.panTab2_1.add($.lblIitApprovalDate);$.panTab2_1.add($.txtAkrApprovalNo3);$.panTab2_1.add($.bteIitDocTitle);$.panTab2_1.add($.cmbIitStatus);$.panTab2_1.add($.dteIitApprovalDate);$.panTab2_1.add($.chkIitNeedYn);$.panTab2_2.add($.chkApiNeedYn);$.panTab2_2.add($.lblApiReviewResult);$.panTab2_2.add($.lblApiReviewDate);$.panTab2_2.add($.lblApiReviewText);$.panTab2_2.add($.cmbApiReviewResult);$.panTab2_2.add($.dteApiReviewDate);$.panTab2_2.add($.memApiReviewText);$.panTab2_3.add($.chkIndNeedYn);$.panTab2_3.add($.lblMfdsDate);$.panTab2_3.add($.lblIndApprovalNo);$.panTab2_3.add($.lblIndApprovalDate);$.panTab2_3.add($.dteIndRequestDate);$.panTab2_3.add($.txtIndApprovalNo);$.panTab2_3.add($.dteIndApprovalDate);$.panTab2_4.add($.grdAKRDoc);$.panTab2_4.add($.btnAKR);$.panTab2_4.add($.btnAddDraft);$.panTab2_4.add($.btnGianLoad);$.panTab3.add($.panTab3_1);$.panTab3.add($.panTab3_2);$.panTab3_1.add($.btnContractAdd);$.panTab3_1.add($.btnContractDel);$.panTab3_1.add($.grdContract);$.panTab3_1.add($.btnContractUpdate);$.panTab3_2.add($.grdPayment);$.panTab4.add($.grdFile);$.panTab4.add($.btnFileDel);$.panTab4.add($.btnFileAdd);$.dteStart.setValue("20130401");$.dteEnddate.setValue(getToday(""));relocateChildIndexInPanel([$.panTab1]);document.getElementById("rdoINDA").checked=true;var ds=bizComponentData2($,"Q1","L_ST0061|L_ST0061|L_CRM0285|L_CRM0286");setComboBind([$.cmbClinicalStatus,$.cmbStatus2,$.cmbStudyType],ds);$.grdContract.setColumnDropDownList("contact_type",ds.resultList[3]);var ds2=bizComponentData2($,"Q1","L_ST0067|L_ST0067");$.cmbProductName.setColumn("product_code","product_name");$.cmbProduct2.setColumn("product_code","product_name");setComboBind([$.cmbProductName,$.cmbProduct2],ds2);var ds3=bizComponentData2($,"Q1","L_ST0062");setComboBind([$.cmbProjectType2],ds3);var ds4=bizComponentData2($,"Q1","L_ST0063");setComboBind([$.cmbApiReviewResult],ds4);var ds5=bizComponentData2($,"Q1","L_CRM0006");setComboBind([$.cmbIitStatus],ds5);$.grdAKRDoc.setColumnDropDownList("wf_status",ds5.resultList[0]);$.cmbProduct2.setValue("");$.cmbProjectRegionType.setValue("");$.cmbProjectType2.setValue("");$.cmbStatus2.setValue("");if($.session.DeptCode=="U110"||$.session.DeptCode=="U100"||$.session.DeptCode=="D130"||$.session.DeptCode=="A120"||$.session.DeptCode=="U140"){$.bSave=true}else{$.bSave=false;$.panList.disableButton(["btnNew"]);panTab1ButtonHidden(false);$.btnAKR.setEnable(false);$.btnContractAdd.setEnable(false);$.btnContractDel.setEnable(false);$.panTab3_2.disableButton(["btnDelete","btnSave","btnAdd"]);$.bteIitDocTitle.setEnable(false)}$.lblProjectRegionType.setVisible(false);$.lblFinishDate.setVisible(false);$.cmbProjectRegionType.setVisible(false);$.dteFinishDate.setVisible(false);$.txtDeptCode.setVisible(false);$.lblApiReviewText.setVisible(false);$.memApiReviewText.setVisible(false);saveButton(false);searchClinicalResearch("Q")};$.callback=function(type,ds){if(type=="Q"){saveButton(false);if(ds.resultList[0].length<1){$.grdList.clear();$.grdList.setDisplayPanelRowCount(0);newClick()}else{setDataGrid([$.grdList],ds);var rIndex;if($.panListWorkType=="N"){rIndex=$.grdList.getRowCount()-1}else{rIndex=($.strclinical_id!=""?$.grdList.getGridRowIndex("clinical_id",$.strclinical_id):0)}$.grdList.selectRow(rIndex)}}else{if(type=="Q1"){$.memProjectName.setValue(ds.resultList[0][0].project_name);$.txtNickName2.setValue(ds.resultList[0][0].project_nickname);$.cmbProduct2.setValue(ds.resultList[0][0].product_code);$.cmbProjectType2.setValue(ds.resultList[0][0].project_type);$.cmbStudyType.setValue(ds.resultList[0][0].study_type);$.dteFinishDate.setValue(ds.resultList[0][0].finish_date);$.txtProjectAmt.setValue(ds.resultList[0][0].tot_project_amt);$.txtRealAmt.setValue(ds.resultList[0][0].tot_real_project_amt);$.txtInstituteName2.setValue(ds.resultList[0][0].institute_name);$.institute_id=ds.resultList[0][0].institute;$.investigator=ds.resultList[0][0].investigator;$.bteInvestigatorName.setText(ds.resultList[0][0].investigator_name);$.bteEmployee2.setText(ds.resultList[0][0].emplayee_no_msl_name);$.txtDeptCode.setValue(ds.resultList[0][0].dept_code);$.varEmployeeId=ds.resultList[0][0].emplayee_no_msl;$.cmbStatus2.setValue(ds.resultList[0][0].status);$.dteAccountingEndDate1.setValue(ds.resultList[0][0].accounting_end_date);$.dteAccountingEndDate1.setValue(ds.resultList[0][0].accounting_end_date);$.dteDiscardPlanDate1.setValue(ds.resultList[0][0].discard_plan_date);$.dteDiscardDate1.setValue(ds.resultList[0][0].discard_date);$.txtTotGoalPeopleCnt.setValue(ds.resultList[0][0].tot_goal_people_cnt);$.txtTotActualPeopleCnt.setValue(ds.resultList[0][0].tot_actual_people_cnt);$.dteRegistrationCtDate.setValue(ds.resultList[0][0].registration_ct_date);$.dteDisclosureCtDate.setValue(ds.resultList[0][0].disclosure_ct_date);$.txtJournal.setValue(ds.resultList[0][0].journal);$.txtAuthor.setValue(ds.resultList[0][0].author);$.txtTitle.setValue(ds.resultList[0][0].title);$.dteSubmissionDate.setValue(ds.resultList[0][0].submission_date);$.dtePublishedDate.setValue(ds.resultList[0][0].published_date);$.memRemark.setValue(ds.resultList[0][0].remark);$.memRemark2.setValue(ds.resultList[0][0].remark2);$.last_status=ds.resultList[0][0].last_status;if($.bSave){$.panList.enableButton(["btnDelete"])}else{$.panList.disableButton(["btnDelete"])}saveButton(false)}else{if(type=="Q2"){$.chkIitNeedYn.setValue(ds.resultList[0][0].iit_need_yn=="Y"?"N":"Y");changeCheckBox("chkIitNeedYn",$.chkIitNeedYn.getValue());$.txtAkrApprovalNo3.setValue(ds.resultList[0][0].akr_approval_no||"");$.dteIitApprovalDate.setValue(ds.resultList[0][0].iit_approval_date);$.bteIitDocTitle.setText(ds.resultList[0][0].iit_doc_title);$.cmbIitStatus.setValue(ds.resultList[0][0].wf_status);$.chkApiNeedYn.setValue(ds.resultList[0][0].api_need_yn=="Y"?"N":"Y");changeCheckBox("chkApiNeedYn",$.chkApiNeedYn.getValue());$.dteApiReviewDate.setValue(ds.resultList[0][0].api_review_date);$.cmbApiReviewResult.setValue(ds.resultList[0][0].api_review_result);$.memApiReviewText.setValue(ds.resultList[0][0].api_review_text);$.chkIndNeedYn.setValue(ds.resultList[0][0].ind_need_yn=="Y"?"N":"Y");changeCheckBox("chkIndNeedYn",$.chkIndNeedYn.getValue());$.dteIndRequestDate.setValue(ds.resultList[0][0].ind_request_date);$.txtIndApprovalNo.setValue(ds.resultList[0][0].ind_approval_no);$.dteIndApprovalDate.setValue(ds.resultList[0][0].ind_approval_date);var month="";var day="";for(var i=0;i<ds.resultList[1].length;i++){if(ds.resultList[1][i].wf_time!=""){if(ds.resultList[1][i].wf_time.month<9){month="0"+(ds.resultList[1][i].wf_time.month+1)}else{month=ds.resultList[1][i].wf_time.month+1}if(ds.resultList[1][i].wf_time.date<10){day="0"+ds.resultList[1][i].wf_time.date}else{day=ds.resultList[1][i].wf_time.date}ds.resultList[1][i].wf_time=("20"+ds.resultList[1][i].wf_time.year.toString().substring(1,3))+month+day}}$.grdAKRDoc.clear();setDataGrid([$.grdAKRDoc],ds.resultList[1],true);$.grdAKRDoc.selectRow(0);$.panList.disableButton(["btnDelete"]);saveButton(false)}else{if(type=="Q3"){$.grdContract.clear();setDataGrid([$.grdContract],ds.resultList[0],true);$.panTab3_1.setTitleType("SMALL");if($.grdContract.getRowCount()<1){$.panTab3_2.disableButton(["btnDelete","btnSave","btnAdd"]);$.btnContractDel.setEnable(false);$.btnContractUpdate.setEnable(false);if($.strStatus=="10"||$.strStatus=="20"||$.strStatus=="30"||$.strStatus=="40"){$.btnContractAdd.setEnable(true)}else{$.btnContractAdd.setEnable(false)}}$.panList.disableButton(["btnDelete"]);saveButton(false);$.grdContract.selectRow(0)}else{if(type=="Q3_1"){$.deletePayment=[];$.grdPayment.clear();if(ds&&ds.resultList[0].length>1){for(var i in ds.resultList[0]){if(!ds.resultList[0][i].pay_yn||ds.resultList[0][i].pay_yn==""){ds.resultList[0][i].pay_yn="N"}}}setDataGrid([$.grdPayment],ds);$.panTab3_2.setTitleType("SMALL");var rId=$.grdContract.getSelectedRowIdx();if($.strStatus=="10"||$.strStatus=="20"||$.strStatus=="30"||$.strStatus=="40"){$.btnContractAdd.setEnable(true);$.btnContractDel.setEnable(true);$.btnContractUpdate.setEnable(true);$.panTab3_2.enableButton(["btnDelete","btnSave","btnAdd"]);if($.grdList.getValue($.grdList.getSelectedRowIdx(),"project_type")=="10"){if($.grdContract.getRowCount()>=1){$.btnContractAdd.setEnable(false)}else{$.btnContractAdd.setEnable(true)}}else{$.btnContractAdd.setEnable(true)}}else{$.btnContractAdd.setEnable(false);$.btnContractDel.setEnable(false);$.btnContractUpdate.setEnable(false);$.panTab3_2.disableButton(["btnDelete","btnSave","btnAdd"])}$.grdPayment.selectRow(0)}else{if(type=="Q4"){var ds1=bizComponentData2($,"Q3","L_CRM0296",$.clinical_id,"","");$.grdFile.extObj.clearAll();$.grdFile.setColumnDropDownList("institution",ds1.resultList[0],{key:"institute",name:"institute_name"});setDataGrid([$.grdFile],ds);$.panList.disableButton(["btnDelete"])}else{if(type=="D"){if(ds){if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg)}else{fnTabchange($.tabProject.getActiveTab())}}}else{if(type=="S_Pay"){if(ds){if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg)}else{MessageBoxShow("정상적으로 저장되었습니다.");searchClinicalResearch("Q3_1")}}}else{if(type=="DRAWAL_N"){if(ds){if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){if(ds.errorCode=="MSG0002"){var strclinical_id=ds.returnStr;fnReFocus();searchClinicalResearch("Q")}else{MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg);return}}else{MessageBoxShow(getDrawalMsg(type));fnReFocus();searchClinicalResearch("Q")}}}else{if(type=="DRAWAL_AKR"||type=="DRAWAL_IRB"||type=="DRAWAL_IND"||type=="DRAWAL_U"||type=="DRAWAL_D"||type=="DRAWAL_U1"||type=="DRAWAL_CLOSE"||type=="DRAWAL_PAYEND"||type=="DRAWAL_DISCARD"){if(ds){if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg)}else{MessageBoxShow(getDrawalMsg(type));if(type!="DRAWAL_D"){fnReFocus()}searchClinicalResearch("Q")}}}else{if(type=="S_FILE"){if(ds){var rs=ds.resultList;var msg="정상적으로 저장되었습니다.";if(rs.length>1){for(var i in rs){if(rs[i].errorCode.substring(0,1)=="P"||rs[i].errorCode.substring(0,1)=="E"){msg=rs[i].errorCode+"</br>"+rs[i].errorMsg;MessageBoxShow(msg);return}}}else{if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){msg=ds.errorCode+"</br>"+ds.errorMsg;MessageBoxShow(msg);return}}MessageBoxShow(msg);$.deleteFile=[];fnReFocus();searchClinicalResearch("Q")}}else{if(type=="S_WF"){if(ds){if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg)}else{MessageBoxShow("정상적으로 저장되었습니다.");fnTabchange($.tabProject.getActiveTab())}}}}}}}}}}}}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){$.strclinical_id="";$.panListWorkType=="";$.deleteFile=[];$.deletePayment=[];searchClinicalResearch("Q")}else{if(id=="btnAKRWithdrawal"){if($.panListWorkType=="N"){return}else{confirmBoxShow("AKRWithdrawal 처리를 진행 하시겠습니까?",function(){if(g_main.msgShare==true){saveWithDrawal("AKR")}})}}else{if(id=="btnIRBWithdrawal"){if($.panListWorkType=="N"){return}else{confirmBoxShow("IRBWithdrawal 처리를 진행 하시겠습니까?",function(){if(g_main.msgShare==true){saveWithDrawal("IRB")}})}}else{if(id=="btnINDWithdrawal"){if($.panListWorkType=="N"){return}else{confirmBoxShow("INDWithdrawal 처리를 진행 하시겠습니까?",function(){if(g_main.msgShare==true){saveWithDrawal("IND")}})}}else{if(id=="btnEnd"){if($.panListWorkType=="N"){return}else{confirmBoxShow("연구 종료 처리를 진행 하시겠습니까?",function(){if(g_main.msgShare==true){saveWithDrawal("CLOSE")}})}}else{if(id=="btnPayemntEnd"){if($.panListWorkType=="N"){return}if($.dteAccountingEndDate1.getValue()==""||!$.dteAccountingEndDate1.getValue()){MessageBoxShow("회계정산요청일을 입력해 주십시오.");$.dteAccountingEndDate1.setFocus();return}else{confirmBoxShow("회계 완료 처리를 진행 하시겠습니까?",function(){if(g_main.msgShare==true){saveWithDrawal("PAYEND")}})}}else{if(id=="btndisuse"){if($.panListWorkType=="N"){return}if($.dteDiscardDate1.getValue()==""||!$.dteDiscardDate1.getValue()){MessageBoxShow("문서폐기일을 입력해 주십시오.");$.dteDiscardPlanDate1.setFocus();return}else{confirmBoxShow("문서를 폐기 하시겠습니까?",function(){if(g_main.msgShare==true){saveWithDrawal("DISCARD")}})}}else{if(id=="btnContractAdd"){if($.grdList.getRowCount()<1){return}$.popUpCallId=id;var param={};param.clinical_id=$.clinical_id;param.contract_id="";param.end_visible="N";param.save_visible="Y";param.exception_end_yn="N";g_main.openPopup("popCTP1000.html","popCTP1000","연구 계약 정보",525,780,"","",param,"","")}else{if(id=="btnContractDel"){if($.grdList.getRowCount()<1||$.grdContract.getRowCount()<1){return}confirmBoxShow($.grdContract.getValue($.grdContract.getSelectedRowIdx(),"institute_name")+"["+$.grdContract.getValue($.grdContract.getSelectedRowIdx(),"investigator_name")+"]계약건을 <br/>삭제하시겠습니까?",function(){if(g_main.msgShare==true){saveContract("D")}})}else{if(id=="btnContractUpdate"){var rId=$.grdContract.getSelectedRowIdx();var data=$.grdContract.getValue(rId);$.popUpCallId=id;var param={};param.clinical_id=$.clinical_id;param.contract_id=data.contract_id;param.end_visible="Y";param.exception_end_yn=data.exception_end_yn;if($.strStatus=="10"||$.strStatus=="20"||$.strStatus=="30"||$.strStatus=="40"){if($.bSave){param.save_visible="Y"}else{param.save_visible="N"}}else{param.save_visible="N"}g_main.openPopup("popCTP1000.html","popCTP1000","연구 계약 정보",525,780,"","",param,"","")}else{if(id=="btnAddDraft"){$.popUpCallId=id;var param={};g_main.openPopup("crmWFEndDocSub.html","crmWFEndDocSub","기결문서",1100,735,"","",param,"","")}else{if(id=="btnAKR"){$.popUpCallId=id;var rId=$.grdList.getSelectedRowIdx();if(!rId){return}var ds=searchClinicalResearch("AKR");if(ds.resultList.length<2||ds.resultList[0].length<1){return}var strtitle="[IIT 지원 기안] "+ds.resultList[0][0].akr_approval_no+" / "+ds.resultList[0][0].institute_name;var strcontent='<p>연구자주 도임상연구의 지원을 다음과 같이 기안합니다.</p><p><br></p><p><strong><span style="font-family: times new roman;"><span style="font-family: arial;">1.</span> JAMA검토 결과</span></strong></p><p><br></p><p><br></p><p><span style="font-family: times new roman;"><strong><span style="font-family: arial;">2. </span>AKR APProval No.</strong></span></p><p>&nbsp;&nbsp;&nbsp;'+ds.resultList[0][0].akr_approval_no+'</p><p><br></p><p><span style="font-family: arial;"><strong>3.</strong></span> <span style="font-family: 굴림,gulim;"><strong>연구 제목</strong></span></p><p>&nbsp;&nbsp;&nbsp;'+ds.resultList[0][0].project_name+'</p><p><br></p><p><strong><span style="font-family: arial;">4. </span><span style="font-family: 굴림,gulim;">연구기관/연구자</span></strong></p><p>&nbsp;&nbsp;&nbsp;'+ds.resultList[0][0].institute_name+"&nbsp;"+ds.resultList[0][0].investigator_name+'</p><p><br></p><p><strong><span style="font-family: arial;">5.</span><span style="font-family: 굴림,gulim;">연구지원 배경 및 연구 결과물 활용계획</span></strong></p><p><br></p><p><span style="font-family: arial;"><strong>6.</strong></span> <span style="font-family: 굴림,gulim;"><strong>연구비 총 금액</strong></span></p><p>&nbsp;&nbsp;&nbsp;'+ds.resultList[0][0].tot_project_amt+'원</p><p>&nbsp;&nbsp;&nbsp;<span style="font-family: 굴림,gulim;">병원 간접비 정책 변경 등의 사유로 총 금액이 변경될 수 있습니다.</span></p><p><br></p><p><span style="font-family: arial;"><strong>7.</strong></span> <span style="font-family: 굴림,gulim;"><strong>임상약 총 수량</strong></span></p><p><br></p><p><br></p><p><span style="font-family: arial;"><strong>8.</strong></span> <span style="font-family: 굴림,gulim;"><strong>첨부문서</strong></span></p><p><br></p><p><br></p><p><br></p>';var param={title:strtitle,content:strcontent,file_list:ds.resultList[1]};g_main.openPopup("crmWFGeneralNew.html","crmWFGeneralNew","자유기안",1200,1000,"","",param,"","")}else{if(id=="btnGianLoad"){if($.grdAKRDoc.getRowCount()<1){return}$.popUpCallId=id;var rId=$.grdAKRDoc.getSelectedRowIdx();var param={wf_doc_id:$.grdAKRDoc.getValue(rId,"wf_doc_id")};g_main.openPopup("popWFViewer.html","popWFViewer","결재문서조회",0,0,"","",param,"","")}}}}}}}}}}}}}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){$.popUpCallId=id;if(id=="bteEmployee"){var param={employee_id:$.varEmployeeId||"",emp_name:$.bteEmployee.getText()||""};g_main.openPopup("popEmp.html","popEmp","사원 조회",750,500,"","",param,"","")}else{if(id=="bteEmployee2"){var param={employee_id:$.varEmployeeId||"",emp_name:$.bteEmployee.getText()||""};g_main.openPopup("popEmp.html","popEmp","사원 조회",750,500,"","",param,"","")}else{if(id=="bteInvestigatorName"){var param={contact_name:$.bteInvestigatorName.getText()||""};g_main.openPopup("popContact.html","popContact","의뢰자 조회",600,550,"","",param,"","")}else{if(id=="bteIitDocTitle"){var param={type:"single"};g_main.openPopup("crmWFEndDocSub.html","crmWFEndDocSub","",1100,735,"","",param,"","")}}}}};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){saveButton(true);if(id=="chkIitNeedYn"||id=="chkApiNeedYn"||id=="chkIndNeedYn"){changeCheckBox(id,value)}};$.fingercombobox_change=function(id,value){if(id=="cmbProductName"||id=="cmbClinicalStatus"){}else{saveButton(true)}};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){if(id=="dteStart"||id=="dteEnddate"){}else{if(id=="dteDiscardDate1"){saveButton(false)}else{if(id=="dteAccountingEndDate1"){if(value==""){$.dteDiscardPlanDate1.setValue("")}else{$.dteDiscardPlanDate1.setValue(getCalcMonth(value,60))}saveButton(false)}else{saveButton(true)}}}};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdList"){$.deleteFile=[];$.deletePayment=[];$.panListWorkType="";$.clinical_id=$.grdList.getValue(rId,"clinical_id");$.memProjectName.setValue("");$.txtNickName2.setValue("");$.cmbProduct2.setValue("");$.cmbProjectType2.setValue("");$.dteFinishDate.setValue("");$.txtProjectAmt.setValue("");$.txtRealAmt.setValue("");$.txtInstituteName2.setValue("");$.bteInvestigatorName.setText("");$.bteEmployee2.setText("");$.cmbStatus2.setValue("");$.dteAccountingEndDate1.setValue("");$.dteAccountingEndDate1.setValue("");$.dteDiscardPlanDate1.setValue("");$.dteDiscardDate1.setValue("");$.txtTotGoalPeopleCnt.setValue("");$.txtTotActualPeopleCnt.setValue("");$.dteRegistrationCtDate.setValue("");$.dteDisclosureCtDate.setValue("");$.txtJournal.setValue("");$.txtAuthor.setValue("");$.txtTitle.setValue("");$.dteSubmissionDate.setValue("");$.dtePublishedDate.setValue("");$.memRemark.setValue("");$.last_status="";$.txtDeptCode.setValue("");$.varEmployeeId="";$.institute_id="";$.strStatus=$.grdList.getValue(rId,"status");$.panTab1.setEnable(true);$.txtInstituteName2.setReadOnly(true);$.txtRealAmt.setEnable(false);$.cmbStatus2.setEnable(false);$.dteDiscardPlanDate1.setEnable(false);$.cmbIitStatus.setEnable(false);$.dteIitApprovalDate.setEnable(false);if($.strStatus=="10"){$.btnAKRWithdrawal.setEnable(true);$.btnIRBWithdrawal.setEnable(true);$.btnINDWithdrawal.setEnable(true);$.btnEnd.setEnable(false);$.btndisuse.setEnable(false);$.btnPayemntEnd.setEnable(false);$.cmbProduct2.setEnable(true)}else{if($.strStatus=="20"){$.btnAKRWithdrawal.setEnable(false);$.btnIRBWithdrawal.setEnable(false);$.btnINDWithdrawal.setEnable(false);$.btnEnd.setEnable(true);$.btndisuse.setEnable(false);$.btnPayemntEnd.setEnable(false);$.cmbProduct2.setEnable(true)}else{if($.strStatus=="30"){$.btnAKRWithdrawal.setEnable(false);$.btnIRBWithdrawal.setEnable(false);$.btnINDWithdrawal.setEnable(false);$.btnEnd.setEnable(false);$.btndisuse.setEnable(false);$.btnPayemntEnd.setEnable(true);$.cmbProduct2.setReadOnly(false)}else{if($.strStatus=="40"){$.btnAKRWithdrawal.setEnable(false);$.btnIRBWithdrawal.setEnable(false);$.btnINDWithdrawal.setEnable(false);$.btnEnd.setEnable(false);$.btndisuse.setEnable(true);$.btnPayemntEnd.setEnable(false);$.cmbProduct2.setEnable(true)}else{if($.strStatus=="50"){$.btnAKRWithdrawal.setEnable(false);$.btnIRBWithdrawal.setEnable(false);$.btnINDWithdrawal.setEnable(false);$.btnEnd.setEnable(false);$.btndisuse.setEnable(false);$.btnPayemntEnd.setEnable(false);$.cmbProduct2.setEnable(false)}else{if($.strStatus=="60"){$.btnAKRWithdrawal.setEnable(false);$.btnIRBWithdrawal.setEnable(false);$.btnINDWithdrawal.setEnable(false);$.btnEnd.setEnable(false);$.btndisuse.setEnable(false);$.btnPayemntEnd.setEnable(false);$.panTab1.setEnable(false)}else{if($.strStatus=="70"){$.btnAKRWithdrawal.setEnable(false);$.btnIRBWithdrawal.setEnable(false);$.btnINDWithdrawal.setEnable(false);$.btnEnd.setEnable(false);$.btndisuse.setEnable(false);$.btnPayemntEnd.setEnable(false);$.cmbProduct2.setEnable(false)}}}}}}}$.tabProject.showTab(1);$.tabProject.showTab(2);$.tabProject.showTab(3);fnTabchange($.tabProject.getActiveTab());saveButton(false)}else{if(id=="grdContract"){$.contract_id=$.grdContract.getValue(rId,"contract_id");searchClinicalResearch("Q3_1")}else{if(id=="grdPayment"){var rId=$.grdPayment.getSelectedRowIdx();var pay_count=$.grdContract.getValue($.grdContract.getSelectedRowIdx(),"pay_count");var payrowcount=$.grdPayment.getRowCount();if(Number(pay_count)<=Number(payrowcount)){$.panTab3_2.disableButton(["btnAdd"])}else{$.panTab3_2.enableButton(["btnAdd"])}if($.grdPayment.getValue(rId,"pay_yn")=="Y"){$.panTab3_2.disableButton(["btnDelete","btnSave"])}else{$.panTab3_2.enableButton(["btnDelete","btnSave"])}}}}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){if(id=="grdFile"){saveButton(true)}else{saveButton(false)}};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){if(id=="txtProjectName"||id=="txtInstituteName"||id=="txtClinicalId"||id=="txtNickName"||id=="txtInvestigatorName"){}else{saveButton(true)}};$.fingeredit_keypress=function(id,value){if((id=="txtProjectName")&&value=="13"){searchClinicalResearch("Q")}else{if((id=="txtInstituteName")&&value=="13"){searchClinicalResearch("Q")}else{if((id=="txtClinicalId")&&value=="13"){searchClinicalResearch("Q")}else{if((id=="txtNickName")&&value=="13"){searchClinicalResearch("Q")}else{if((id=="txtInvestigatorName")&&value=="13"){searchClinicalResearch("Q")}}}}}};$.fingeredit_lostfocus=function(id,value){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panList"){if(btnId=="btnNew"){newClick()}else{if(btnId=="btnDelete"){if($.grdList.getRowCount()<1||$.panListWorkType=="N"){return}var rId=$.grdList.getSelectedRowIdx();var data=$.grdList.getValue(rId);var msg="";if(data.akr_approval_no==""){msg="선택된 연구를 삭제하시겠습니까?"}else{msg=data.akr_approval_no+" 을(를) 삭제하시겠습니까?"}confirmBoxShow(msg,function(){if(g_main.msgShare==true){saveWithDrawal("D")}})}else{if(btnId=="btnSave"){var tabIndex=$.tabProject.getActiveTab();var strWork_type="U";if(tabIndex=="0"||tabIndex=="1"){if(tabIndex=="0"){strWork_type=($.panListWorkType=="N"?$.panListWorkType:strWork_type)}else{strWork_type="U1"}saveWithDrawal(strWork_type)}else{if(tabIndex=="3"){saveFile()}}}}}}else{if(panelId=="panTab4"){if(btnId=="btnAdd"){OpenFileUploader("CT",function(ds){if(!ds||ds.errorCode=="ERR0000"){MessageBoxShow("파일 업로드가 실패 하였습니다.");return}var fileList=ds.resultList[0];var grdFileLen=$.grdFile.getRowCount();for(var i=0;i<fileList.length;i++){fileList[i].seq=0;for(var j=0;j<grdFileLen;j++){if(fileList[i]["local_fname"]==$.grdFile.getValue(j,"local_fname")&&fileList[i]["server_path"]==$.grdFile.getSSSSValue(j,"server_path")){MessageBoxShow("중복된 파일이 있습니다. 리스트를 확인해 주세요.")}}}$.grdFile.addRows(fileList);saveButton(true)})}else{if(btnId=="btnDelete"){var rId=$.grdFile.getSelectedRowIdx();if(!rId){MessageBoxShow("삭제할 파일을 선택해 주시기 바랍니다.");return}var result=removeSysAttachFile({file_path:($.grdFile.getValue(rId,"server_path")+$.grdFile.getValue(rId,"server_fname"))});confirmBoxShow("정말 삭제하시겠습니까? 삭제하시려면 예를 클릭하세요.",function(){if(g_main.msgShare==true){if(result){if($.grdFile.getRowStatus(rId)!="N"){$.grdFile.getItem(rId).rowType="D";$.deleteFile.push($.grdFile.getValue(rId))}MessageBoxShow("파일 삭제 되었습니다.");$.grdFile.deleteRow(rId);saveButton(true)}else{MessageBoxShow("파일을 삭제하는 도중 오류가 발생 하였습니다.");return}}})}}}else{if(panelId=="panTab3_2"){if(btnId=="btnSave"){savePayment("")}else{if(btnId=="btnAdd"){if(!$.grdContract.getSelectedRowIdx()){return}$.grdPayment.addRow({seq:$.grdPayment.getRowCount()+1,pay_yn:"N",pay_amt:"0"})}else{if(btnId=="btnDelete"){if($.grdContract.getRowCount()<1||$.grdPayment.getRowCount()<1){return}var rId=$.grdPayment.getSelectedRowIdx();var data=$.grdPayment.getValue(rId);confirmBoxShow("삭제하시겠습니까?",function(){if(g_main.msgShare==true){if($.grdPayment.getRowStatus(rId)!="N"){$.grdPayment.getItem(rId).rowType="D";$.deletePayment.push($.grdPayment.getValue(rId))}$.grdPayment.deleteRow(rId);var pay_count=$.grdContract.getValue($.grdContract.getSelectedRowIdx(),"pay_count");if(Number(pay_count)==0){pay_count=1}if($.grdPayment.getRowCount()>=Number(pay_count)){$.panTab3_2.disableButton(["btnAdd"])}else{$.panTab3_2.enableButton(["btnAdd"])}}})}}}}}}};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(popResult){if(id=="popEmp"){if($.popUpCallId=="bteEmployee"){if(!popResult.employee_id){$.employeeId="";$.bteEmployee.setText("")}else{$.employeeId=popResult.employee_id;$.bteEmployee.setText(popResult.emp_name)}}else{if($.popUpCallId=="bteEmployee2"){saveButton(true);if(!popResult.employee_id){$.varEmployeeId="";$.bteEmployee2.setText("")}else{$.varEmployeeId=popResult.employee_id;$.bteEmployee2.setText(popResult.emp_name)}}}}if(id=="popContact"){saveButton(true);if($.popUpCallId=="bteInvestigatorName"){if(!popResult.company_id){$.institute_id="";$.investigator="";$.txtInstituteName2.setValue("");$.bteInvestigatorName.setText("")}else{$.institute_id=popResult.company_id;$.investigator=popResult.contact_id;$.txtInstituteName2.setValue(popResult.company_name);$.bteInvestigatorName.setText(popResult.contact_name)}}}else{if(id=="crmWFEndDocSub"){saveButton(true);if($.popUpCallId=="btnAddDraft"){for(var i=0;i<popResult.length;i++){if(chkdoc(popResult[i]["wf_doc_id"])){popResult[i].seq="1";popResult[i].wf_status="90";$.grdAKRDoc.addRow(popResult[i]);saveWfList("N",popResult[i]["wf_doc_id"])}}}else{if($.popUpCallId=="bteIitDocTitle"){$.bteIitDocTitle.setText(popResult[0].doc_title);$.dteIitApprovalDate.setValue(popResult[0].update_time.substring(0,8));$.iit_wf_doc_id=popResult[0].wf_doc_id;$.cmbIitStatus.setValue("90")}}}else{if(id=="popCTP1000"){if($.popUpCallId=="btnContractAdd"){if(popResult.result=="Y"){if($.strStatus=="10"){$.grdList.setValue($.grdList.getSelectedRowIdx(),"status","20")}fnTabchange($.tabProject.getActiveTab())}}else{if($.popUpCallId=="btnContractUpdate"){if(popResult.result=="Y"){fnTabchange($.tabProject.getActiveTab())}}}}else{if(id=="crmWFGeneralNew"){if($.popUpCallId=="btnAKR"){saveWfList("N",popResult.wf_doc_id)}}}}}}};$.fingerpopup2_close=function(id){};$.fingertab_selectionchange=function(id,tabid){if(id=="tabProject"){$.deleteFile=[];$.deletePayment=[];if($.grdList.getRowCount()<1){newClick();return}fnTabchange(tabid);$.panListWorkType="";saveButton(false)}};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerradiobox_change=function(id,value){};$.fingerimage_click=function(id){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>