<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panQuery=null;$.panList=null;$.htmlView1=null;$.btnSearch=null;$.lbl_site_code=null;$.cmb_site_code=null;$.lbl_dept=null;$.txt_dept_code=null;$.bte_dept_name=null;$.lbl_base_date=null;$.dte_base_date=null;$.lbl_emp=null;$.txt_emp_code=null;$.bte_emp_name=null;$.lbl_position_code=null;$.cmb_position_code=null;$.lbl_emp_state=null;$.cmb_emp_state=null;$.session=g_main.session.obj;function createJson_Q(workType){var json=createExecuteParamInfo("HR..P_HRI1900_Q",[workType,$.cmb_site_code.getValue()||"",$.txt_dept_code.getValue()||"",$.cmb_position_code.getValue()||"",$.txt_emp_code.getValue()||"",$.cmb_emp_state.getValue()||"",$.dte_base_date.getValue()||""]);return json}function searchHRI1900(workType){if(!$.panQuery.validateControls()){return}var json=createJson_Q(workType);callQuery(["req",json],workType,$)}function personalInfoHtmlCreate(){var box='<div class = "outer_box_HRI1900"> 		<div class = "inner_image_box_HRI1900"> 			<img class = "inner_image_HRI1900" src = "{emp_photo}"/> 		</div> 		<div class = "inner_info_box_HRI1900"> 			<table> 				<colgroup> 					<col style="width: 103px;"/> 					<col style="width: 154px;"/> 					<col style="width: 138px;"/> 				</colgroup> 				<tr> 					<td>&nbsp;&nbsp;이름:&nbsp;&nbsp;{emp_full_name}</td> 					<td>&nbsp;&nbsp;부서:&nbsp;&nbsp;{dept_name} </td> 					<td>&nbsp;&nbsp;부서기간:&nbsp;&nbsp;{dept_period}</td> 				</tr> 				<tr> 					<td>&nbsp;&nbsp;직무:&nbsp;&nbsp;{job_code}</td> 					<td>&nbsp;&nbsp;직급:&nbsp;&nbsp;{job_rank}</td> 					<td>&nbsp;&nbsp;직급기간:&nbsp;&nbsp;{job_rank_period}</td> 				</tr> 			</table> 			<table style = "margin-top: 1px;"> 				<colgroup> 					<col style="width: 35%;"/> 					<col style="width: 35%;"/> 					<col style="width: 10%;"/> 					<col style="width: 20%;"/> 				</colgroup> 				<tr> 					<td>&nbsp;&nbsp;입사일:&nbsp;&nbsp;{enter_date}</td> 					<td>&nbsp;&nbsp;나이:&nbsp;&nbsp;{age}</td> 					<td rowspan = "4" style = "text-align: center">{eval}</td> 					<td>&nbsp;&nbsp;14년:&nbsp;&nbsp;{eval_grade_01}</td> 				</tr> 				<tr> 					<td>&nbsp;&nbsp;전경력:&nbsp;&nbsp;{before_career_period}</td> 					<td>&nbsp;&nbsp;학교:&nbsp;&nbsp;{school}</td> 					<td>&nbsp;&nbsp;15년:&nbsp;&nbsp;{eval_grade_02}</td> 				</tr> 				<tr> 					<td>&nbsp;&nbsp;AKR경력:&nbsp;&nbsp;{current_career_period}</td> 					<td>&nbsp;&nbsp;전공:&nbsp;&nbsp;{major}</td> 					<td>&nbsp;&nbsp;16년:&nbsp;&nbsp;{eval_grade_03}</td> 				</tr> 				<tr> 					<td>&nbsp;&nbsp;총경력:&nbsp;&nbsp;{total_career_period}</td> 					<td></td> 					<td>&nbsp;&nbsp;17년:&nbsp;&nbsp;{eval_grade_04}</td> 				</tr> 			</table> 		</div> 	</div>';return box}function personalInfoCssSettings(){jQuery(".outer_box_HRI1900").css({width:"570px",height:"201px",margin:"2px",position:"relative","float":"left"});jQuery(".inner_image_box_HRI1900").css({width:"170px",height:"199px",position:"absolute",left:"0"}).find("img").css({width:"100%",height:"100%",border:"1px solid #cacece"});jQuery(".inner_info_box_HRI1900").css({width:"399px",height:"201px",position:"absolute",right:"0"}).find("table").css({width:"100%","border-collapse":"collapse","table-layout":"fixed"}).find("tr").css({height:"32px","line-height":"32px",border:"1px solid #cacece"}).find("td").css({border:"1px solid #cacece",background:"#f1f1f1","overflow:":"hidden","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden",cursor:"default"})}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,830);$.panMain.setText("");$.panMain.setBottomLine(true);$.panQuery=new FingerPanel(host,"panQuery",0,0,1200,130);$.panQuery.setText("검색조건");$.panQuery.setBottomLine(true);$.panList=new FingerPanel(host,"panList",0,140,1200,670);$.panList.setText("인사정보조회");$.panList.setBottomLine(true);$.htmlView1=new FingerHTMLView(host,"htmlView1",0,2,1180,610);$.btnSearch=new FingerButton(host,"btnSearch",1120,45,80,20);$.btnSearch.setText("조회");$.lbl_site_code=new FingerLabel(host,"lbl_site_code",0,15,100,20);$.lbl_site_code.setText("소속사업장");$.cmb_site_code=new FingerComboBox(host,"cmb_site_code",105,15,245,20);$.lbl_dept=new FingerLabel(host,"lbl_dept",350,15,70,20);$.lbl_dept.setText("부서");$.txt_dept_code=new FingerEdit(host,"txt_dept_code",425,15,85,20);$.bte_dept_name=new FingerButtonEdit(host,"bte_dept_name",515,15,148,20);$.bte_dept_name.setText("");$.lbl_base_date=new FingerLabel(host,"lbl_base_date",675,15,90,20);$.lbl_base_date.setText("기준일자");$.dte_base_date=new FingerDateEdit(host,"dte_base_date",770,15,140,20);$.lbl_emp=new FingerLabel(host,"lbl_emp",0,45,100,20);$.lbl_emp.setText("사원");$.txt_emp_code=new FingerEdit(host,"txt_emp_code",105,45,85,20);$.bte_emp_name=new FingerButtonEdit(host,"bte_emp_name",195,45,148,20);$.bte_emp_name.setText("");$.lbl_position_code=new FingerLabel(host,"lbl_position_code",350,45,70,20);$.lbl_position_code.setText("호칭");$.cmb_position_code=new FingerComboBox(host,"cmb_position_code",425,45,245,20);$.lbl_emp_state=new FingerLabel(host,"lbl_emp_state",675,45,90,20);$.lbl_emp_state.setText("근무상태");$.cmb_emp_state=new FingerComboBox(host,"cmb_emp_state",770,45,145,20);$.htmlView1.setVerticalScroll(false);$.panList.addButtons(["btnPrint"]);$.panList.setScroll(true);$.cmb_site_code.setEmptyRow(true);$.cmb_position_code.setEmptyRow(true);$.cmb_emp_state.setEmptyRow(true);$.cmb_site_code.setColumn("site_code","site_name");$.cmb_site_code.setAllowBlank(false,"소속사업장");$.dte_base_date.setAllowBlank(false,"기준일자");$.panelTitleText=$.panList.getText();$.host=host;$.args=args};$.start=function(){$.panMain.add($.panQuery);$.panMain.add($.panList);$.panQuery.add($.btnSearch);$.panQuery.add($.lbl_site_code);$.panQuery.add($.cmb_site_code);$.panQuery.add($.lbl_dept);$.panQuery.add($.txt_dept_code);$.panQuery.add($.bte_dept_name);$.panQuery.add($.lbl_base_date);$.panQuery.add($.dte_base_date);$.panQuery.add($.lbl_emp);$.panQuery.add($.txt_emp_code);$.panQuery.add($.bte_emp_name);$.panQuery.add($.lbl_position_code);$.panQuery.add($.cmb_position_code);$.panQuery.add($.lbl_emp_state);$.panQuery.add($.cmb_emp_state);$.panList.add($.htmlView1);var ds=bizComponentData2($,"Q1","L_ORG001|L_HRI002|L_HRI009");setComboBind([$.cmb_site_code,$.cmb_position_code,$.cmb_emp_state],ds);$.cmb_site_code.setValue($.session.SiteCode);$.cmb_emp_state.setValue("WORK");$.dte_base_date.setValue(getToday())};$.callback=function(type,ds){if(type=="Q"){if(ds){if(ds.resultList[0].length){var rs=ds.resultList[0];var data="";for(var i in rs){var box=personalInfoHtmlCreate();if(rs[i].emp_photo){rs[i].emp_photo=convertByteArrayToImageSource(rs[i].emp_photo)}box=box.replace("{emp_photo}",rs[i].emp_photo).replace("{dept_period}",rs[i].dept_period).replace("{emp_full_name}",rs[i].emp_full_name).replace("{dept_name}",rs[i].dept_name).replace("{job_code}",rs[i].job_code).replace("{job_rank}",rs[i].job_rank).replace("{enter_date}",rs[i].enter_date).replace("{before_career_period}",rs[i].before_career_period).replace("{current_career_period}",rs[i].current_career_period).replace("{total_career_period}",rs[i].total_career_period).replace("{age}",rs[i].age).replace("{school}",rs[i].school).replace("{major}",rs[i].major).replace("{eval}",rs[i].eval).replace("{position_name}",rs[i].position_name).replace("{job_rank_period}",rs[i].job_rank_period).replace("{eval_grade_01}",rs[i].eval_grade_01).replace("{eval_grade_02}",rs[i].eval_grade_02).replace("{eval_grade_03}",rs[i].eval_grade_03).replace("{eval_grade_04}",rs[i].eval_grade_04);data+=box}$.htmlView1.setHTML(data);var height;if(rs.length%2>0){height=205*(Math.floor(rs.length/2)+1)}else{height=205*(rs.length/2)}$.htmlView1.setStyle("height",height+"px");personalInfoCssSettings();$.panList.setText($.panelTitleText+" ["+rs.length+"]건")}else{$.htmlView1.setHTML("");$.panList.setText($.panelTitleText+" [0]건")}}}else{if(type=="REPORT"){if(ds&&ds.resultList[0].length){var info=ds.resultList[0];var strRange="";if($.bte_dept_name.getText()){strRange="[부서]"+$.bte_dept_name.getText()+", "}if($.bte_emp_name.getText()){strRange+="[사원]"+$.bte_emp_name.getText()+", "}if($.cmb_position_code.getValue("code_name")){strRange+="[직위]"+$.cmb_position_code.getValue("code_name")+", "}if($.cmb_emp_state.getValue("code_name")){strRange+="[근무상태]"+$.cmb_emp_state.getValue("code_name")}if(!strRange){strRange="전체"}var title={site_name:$.cmb_site_code.getValue("site_name"),print_range:strRange};for(var i in info){info[i]["emp_photo"]=convertByteArrayToImageSource(info[i]["emp_photo"])}var params={report:"report_HRI1900",isPrint:$.bPrintMode,data:{Info:info,Title:title}};g_printBrowser.callPrint(params)}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){searchHRI1900("Q")}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){if(id=="bte_dept_name"){var param={dept_name:$.bte_dept_name.getText()};g_main.openPopup("popDept.html","popDept","",0,0,"","",param,"","")}else{if(id=="bte_emp_name"){var param={emp_name:$.bte_emp_name.getText(),searchAll:"Y"};g_main.openPopup("popEmp.html","popEmp","",0,0,"","",param,"","")}}};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){if(id=="bte_dept_name"){if(value=="8"){$.txt_dept_code.setValue("")}}else{if(id=="bte_emp_name"){if(value=="8"){$.txt_emp_code.setValue("")}}}};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerimage_click=function(id){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panList"){if(btnId=="btnPrint"){if(!$.htmlView1.getHTML()){return}searchHRI1900("REPORT")}}};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(id=="popDept"){if(popResult){$.txt_dept_code.setValue(popResult.dept_code);$.bte_dept_name.setText(popResult.dept_name)}}else{if(id=="popEmp"){if(popResult){$.txt_emp_code.setValue(popResult.employee_id);$.bte_emp_name.setText(popResult.emp_name)}}}};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){}};</script>