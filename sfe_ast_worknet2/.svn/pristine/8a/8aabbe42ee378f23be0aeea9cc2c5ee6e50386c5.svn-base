<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panTop=null;$.tabMain=null;$.panPayResult=null;$.grdPayResult=null;$.panPayResultDetail=null;$.grdPayResultDetail=null;$.panPayCalculation=null;$.grdPayCalculation=null;$.btnPayUpload=null;$.lblFromDate=null;$.dteFromDate=null;$.lblEx1=null;$.dteToDate=null;$.lblDept=null;$.txtDeptCode=null;$.bteDeptName=null;$.lblEmp=null;$.txtEmpCode=null;$.bteEmpName=null;$.btnSearch=null;$.lblPayCalculateType=null;$.cmbPayCalculateType=null;$.lblPayType=null;$.cmbPayType=null;$.btnSave=null;$.deleteRowsResult=[];$.deleteRowsDetail=[];$.deleteRowsCalc=[];$.isNoSaveCnt=0;$.session=g_main.session.obj;function createJson_Q(workType){var json=createExecuteParamInfo("HR..P_hrpPayUpload_Q",[workType,$.dteFromDate.getValue(),$.dteToDate.getValue(),$.txtDeptCode.getValue()||"",$.txtEmpCode.getValue()||"",$.cmbPayCalculateType.getValue()||"",$.cmbPayType.getValue()||""]);return json}function createJson_S(workType){var rows=[];var json="";var gRow=$.grdPayResult.getChangedRows();if($.deleteRowsResult.length>0){for(var i in $.deleteRowsResult){gRow.push($.deleteRowsResult[i])}}if(gRow.length<1){$.isNoSaveCnt++;return false}for(var i in gRow){workType=gRow[i].rowType;rows.push([workType,gRow[i].site_code,unmask(gRow[i].pay_yyyymm).substr(0,6),gRow[i].pay_calculate_type,gRow[i].pay_type,gRow[i].emp_code,gRow[i].dept_code,gRow[i].duty_code,gRow[i].position_code,gRow[i].tax_site_code,gRow[i].pay_group_code,gRow[i].tax_calculate_type,Number(gRow[i].tax_rate),gRow[i].bonus_calculate_type,unmask(gRow[i].bonus_apply_yyyymm_fr).substr(0,6),unmask(gRow[i].bonus_apply_yyyymm_to).substr(0,6),Number(gRow[i].bonus_rate),Number(gRow[i].bonus_amt),Number(gRow[i].pay_amt),Number(gRow[i].pay_total_amt),Number(gRow[i].tax_free_amt),Number(gRow[i].pay_deduction_amt),Number(gRow[i].pay_net_amt),"#UserID#","#HostInfo#"])}json=createExecuteParamInfo("HR..P_hrpPayResult_S",rows);return json}function createJson_S1(workType){var rows=[];var json="";var gRow=$.grdPayResultDetail.getChangedRows();if($.deleteRowsDetail.length>0){for(var i in $.deleteRowsDetail){gRow.push($.deleteRowsDetail[i])}}if(gRow.length<1){$.isNoSaveCnt++;return false}for(var i in gRow){workType=gRow[i].rowType;rows.push([workType,gRow[i].site_code,unmask(gRow[i].pay_yyyymm).substr(0,6),gRow[i].pay_calculate_type,gRow[i].pay_type,gRow[i].emp_code,gRow[i].pay_item_code,Number(gRow[i].pay_amt),Number(gRow[i].tax_free_amt)])}json=createExecuteParamInfo("HR..P_hrpPayResultDetail_S",rows);return json}function createJson_S2(workType){var rows=[];var json="";var gRow=$.grdPayCalculation.getChangedRows();if($.deleteRowsCalc.length>0){for(var i in $.deleteRowsCalc){gRow.push($.deleteRowsCalc[i])}}if(gRow.length<1){return false}for(var i in gRow){workType=gRow[i].rowType;rows.push([workType,gRow[i].site_code,unmask(gRow[i].pay_yyyymm).substr(0,6),gRow[i].pay_calculate_type,gRow[i].pay_type,unmask(gRow[i].pay_date).substr(0,8),gRow[i].tax_calculate_type,Number(gRow[i].tax_rate),gRow[i].bonus_calculate_type,Number(gRow[i].bonus_rate),unmask(gRow[i].bonus_apply_yyyymm_fr).substr(0,6),unmask(gRow[i].bonus_apply_yyyymm_to).substr(0,6),gRow[i].fi_org_code,unmask(gRow[i].entry_date).substr(0,8),Number(gRow[i].entry_num),gRow[i].pay_close_yn,gRow[i].pay_close_memo,"#UserID#","#HostInfo#"])}json=createExecuteParamInfo("HR..P_hrpPayCalculation_S",rows);return json}function searchHrpPayUpload(workType){if(!$.panTop.validateControls()){return}var json=createJson_Q(workType);callQuery(["req",json],workType,$)}function saveHrpPayResult(workType){var json=createJson_S(workType);if(json){callExecute(["req",json],"RESULT",$)}else{saveHrpPayDetail("")}}function saveHrpPayDetail(workType){var json=createJson_S1(workType);if(json){callExecute(["req",json],"DETAIL",$)}else{saveHrpPayCalculation("")}}function saveHrpPayCalculation(workType){var json=createJson_S2(workType);if(json){callExecute(["req",json],"CALC",$)}else{if($.isNoSaveCnt>1){MessageBoxShow("저장할 내용이 없습니다.");$.isNoSaveCnt=0}else{MessageBoxShow("정상적으로 저장되었습니다.");searchHrpPayUpload("Q")}}}function gridValidator(gridId,columnArr){if(!gridId){return}for(var i=0;i<gridId.getRowCount();i++){for(var j=0;j<columnArr.length;j++){if(gridId.getValue(i,columnArr[j])===0){continue}if(gridId.getValue(i,columnArr[j])==""||gridId.getValue(i,columnArr[j])==null){MessageBoxShow(gridId.getColumnText(columnArr[j])+" 은(는) 필수 입력항목입니다");gridId.selectRow(i);return false}}}return true}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1190,850);$.panMain.setText("");$.panMain.setBottomLine(true);$.panTop=new FingerPanel(host,"panTop",0,0,1200,85);$.panTop.setText("");$.panTop.setBottomLine(true);$.tabMain=new FingerTab(host,"tabMain",0,95,1200,750);$.panPayResult=new FingerPanel(host,"panPayResult",0,0,1200,700);$.panPayResult.setText("Pay Master");$.panPayResult.setBottomLine(true);$.grdPayResult=new FingerDataGrid(host,"grdPayResult",0,0,1200,655);$.panPayResultDetail=new FingerPanel(host,"panPayResultDetail",0,0,1200,700);$.panPayResultDetail.setText("Pay Detail");$.panPayResultDetail.setBottomLine(true);$.grdPayResultDetail=new FingerDataGrid(host,"grdPayResultDetail",0,0,1200,655);$.panPayCalculation=new FingerPanel(host,"panPayCalculation",0,0,1200,700);$.panPayCalculation.setText("Pay Calculation");$.panPayCalculation.setBottomLine(true);$.grdPayCalculation=new FingerDataGrid(host,"grdPayCalculation",0,0,1200,655);$.btnPayUpload=new FingerButton(host,"btnPayUpload",1015,45,120,20);$.btnPayUpload.setText("급여 업로드");$.lblFromDate=new FingerLabel(host,"lblFromDate",0,15,100,20);$.lblFromDate.setText("년월");$.dteFromDate=new FingerDateEdit(host,"dteFromDate",105,15,110,20);$.lblEx1=new FingerLabel(host,"lblEx1",215,15,20,20);$.lblEx1.setText("~");$.dteToDate=new FingerDateEdit(host,"dteToDate",240,15,110,20);$.lblDept=new FingerLabel(host,"lblDept",355,15,100,20);$.lblDept.setText("부서");$.txtDeptCode=new FingerEdit(host,"txtDeptCode",460,15,85,20);$.bteDeptName=new FingerButtonEdit(host,"bteDeptName",550,15,140,20);$.bteDeptName.setText("");$.lblEmp=new FingerLabel(host,"lblEmp",665,15,100,20);$.lblEmp.setText("사원");$.txtEmpCode=new FingerEdit(host,"txtEmpCode",770,15,85,20);$.bteEmpName=new FingerButtonEdit(host,"bteEmpName",860,15,140,20);$.bteEmpName.setText("");$.btnSearch=new FingerButton(host,"btnSearch",1120,45,80,20);$.btnSearch.setText("조회");$.lblPayCalculateType=new FingerLabel(host,"lblPayCalculateType",0,45,100,20);$.lblPayCalculateType.setText("지급구분");$.cmbPayCalculateType=new FingerComboBox(host,"cmbPayCalculateType",105,45,115,20);$.lblPayType=new FingerLabel(host,"lblPayType",355,45,100,20);$.lblPayType.setText("지급방법");$.cmbPayType=new FingerComboBox(host,"cmbPayType",460,45,140,20);$.btnSave=new FingerButton(host,"btnSave",1125,90,90,30);$.btnSave.setText("저장");$.panTop.setBorder(true);$.tabMain.addTab([{text:"Pay Master",body:$.panPayResult,width:150},{text:"Pay Detail",body:$.panPayResultDetail,width:150},{text:"Pay Calculation",body:$.panPayCalculation,width:150}]);$.panPayResult.addButtons(["btnDelete","btnAdd"]);$.panPayResultDetail.addButtons(["btnDelete","btnAdd"]);$.panPayCalculation.addButtons(["btnDelete","btnAdd"]);$.btnSave.setClass("btn_save");$.dteFromDate.setDateFormat("yyyymm");$.dteToDate.setDateFormat("yyyymm");$.cmbPayCalculateType.setEmptyRow(true);$.cmbPayType.setEmptyRow(true);$.grdPayResult.setColumns([new FingerDataGridColumn("site_code",80,"right","string","사업장",{hidden:true}),new FingerDataGridColumn("pay_yyyymm",80,"right","date",[{text:"년월",css:"col_chk"}],{format:"ym"}),new FingerDataGridColumn("pay_calculate_type",80,"right","string",[{text:"지급구분",css:"col_chk"}]),new FingerDataGridColumn("pay_type",80,"right","string",[{text:"지급방법",css:"col_chk"}]),new FingerDataGridColumn("tax_site_code",80,"right","string","신고사업장",{hidden:true}),new FingerDataGridColumn("pay_group_code",100,"right","string","지급상세"),new FingerDataGridColumn("emp_code",80,"right","string",[{text:"사번",css:"col_chk"}],{readonly:true}),new FingerDataGridColumn("emp_name",100,"right","string","사원",{readonly:true}),new FingerDataGridColumn("dept_code",80,"right","string","부서코드",{readonly:true}),new FingerDataGridColumn("dept_name",120,"right","string","부서명",{readonly:true}),new FingerDataGridColumn("position_code",80,"right","string","직위",{readonly:true}),new FingerDataGridColumn("duty_code",80,"right","string","직책",{readonly:true}),new FingerDataGridColumn("tax_calculate_type",120,"right","string","소득세계산방법"),new FingerDataGridColumn("tax_rate",80,"left","int","세율",{format:"int"}),new FingerDataGridColumn("bonus_calculate_type",120,"right","string","상여계산방법"),new FingerDataGridColumn("bonus_apply_yyyymm_fr",120,"right","date","상여적용시작일",{format:"ym"}),new FingerDataGridColumn("bonus_apply_yyyymm_to",120,"right","date","상여적용종료일",{format:"ym"}),new FingerDataGridColumn("bonus_rate",100,"left","int","적용비율(%)",{format:"only_percent"}),new FingerDataGridColumn("bonus_amt",80,"left","int","상여금액",{format:"int"}),new FingerDataGridColumn("pay_amt",80,"left","int","급여액",{format:"int"}),new FingerDataGridColumn("pay_total_amt",80,"left","int","급여총액",{format:"int"}),new FingerDataGridColumn("tax_free_amt",80,"left","int","비과세액",{format:"int"}),new FingerDataGridColumn("pay_deduction_amt",80,"left","int","공제총액",{format:"int"}),new FingerDataGridColumn("pay_net_amt",80,"left","int","실지급액",{format:"int"})]);$.grdPayResult.init({panel:$.panPayResult,scroll:"xy",nonExcel:true});$.grdPayResult.setBorder(false);$.grdPayResult.setEditable(true);$.grdPayResultDetail.setColumns([new FingerDataGridColumn("site_code",80,"right","string","사업장",{hidden:true}),new FingerDataGridColumn("pay_yyyymm",120,"right","date",[{text:"년월",css:"col_chk"}],{format:"ym"}),new FingerDataGridColumn("pay_calculate_type",120,"right","string",[{text:"지급구분",css:"col_chk"}]),new FingerDataGridColumn("pay_type",120,"right","string",[{text:"지급방법",css:"col_chk"}]),new FingerDataGridColumn("emp_code",120,"right","string",[{text:"사번",css:"col_chk"}],{readonly:true}),new FingerDataGridColumn("emp_name",120,"right","string","사원",{readonly:true}),new FingerDataGridColumn("pay_item_code",200,"right","string",[{text:"급여 항목",css:"col_chk"}]),new FingerDataGridColumn("pay_amt",150,"left","int","급여액",{format:"int"}),new FingerDataGridColumn("tax_free_amt",150,"left","int","비과세액",{format:"int"})]);$.grdPayResultDetail.init({panel:$.panPayResultDetail,scroll:"xy",nonExcel:true});$.grdPayResultDetail.setBorder(false);$.grdPayResultDetail.setEditable(true);$.grdPayCalculation.setColumns([new FingerDataGridColumn("site_code",80,"right","string","사업장",{hidden:true}),new FingerDataGridColumn("pay_yyyymm",80,"right","date",[{text:"년월",css:"col_chk"}],{format:"ym"}),new FingerDataGridColumn("pay_calculate_type",80,"right","string",[{text:"지급구분",css:"col_chk"}]),new FingerDataGridColumn("pay_type",80,"right","string",[{text:"지급방법",css:"col_chk"}]),new FingerDataGridColumn("pay_date",80,"right","date","환급일자",{format:"ymd"}),new FingerDataGridColumn("tax_calculate_type",120,"right","string","소득세계산방법"),new FingerDataGridColumn("tax_rate",80,"left","int","세율",{format:"int"}),new FingerDataGridColumn("bonus_calculate_type",120,"right","string","상여계산방법"),new FingerDataGridColumn("bonus_rate",100,"left","int","적용비율(%)",{format:"only_percent"}),new FingerDataGridColumn("bonus_apply_yyyymm_fr",120,"right","date","상여적용시작일",{format:"ym"}),new FingerDataGridColumn("bonus_apply_yyyymm_to",120,"right","date","상여적용종료일",{format:"ym"}),new FingerDataGridColumn("fi_org_code",80,"right","string","fi_org_code"),new FingerDataGridColumn("entry_date",80,"right","date","entry_date",{format:"ymd"}),new FingerDataGridColumn("entry_num",80,"left","int","entry_num",{format:"int"}),new FingerDataGridColumn("pay_close_yn",80,"right","string","pay_close_yn"),new FingerDataGridColumn("pay_close_memo",80,"right","string","pay_close_memo")]);$.grdPayCalculation.init({panel:$.panPayCalculation,scroll:"xy",nonExcel:true});$.grdPayCalculation.setBorder(false);$.grdPayCalculation.setEditable(true);$.host=host;$.args=args};$.start=function(){$.panMain.add($.panTop);$.panMain.add($.tabMain);$.panMain.add($.btnSave);$.panTop.add($.btnPayUpload);$.panTop.add($.lblFromDate);$.panTop.add($.dteFromDate);$.panTop.add($.lblEx1);$.panTop.add($.dteToDate);$.panTop.add($.lblDept);$.panTop.add($.txtDeptCode);$.panTop.add($.bteDeptName);$.panTop.add($.lblEmp);$.panTop.add($.txtEmpCode);$.panTop.add($.bteEmpName);$.panTop.add($.btnSearch);$.panTop.add($.lblPayCalculateType);$.panTop.add($.cmbPayCalculateType);$.panTop.add($.lblPayType);$.panTop.add($.cmbPayType);$.panPayResult.add($.grdPayResult);$.panPayResultDetail.add($.grdPayResultDetail);$.panPayCalculation.add($.grdPayCalculation);$.dteFromDate.setValue(getCalcMonth(getToday(),-3));$.dteToDate.setValue(getToday());var ds=bizComponentData2($,"Q1","L_ORG001|L_CRM0010|L_CRM0011|L_HRP006|L_HRB008|L_HR0058|L_ORG003|L_HRI010|L_HRP007|L_HRP004");setComboBind([null,null,null,null,$.cmbPayType,],ds);$.grdPayResult.setColumnDropDownList("site_code",ds.resultList[0],{key:"site_code",name:"site_name"});$.grdPayResultDetail.setColumnDropDownList("site_code",ds.resultList[0],{key:"site_code",name:"site_name"});$.grdPayCalculation.setColumnDropDownList("site_code",ds.resultList[0],{key:"site_code",name:"site_name"});$.grdPayResult.setColumnDropDownList("duty_code",ds.resultList[1]);$.grdPayResult.setColumnDropDownList("position_code",ds.resultList[2]);$.grdPayResult.setColumnDropDownList("tax_calculate_type",ds.resultList[3]);$.grdPayCalculation.setColumnDropDownList("tax_calculate_type",ds.resultList[3]);$.grdPayResult.setColumnDropDownList("pay_type",ds.resultList[4]);$.grdPayResultDetail.setColumnDropDownList("pay_type",ds.resultList[4]);$.grdPayCalculation.setColumnDropDownList("pay_type",ds.resultList[4]);$.grdPayResult.setColumnDropDownList("tax_site_code",ds.resultList[5],{key:"tax_site_code",name:"tax_site_name"});$.grdPayResult.setColumnDropDownList("pay_group_code",ds.resultList[6],{key:"pay_group_code",name:"pay_group_name"});$.grdPayResult.setColumnDropDownList("bonus_calculate_type",ds.resultList[7]);$.grdPayCalculation.setColumnDropDownList("bonus_calculate_type",ds.resultList[7]);$.grdPayResultDetail.setColumnDropDownList("pay_item_code",ds.resultList[8],{key:"pay_item_code",name:"pay_item_name"});ds=bizComponentData2($,"Q2","L_HR0058");setComboBind([$.cmbPayCalculateType],ds);$.grdPayResult.setColumnDropDownList("pay_calculate_type",ds.resultList[0]);$.grdPayResultDetail.setColumnDropDownList("pay_calculate_type",ds.resultList[0]);$.grdPayCalculation.setColumnDropDownList("pay_calculate_type",ds.resultList[0])};$.callback=function(type,ds){if(type=="Q"){$.deleteRowsResult=[];$.deleteRowsDetail=[];$.deleteRowsCalc=[];$.isNoSaveCnt=0;setDataGrid([$.grdPayResult],ds.resultList[0],true);setDataGrid([$.grdPayResultDetail],ds.resultList[1],true);setDataGrid([$.grdPayCalculation],ds.resultList[2],true)}else{if(type=="RESULT"){if(ds){log(ds);if(ds.errorCode=="ERR1001"){MessageBoxShow(ds.returnStr)}else{saveHrpPayDetail("")}}}else{if(type=="DETAIL"){if(ds){log(ds);if(ds.errorCode=="ERR1001"){MessageBoxShow(ds.returnStr)}else{saveHrpPayCalculation("")}}}else{if(type=="CALC"){if(ds){log(ds);if(ds.errorCode=="ERR1001"){MessageBoxShow(ds.returnStr)}else{MessageBoxShow("정상적으로 저장되었습니다.")}searchHrpPayUpload("Q")}}}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnPayUpload"){OpenExcelUploader(function(ds){hideToast();if(!ds){MessageBoxShow("엑셀 업로드가 실패 하였습니다.");return}var rt=ds.resultList[0][0];if(rt.file_id=="1001"){MessageBoxShow(rt.local_fname+"<br>문서가 정상적으로 업로드 되었습니다.");searchHrpPayUpload("Q")}if(rt.file_id=="9999"){MessageBoxShow(rt.local_fname+"<br>문서 업로드 과정에서 문제가 발생하였습니다.")}})}else{if(id=="btnSearch"){searchHrpPayUpload("Q")}else{if(id=="btnSave"){$.grdPayResult.editStop();$.grdPayResultDetail.editStop();$.grdPayCalculation.editStop();if(!gridValidator($.grdPayResult,["pay_yyyymm","pay_type","emp_code","tax_rate","bonus_rate","bonus_amt","pay_amt","pay_total_amt","tax_free_amt","pay_deduction_amt","pay_net_amt"])){$.tabMain.setActiveTab(0);return}if(!gridValidator($.grdPayResultDetail,["pay_yyyymm","pay_calculate_type","pay_type","emp_code"])){$.tabMain.setActiveTab(1);return}if(!gridValidator($.grdPayCalculation,["pay_yyyymm","pay_type","pay_calculate_type"])){$.tabMain.setActiveTab(2);return}confirmBoxShow("저장 하시겠습니까?",function(){if(g_main.msgShare==true){saveHrpPayResult("")}})}}}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){$.popUpCallId=id;if(id=="bteDeptName"){var param={dept_name:$.bteDeptName.getText()||"",};g_main.openPopup("popDept.html","popDept","",0,0,"","",param,"","")}else{if(id=="bteEmpName"){var param={emp_name:$.bteEmpName.getText()||"",searchAll:"N"};g_main.openPopup("popEmp.html","popEmp","",0,0,"","",param,"","")}}};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){if(id=="grdPayResult"){if(cInd=="emp_code"){$.popUpCallId=id;$.varMasterRowId=rId;if($.grdPayResult.getItem(rId).rowType){var param={emp_name:"",};g_main.openPopup("popEmp.html","popEmp","",0,0,"","",param,"","")}}}else{if(id=="grdPayResultDetail"){if(cInd=="emp_code"){$.popUpCallId=id;$.varDetailRowId=rId;if($.grdPayResultDetail.getItem(rId).rowType){var param={emp_name:"",};g_main.openPopup("popEmp.html","popEmp","",0,0,"","",param,"","")}}}}};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdPayResult"){var rt=$.grdPayResult.getValue(rId);if($.grdPayResult.getItem(rId).rowType){rt.pay_yyyymm_readonly=false;rt.pay_calculate_type_readonly=false;rt.pay_type_readonly=false}else{rt.pay_yyyymm_readonly=true;rt.pay_calculate_type_readonly=true;rt.pay_type_readonly=true}}else{if(id=="grdPayResultDetail"){var rt=$.grdPayResultDetail.getValue(rId);if($.grdPayResultDetail.getItem(rId).rowType){rt.pay_yyyymm_readonly=false;rt.pay_calculate_type_readonly=false;rt.pay_type_readonly=false;rt.pay_item_code_readonly=false}else{rt.pay_yyyymm_readonly=true;rt.pay_calculate_type_readonly=true;rt.pay_type_readonly=true;rt.pay_item_code_readonly=true}}else{if(id=="grdPayCalculation"){var rt=$.grdPayCalculation.getValue(rId);if($.grdPayCalculation.getItem(rId).rowType){rt.pay_yyyymm_readonly=false;rt.pay_calculate_type_readonly=false;rt.pay_type_readonly=false}else{rt.pay_yyyymm_readonly=true;rt.pay_calculate_type_readonly=true;rt.pay_type_readonly=true}}}}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){if(id=="grdPayResult"){if(cInd=="pay_yyyymm"||cInd=="bonus_apply_yyyymm_fr"||cInd=="bonus_apply_yyyymm_to"){if(nValue){$.grdPayResult.setValue(rId,cInd,extFormat(getFormatDate(nValue,"yyyyMMdd"),"yyyyMM"))}}}else{if(id=="grdPayResultDetail"){if(cInd=="pay_yyyymm"){if(nValue){$.grdPayResultDetail.setValue(rId,cInd,extFormat(getFormatDate(nValue,"yyyyMMdd"),"yyyyMM"))}}}else{if(id=="grdPayCalculation"){if(cInd=="pay_yyyymm"||cInd=="bonus_apply_yyyymm_fr"||cInd=="bonus_apply_yyyymm_to"){if(nValue){$.grdPayCalculation.setValue(rId,cInd,extFormat(getFormatDate(nValue,"yyyyMMdd"),"yyyyMM"))}}if(cInd=="pay_date"||cInd=="entry_date"){if(nValue){$.grdPayCalculation.setValue(rId,cInd,extFormat(getFormatDate(nValue,"yyyyMMdd"),"yyyyMMdd"))}}}}}};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerimage_click=function(id){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panPayResult"){$.grdPayResult.editStop();if(btnId=="btnAdd"){$.grdPayResult.addRow({site_code:"1",pay_yyyymm:"",pay_calculate_type:"",pay_type:"",emp_code:"",tax_site_code:"1",pay_group_code:"",dept_code:"",dept_name:"",position_code:"",duty_code:"",tax_calculate_type:"",tax_rate:0,bonus_calculate_type:"",bonus_apply_yyyymm_fr:"",bonus_apply_yyyymm_to:"",bonus_rate:0,bonus_amt:0,pay_amt:0,pay_total_amt:0,tax_free_amt:0,pay_deduction_amt:0,pay_net_amt:0},$.grdPayResult.getRowCount())}else{if(btnId=="btnDelete"){var rId=$.grdPayResult.getSelectedRowIdx();if(!rId){MessageBoxShow("삭제할 목록을 선택해 주세요.");return}if($.grdPayResult.getRowStatus(rId)!="N"){if(!gridValidator($.grdPayResult,["pay_yyyymm","pay_type","emp_code","tax_rate","bonus_rate","bonus_amt","pay_amt","pay_total_amt","tax_free_amt","pay_deduction_amt","pay_net_amt"])){return}confirmBoxShow("삭제 하시겠습니까?",function(){if(g_main.msgShare==true){$.grdPayResult.getItem(rId).rowType="D";$.deleteRowsResult.push($.grdPayResult.getValue(rId));$.grdPayResult.deleteCurrentRow()}})}else{$.grdPayResult.deleteCurrentRow()}}else{if(btnId=="btnSave"){if(!gridValidator($.grdPayResult,["pay_yyyymm","pay_type","emp_code","tax_rate","bonus_rate","bonus_amt","pay_amt","pay_total_amt","tax_free_amt","pay_deduction_amt","pay_net_amt"])){return}confirmBoxShow("저장 하시겠습니까?",function(){if(g_main.msgShare==true){saveHrpPayResult("")}})}}}}else{if(panelId=="panPayResultDetail"){$.grdPayResultDetail.editStop();if(btnId=="btnAdd"){$.grdPayResultDetail.addRow({site_code:"1",pay_yyyymm:"",pay_calculate_type:"",pay_type:"",emp_code:"",pay_item_code:"",pay_amt:0,tax_free_amt:0},$.grdPayResultDetail.getRowCount())}else{if(btnId=="btnDelete"){var rId=$.grdPayResultDetail.getSelectedRowIdx();if(!rId){MessageBoxShow("삭제할 목록을 선택해 주세요.");return}if($.grdPayResultDetail.getRowStatus(rId)!="N"){if(!gridValidator($.grdPayResultDetail,["pay_yyyymm","pay_calculate_type","pay_type","emp_code"])){return}confirmBoxShow("삭제 하시겠습니까?",function(){if(g_main.msgShare==true){$.grdPayResultDetail.getItem(rId).rowType="D";$.deleteRowsDetail.push($.grdPayResultDetail.getValue(rId));$.grdPayResultDetail.deleteCurrentRow()}})}else{$.grdPayResultDetail.deleteCurrentRow()}}else{if(btnId=="btnSave"){if(!gridValidator($.grdPayResultDetail,["pay_yyyymm","pay_calculate_type","pay_type","emp_code"])){return}confirmBoxShow("저장 하시겠습니까?",function(){if(g_main.msgShare==true){saveHrpPayDetail("")}})}}}}else{if(panelId=="panPayCalculation"){$.grdPayCalculation.editStop();if(btnId=="btnAdd"){$.grdPayCalculation.addRow({site_code:"1",pay_yyyymm:"",pay_calculate_type:"",pay_type:"",pay_date:"",tax_calculate_type:"",tax_rate:0,bonus_calculate_type:"",bonus_rate:0,bonus_apply_yyyymm_fr:"",bonus_apply_yyyymm_to:"",fi_org_code:"",entry_date:"",entry_num:"",pay_close_yn:"N",pay_close_memo:""},$.grdPayCalculation.getRowCount())}else{if(btnId=="btnDelete"){var rId=$.grdPayCalculation.getSelectedRowIdx();if(!rId){MessageBoxShow("삭제할 목록을 선택해 주세요.");return}if($.grdPayCalculation.getRowStatus(rId)!="N"){if(!gridValidator($.grdPayCalculation,["pay_yyyymm","pay_type","pay_calculate_type"])){return}confirmBoxShow("삭제 하시겠습니까?",function(){if(g_main.msgShare==true){$.grdPayCalculation.getItem(rId).rowType="D";$.deleteRowsCalc.push($.grdPayCalculation.getValue(rId));$.grdPayCalculation.deleteCurrentRow()}})}else{$.grdPayCalculation.deleteCurrentRow()}}else{if(btnId=="btnSave"){if(!gridValidator($.grdPayCalculation,["pay_yyyymm","pay_type","pay_calculate_type"])){return}confirmBoxShow("저장 하시겠습니까?",function(){if(g_main.msgShare==true){saveHrpPayCalculation("")}})}}}}}}};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(popResult){if(id=="popDept"){if($.popUpCallId=="bteDeptName"){$.bteDeptName.setText(popResult.dept_name);$.txtDeptCode.setValue(popResult.dept_code)}}else{if(id=="popEmp"){if($.popUpCallId=="bteEmpName"){$.bteEmpName.setText(popResult.emp_name);$.txtEmpCode.setValue(popResult.employee_id)}else{if($.popUpCallId=="grdPayResult"){if(popResult.employee_id){var json=createExecuteParamInfo("HR..P_hrpPayUpload_Q",["Q_EMP","","","",popResult.employee_id]);var ds=callQuerySync(["req",json],$);$.grdPayResult.setValue($.varMasterRowId,"emp_code",popResult.employee_id);$.grdPayResult.setValue($.varMasterRowId,"emp_name",popResult.emp_name);$.grdPayResult.setValue($.varMasterRowId,"dept_code",popResult.dept_code);$.grdPayResult.setValue($.varMasterRowId,"dept_name",popResult.dept_name);$.grdPayResult.setValue($.varMasterRowId,"position_code",ds.resultList[0][0].position_code);$.grdPayResult.setValue($.varMasterRowId,"duty_code",ds.resultList[0][0].duty_code)}}else{if($.popUpCallId=="grdPayResultDetail"){if(popResult.employee_id){$.grdPayResultDetail.setValue($.varDetailRowId,"emp_code",popResult.employee_id);$.grdPayResultDetail.setValue($.varDetailRowId,"emp_name",popResult.emp_name)}}}}}}}};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){}};</script>