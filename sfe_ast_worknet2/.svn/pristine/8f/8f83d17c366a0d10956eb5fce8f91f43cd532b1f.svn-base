<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panTop=null;$.lblStatusD=null;$.lblLotNoD=null;$.lblInstockDateD=null;$.lblInstockAmtD=null;$.lblProductD=null;$.lblManufacturerD=null;$.lblPackUnitD=null;$.lblQCAmtD=null;$.lblValidMonthD=null;$.lblKeepAmtD=null;$.lblUseExpireDateD=null;$.lblProduceYearD=null;$.txtLotNoD=null;$.dteInstockDateD=null;$.bteProductD=null;$.txtManufacturerD=null;$.txtPackUnitD=null;$.dteUseExpireD=null;$.dteProduceD=null;$.txtStatusD=null;$.speInstockAmtD=null;$.speQCAmtD=null;$.speValidMonthD=null;$.speKeepAmtD=null;$.panBottom=null;$.btnSave=null;$.btnCancel=null;$.lblRequestDateR=null;$.lblPurposeR=null;$.lblQCRequestAmtR=null;$.lblKeepRequestAmtR=null;$.lblTackPlaceR=null;$.lblTackTypeR=null;$.dteRequestDateR=null;$.cmbPurposeR=null;$.speQCRequestAmtR=null;$.speKeepRequestAmtR=null;$.cmbTakePlaceR=null;$.cmbTakeTypeR=null;$.txtTakeTypeR=null;$.txtPurposeR=null;$.txtTakePlaceR=null;$.varQaId="";$.varSeq="";function createJSON_Q(workType){var json=createExecuteParamInfo("P_QA3000_Q2",[workType,$.varQaId]);return json}function createJSON_Q2(workType){var json=createExecuteParamInfo("P_QA3000_Q3",[workType,$.varQaId,$.varSeq]);return json}function createJSON_S(workType){var json=createExecuteParamInfo("P_QAP3000_S",[workType,$.dteRequestDateR.getValue(),$.cmbPurposeR.getValue(),$.cmbPurposeR.getValue()=="99"?$.txtPurposeR.getValue():$.cmbPurposeR.getText(),$.speQCRequestAmtR.getValue(),$.speKeepRequestAmtR.getValue(),$.cmbTakePlaceR.getValue(),$.cmbTakePlaceR.getValue()=="99"?$.txtTakePlaceR.getValue():$.cmbTakePlaceR.getText(),$.cmbTakeTypeR.getValue(),$.cmbTakeTypeR.getValue()=="99"?$.txtTakeTypeR.getValue():$.cmbTakeTypeR.getText(),$.varQaId||"","#UserID#",$.varSeq||""]);return json}function searchDetail(){if($.varQaId==""){return}var json=createJSON_Q("Q");callQuery(["req",json],"Q_D",$)}function searchRequest(){if($.varQaId==""||$.varSeq==""){return}var json=createJSON_Q2("Q");callQuery(["req",json],"Q_R",$)}function saveRequest(){var workType=$.varSeq==""?"N":"U";var json=createJSON_S(workType);var ds=callExecuteSync(["req",json],"S",false);var share={save_yn:"Y"};g_popupStack.setData(share);g_popupStack.close()}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,460,755);$.panMain.setText("");$.panMain.setBottomLine(true);$.panTop=new FingerPanel(host,"panTop",0,0,460,305);$.panTop.setText("제품 입고 정보");$.panTop.setBottomLine(true);$.lblStatusD=new FingerLabel(host,"lblStatusD",5,10,90,20);$.lblStatusD.setText("QA진행단계");$.lblLotNoD=new FingerLabel(host,"lblLotNoD",5,40,90,20);$.lblLotNoD.setText("Lot No");$.lblInstockDateD=new FingerLabel(host,"lblInstockDateD",5,70,90,20);$.lblInstockDateD.setText("입고일");$.lblInstockAmtD=new FingerLabel(host,"lblInstockAmtD",220,70,90,20);$.lblInstockAmtD.setText("입고수량");$.lblProductD=new FingerLabel(host,"lblProductD",5,100,90,20);$.lblProductD.setText("품목");$.lblManufacturerD=new FingerLabel(host,"lblManufacturerD",5,130,90,20);$.lblManufacturerD.setText("제조원");$.lblPackUnitD=new FingerLabel(host,"lblPackUnitD",5,160,90,20);$.lblPackUnitD.setText("포장단위");$.lblQCAmtD=new FingerLabel(host,"lblQCAmtD",220,160,90,20);$.lblQCAmtD.setText("QC용");$.lblValidMonthD=new FingerLabel(host,"lblValidMonthD",5,190,90,20);$.lblValidMonthD.setText("유효기간(월)");$.lblKeepAmtD=new FingerLabel(host,"lblKeepAmtD",220,190,90,20);$.lblKeepAmtD.setText("보관용");$.lblUseExpireDateD=new FingerLabel(host,"lblUseExpireDateD",5,220,90,20);$.lblUseExpireDateD.setText("사용기한");$.lblProduceYearD=new FingerLabel(host,"lblProduceYearD",220,220,90,20);$.lblProduceYearD.setText("제조일자");$.txtLotNoD=new FingerEdit(host,"txtLotNoD",100,40,340,20);$.dteInstockDateD=new FingerDateEdit(host,"dteInstockDateD",100,70,125,20);$.bteProductD=new FingerButtonEdit(host,"bteProductD",100,100,335,20);$.bteProductD.setText("");$.txtManufacturerD=new FingerEdit(host,"txtManufacturerD",100,130,340,20);$.txtPackUnitD=new FingerEdit(host,"txtPackUnitD",100,160,125,25);$.dteUseExpireD=new FingerDateEdit(host,"dteUseExpireD",100,220,125,20);$.dteProduceD=new FingerDateEdit(host,"dteProduceD",315,220,125,20);$.txtStatusD=new FingerEdit(host,"txtStatusD",100,10,340,20);$.speInstockAmtD=new FingerSpinEdit(host,"speInstockAmtD",315,70,125,25);$.speQCAmtD=new FingerSpinEdit(host,"speQCAmtD",315,160,125,25);$.speValidMonthD=new FingerSpinEdit(host,"speValidMonthD",100,190,125,25);$.speKeepAmtD=new FingerSpinEdit(host,"speKeepAmtD",315,190,125,25);$.panBottom=new FingerPanel(host,"panBottom",0,320,460,430);$.panBottom.setText("검체 채취 의뢰");$.panBottom.setBottomLine(true);$.btnSave=new FingerButton(host,"btnSave",305,340,80,20);$.btnSave.setText("저장");$.btnCancel=new FingerButton(host,"btnCancel",370,340,80,20);$.btnCancel.setText("취소");$.lblRequestDateR=new FingerLabel(host,"lblRequestDateR",5,15,120,20);$.lblRequestDateR.setText("채취의뢰일");$.lblPurposeR=new FingerLabel(host,"lblPurposeR",5,47,120,20);$.lblPurposeR.setText("채취목적");$.lblQCRequestAmtR=new FingerLabel(host,"lblQCRequestAmtR",5,110,120,20);$.lblQCRequestAmtR.setText("요청수량(QC용)");$.lblKeepRequestAmtR=new FingerLabel(host,"lblKeepRequestAmtR",5,142,120,20);$.lblKeepRequestAmtR.setText("요청수량(보관용)");$.lblTackPlaceR=new FingerLabel(host,"lblTackPlaceR",5,175,120,20);$.lblTackPlaceR.setText("채취장소");$.lblTackTypeR=new FingerLabel(host,"lblTackTypeR",5,240,120,20);$.lblTackTypeR.setText("채취방법");$.dteRequestDateR=new FingerDateEdit(host,"dteRequestDateR",130,15,310,20);$.cmbPurposeR=new FingerComboBox(host,"cmbPurposeR",130,47,310,20);$.speQCRequestAmtR=new FingerSpinEdit(host,"speQCRequestAmtR",130,110,310,25);$.speKeepRequestAmtR=new FingerSpinEdit(host,"speKeepRequestAmtR",130,142,310,25);$.cmbTakePlaceR=new FingerComboBox(host,"cmbTakePlaceR",130,175,310,20);$.cmbTakeTypeR=new FingerComboBox(host,"cmbTakeTypeR",130,241,310,20);$.txtTakeTypeR=new FingerEdit(host,"txtTakeTypeR",130,275,310,20);$.txtPurposeR=new FingerEdit(host,"txtPurposeR",130,80,310,25);$.txtTakePlaceR=new FingerEdit(host,"txtTakePlaceR",130,210,310,20);$.txtStatusD.setReadOnly(true);$.bteProductD.setEnable(false);$.txtLotNoD.setReadOnly(true);$.dteInstockDateD.setEnable(false);$.txtManufacturerD.setReadOnly(true);$.txtPackUnitD.setReadOnly(true);$.dteUseExpireD.setEnable(false);$.dteProduceD.setEnable(false);$.txtStatusD.setReadOnly(true);$.speQCAmtD.setReadOnly(true);$.speInstockAmtD.setReadOnly(true);$.speValidMonthD.setReadOnly(true);$.speKeepAmtD.setReadOnly(true);$.txtPurposeR.setReadOnly(true);$.txtTakeTypeR.setReadOnly(true);$.txtTakePlaceR.setReadOnly(true);$.cmbPurposeR.setEmptyRow(true);$.cmbTakePlaceR.setEmptyRow(true);$.cmbTakeTypeR.setEmptyRow(true);$.dteRequestDateR.setAllowBlank(false,"채취의뢰일");$.cmbPurposeR.setAllowBlank(false,"채취목적");$.speQCRequestAmtR.setAllowBlank(false,"요청수량QC용");$.speKeepRequestAmtR.setAllowBlank(false,"요청수량보관용");$.cmbTakePlaceR.setAllowBlank(false,"채취장소");$.cmbTakeTypeR.setAllowBlank(false,"채취방법");$.host=host;$.args=args};$.start=function(){$.panMain.add($.panTop);$.panMain.add($.panBottom);$.panTop.add($.lblLotNoD);$.panTop.add($.lblInstockDateD);$.panTop.add($.lblInstockAmtD);$.panTop.add($.lblProductD);$.panTop.add($.lblManufacturerD);$.panTop.add($.lblPackUnitD);$.panTop.add($.lblQCAmtD);$.panTop.add($.lblValidMonthD);$.panTop.add($.lblKeepAmtD);$.panTop.add($.lblUseExpireDateD);$.panTop.add($.lblProduceYearD);$.panTop.add($.txtLotNoD);$.panTop.add($.dteInstockDateD);$.panTop.add($.bteProductD);$.panTop.add($.txtManufacturerD);$.panTop.add($.txtPackUnitD);$.panTop.add($.dteUseExpireD);$.panTop.add($.dteProduceD);$.panTop.add($.lblStatusD);$.panTop.add($.txtStatusD);$.panTop.add($.speInstockAmtD);$.panTop.add($.speQCAmtD);$.panTop.add($.speValidMonthD);$.panTop.add($.speKeepAmtD);$.panBottom.add($.btnSave);$.panBottom.add($.btnCancel);$.panBottom.add($.lblRequestDateR);$.panBottom.add($.lblPurposeR);$.panBottom.add($.lblQCRequestAmtR);$.panBottom.add($.lblKeepRequestAmtR);$.panBottom.add($.lblTackPlaceR);$.panBottom.add($.lblTackTypeR);$.panBottom.add($.dteRequestDateR);$.panBottom.add($.cmbPurposeR);$.panBottom.add($.speQCRequestAmtR);$.panBottom.add($.speKeepRequestAmtR);$.panBottom.add($.cmbTakePlaceR);$.panBottom.add($.cmbTakeTypeR);$.panBottom.add($.txtTakeTypeR);$.panBottom.add($.txtPurposeR);$.panBottom.add($.txtTakePlaceR);var ds=bizComponentData2($,"Q1","L_ST0003|L_ST0004|L_ST0005");setComboBind([$.cmbPurposeR,$.cmbTakePlaceR,$.cmbTakeTypeR],ds);if($.p_argument&&$.p_argument.qa_id!=""){$.varQaId=$.p_argument.qa_id;$.varSeq=$.p_argument.request_seq}$.dteRequestDateR.setValue(getToday());$.cmbPurposeR.setValue("10");$.cmbTakePlaceR.setValue("10");$.cmbTakeTypeR.setValue("10");$.speQCRequestAmtR.setValue(0);$.speKeepRequestAmtR.setValue(0);searchDetail();searchRequest();relocateChildIndexInPanel([$.panBottom])};$.callback=function(type,ds){if(type=="Q_D"){var result=ds.resultList[0][0];$.txtStatusD.setText(result.status_name);$.txtLotNoD.setText(result.lot_no);$.dteInstockDateD.setValue(result.instock_date);$.speInstockAmtD.setValue(result.instock_amt);$.bteProductD.setText(result.product_name);$.txtManufacturerD.setValue(result.manufacturer);$.txtPackUnitD.setText(result.pack_unit);$.speQCAmtD.setText(result.qc_amt);$.speValidMonthD.setText(result.valid_month);$.speKeepAmtD.setText(result.keep_amt);$.dteUseExpireD.setValue(result.use_expire_date);$.dteProduceD.setValue(result.produce_year);if($.varSeq==""){$.dteRequestDateR.setValue(getToday());$.dteRequestDateR.setMinDate($.dteRequestDateR.getValue())}$.speQCRequestAmtR.setValue(result.qc_amt);$.speKeepRequestAmtR.setValue(result.keep_amt)}else{if(type=="Q_R"){var result=ds.resultList[0][0];$.dteRequestDateR.setValue(result.request_date);$.dteRequestDateR.setMinDate($.dteRequestDateR.getValue());$.cmbPurposeR.setValue(result.purpose);if(result.purpose=="99"){$.txtPurposeR.setValue(result.purpose_text);$.txtPurposeR.setReadOnly(false)}$.speQCRequestAmtR.setValue(result.qc_request_amt);$.speKeepRequestAmtR.setValue(result.keep_request_amt);$.cmbTakePlaceR.setValue(result.take_place);if(result.take_place=="99"){$.txtTakePlaceR.setValue(result.take_place_text);$.txtTakePlaceR.setReadOnly(false)}$.cmbTakeTypeR.setValue(result.take_type);if(result.take_type=="99"){$.txtTakeTypeR.setValue(result.take_place_text);$.txtTakeTypeR.setReadOnly(false)}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSave"){if(!validateControls([$.dteRequestDateR,$.cmbPurposeR,$.cmbTakePlaceR,$.cmbTakeTypeR])){return}if($.speQCRequestAmtR.getValue()==""){MessageBoxShow("요청수량(QC용) 은(는) 필수 입력 항목 입니다.");return}else{if($.speKeepRequestAmtR.getValue()==""){MessageBoxShow("요청수량(보관용) 은(는) 필수 입력 항목 입니다.");return}}var param=null;g_main.openPopup("popWFPassword.html","popWFPassword","",0,0,"","",param,"","")}else{if(id=="btnCancel"){g_popupStack.close()}}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){if(id=="cmbPurposeR"){if($.cmbPurposeR.getValue()=="99"){$.txtPurposeR.setReadOnly(false);$.txtPurposeR.setFocus()}else{$.txtPurposeR.setReadOnly(true);$.txtPurposeR.setValue("")}}else{if(id=="cmbTakeTypeR"){if($.cmbTakeTypeR.getValue()=="99"){$.txtTakeTypeR.setReadOnly(false);$.txtTakeTypeR.setFocus()}else{$.txtTakeTypeR.setReadOnly(true);$.txtTakeTypeR.setValue("")}}else{if(id=="cmbTakePlaceR"){if($.cmbTakePlaceR.getValue()=="99"){$.txtTakePlaceR.setReadOnly(false);$.txtTakePlaceR.setFocus()}else{$.txtTakePlaceR.setReadOnly(true);$.txtTakePlaceR.setValue("")}}}}};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(popResult){if(id=="popWFPassword"){if(popResult.result){saveRequest()}}}};$.fingerpopup2_close=function(id){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerradiobox_change=function(id,value){};$.fingerimage_click=function(id){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>