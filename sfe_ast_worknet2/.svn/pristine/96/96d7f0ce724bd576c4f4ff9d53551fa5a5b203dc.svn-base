<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panCodeList=null;$.panCodeInfo=null;$.panList=null;$.lblGroupCode=null;$.lblGroupName=null;$.lblGroupCategory=null;$.txtGroupCode=null;$.txtGroupName=null;$.cmbGroupCategory=null;$.grdCodeGroup=null;$.btnSearch=null;$.lblGroupCode1=null;$.lblGroupName1=null;$.lblCodeLength=null;$.lblGroupCategory1=null;$.lblFieldCaption1=null;$.lblFieldCaption2=null;$.lblFieldCaption3=null;$.lblDescr=null;$.lblUseYn=null;$.txtGroupCode1=null;$.txtGroupName1=null;$.txtCodeLength=null;$.cmbGroupCategory1=null;$.txtFieldCaption1=null;$.txtFieldCaption2=null;$.txtFieldCaption3=null;$.txtDescr=null;$.chkUseYn=null;$.grdCodeMaster=null;$.btnAddRow=null;$.btnDeleteRow=null;function createJSON_Q(workType){var json=createExecuteParamInfo("P_COM1000_Q",[workType,$.cmbGroupCategory.getValue(),workType=="Q"?$.txtGroupCode.getValue():$.grdCodeGroup.getValue($.rId,"group_code"),$.txtGroupName.getValue(),$.grdCodeGroup.getValue($.rId,"group_source")]);return json}function createJSON_S(workType){var json=createExecuteParamInfo("P_COM1000_S1",[workType,$.txtGroupCode1.getValue(),$.txtGroupName1.getValue(),$.txtCodeLength.getValue(),$.cmbGroupCategory1.getValue(),$.txtFieldCaption1.getValue(),$.txtFieldCaption2.getValue(),$.txtFieldCaption3.getValue(),$.txtDescr.getValue(),$.chkUseYn.getValue(),$.grdCodeGroup.getValue($.rId,"group_source")]);return json}function createJSON_S2(workType){var json="";if(workType==""){var changedRows=$.grdCodeMaster.getChangedRows();if(changedRows.length<1){return}var rows=[];for(var i in changedRows){workType=changedRows[i].rowType;if(changedRows[i].system_yn==true){changedRows[i].system_yn="Y"}if(changedRows[i].use_yn==true){changedRows[i].use_yn="Y"}rows.push([workType,$.txtGroupCode1.getValue(),changedRows[i].sub_code||"",changedRows[i].code_name||"",changedRows[i].system_yn||"",changedRows[i].extra_field1||"",changedRows[i].extra_field2||"",changedRows[i].extra_field3||"",changedRows[i].sort_seq||"",changedRows[i].use_yn||"",$.grdCodeGroup.getValue($.rId,"group_source")||""])}json=createExecuteParamInfo("P_COM1000_S2",rows)}else{json=createExecuteParamInfo("P_COM1000_S2",["D",$.txtGroupCode1.getValue(),$.grdCodeMaster.getValue($.grdCodeMaster.getSelectedRowIdx(),"sub_code"),$.grdCodeMaster.getValue($.grdCodeMaster.getSelectedRowIdx(),"code_name"),$.grdCodeMaster.getValue($.grdCodeMaster.getSelectedRowIdx(),"system_yn"),$.grdCodeMaster.getValue($.grdCodeMaster.getSelectedRowIdx(),"extra_field1"),$.grdCodeMaster.getValue($.grdCodeMaster.getSelectedRowIdx(),"extra_field2"),$.grdCodeMaster.getValue($.grdCodeMaster.getSelectedRowIdx(),"extra_field3"),$.grdCodeMaster.getValue($.grdCodeMaster.getSelectedRowIdx(),"sort_seq"),$.grdCodeMaster.getValue($.grdCodeMaster.getSelectedRowIdx(),"use_yn"),$.grdCodeGroup.getValue($.rId,"group_source")])}return json}function searchComCode(workType){if(workType=="Q"){var json=createJSON_Q("Q");callQuery(["req",json],"Q",$)}else{if(workType=="Q2"){var json=createJSON_Q("Q2");callQuery(["req",json],"Q2",$)}}}function saveComCode(workType){if(workType=="D"){var json=createJSON_S("D");callQuery(["req",json],"D",$)}else{if($.s_workType=="N"){var json=createJSON_S("N");callQuery(["req",json],"N",$)}else{if($.s_workType=="U"){var json=createJSON_S("U");callQuery(["req",json],"U",$)}}}}function saveCodeMaster(workType){if(workType=="D"){var json=createJSON_S2("D2");callQuery(["req",json],"D2",$)}else{var json=createJSON_S2("");callQuery(["req",json],"save",$)}}function initControls(){$.rId=0;$.panCodeList.clear()}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,760);$.panMain.setText("");$.panMain.setBottomLine();$.panCodeList=new FingerPanel(host,"panCodeList",0,0,300,755);$.panCodeList.setText("코드리스트");$.panCodeList.setBottomLine(true);$.panCodeInfo=new FingerPanel(host,"panCodeInfo",310,0,885,300);$.panCodeInfo.setText("코드그룹 정보");$.panCodeInfo.setBottomLine(true);$.panList=new FingerPanel(host,"panList",310,310,885,445);$.panList.setText("세부코드 정보");$.panList.setBottomLine(true);$.lblGroupCode=new FingerLabel(host,"lblGroupCode",0,10,100,20);$.lblGroupCode.setText("그룹코드");$.lblGroupName=new FingerLabel(host,"lblGroupName",0,40,100,20);$.lblGroupName.setText("코드그룹명");$.lblGroupCategory=new FingerLabel(host,"lblGroupCategory",0,70,100,20);$.lblGroupCategory.setText("유형분류");$.txtGroupCode=new FingerEdit(host,"txtGroupCode",110,10,140,20);$.txtGroupName=new FingerEdit(host,"txtGroupName",110,40,140,20);$.cmbGroupCategory=new FingerComboBox(host,"cmbGroupCategory",110,70,140,20);$.grdCodeGroup=new FingerDataGrid(host,"grdCodeGroup",0,110,295,595);$.btnSearch=new FingerButton(host,"btnSearch",220,-37.5,80,20);$.btnSearch.setText("조회");$.lblGroupCode1=new FingerLabel(host,"lblGroupCode1",0,10,100,20);$.lblGroupCode1.setText("그룹코드");$.lblGroupName1=new FingerLabel(host,"lblGroupName1",0,40,100,20);$.lblGroupName1.setText("코드그룹명");$.lblCodeLength=new FingerLabel(host,"lblCodeLength",0,70,100,20);$.lblCodeLength.setText("코드길이");$.lblGroupCategory1=new FingerLabel(host,"lblGroupCategory1",255,70,100,20);$.lblGroupCategory1.setText("유형분류");$.lblFieldCaption1=new FingerLabel(host,"lblFieldCaption1",0,100,100,20);$.lblFieldCaption1.setText("여유필드 캡션1");$.lblFieldCaption2=new FingerLabel(host,"lblFieldCaption2",0,130,100,20);$.lblFieldCaption2.setText("여유필드 캡션2");$.lblFieldCaption3=new FingerLabel(host,"lblFieldCaption3",0,160,100,20);$.lblFieldCaption3.setText("여유필드 캡션3");$.lblDescr=new FingerLabel(host,"lblDescr",0,190,100,20);$.lblDescr.setText("적요");$.lblUseYn=new FingerLabel(host,"lblUseYn",0,220,100,20);$.lblUseYn.setText("사용여부");$.txtGroupCode1=new FingerEdit(host,"txtGroupCode1",110,10,140,20);$.txtGroupName1=new FingerEdit(host,"txtGroupName1",110,40,390,20);$.txtCodeLength=new FingerSpinEdit(host,"txtCodeLength",110,70,140,25);$.cmbGroupCategory1=new FingerComboBox(host,"cmbGroupCategory1",360,70,140,20);$.txtFieldCaption1=new FingerEdit(host,"txtFieldCaption1",110,100,140,20);$.txtFieldCaption2=new FingerEdit(host,"txtFieldCaption2",110,130,140,20);$.txtFieldCaption3=new FingerEdit(host,"txtFieldCaption3",110,160,140,20);$.txtDescr=new FingerEdit(host,"txtDescr",110,190,390,20);$.chkUseYn=new FingerCheckBox(host,"chkUseYn",105,220,140,20);$.chkUseYn.setText("");$.grdCodeMaster=new FingerDataGrid(host,"grdCodeMaster",5,5,875,390);$.btnAddRow=new FingerButton(host,"btnAddRow",740,-40,80,20);$.btnAddRow.setText("행추가");$.btnDeleteRow=new FingerButton(host,"btnDeleteRow",805,-40,80,20);$.btnDeleteRow.setText("행삭제");$.cmbGroupCategory.setEmptyRow(true);$.grdCodeGroup.colIdx=$.grdCodeGroup.setColumns([new FingerDataGridColumn("group_code",90,"left","string","그룹코드"),new FingerDataGridColumn("group_name",180,"left","string","코드그룹명"),new FingerDataGridColumn("code_length",50,"left","int","코드길이"),new FingerDataGridColumn("group_category",70,"left","string","유형분류"),new FingerDataGridColumn("field_caption1",150,"left","string","여유필드 캡션1"),new FingerDataGridColumn("field_caption2",210,"left","string","여유필드 캡션2"),new FingerDataGridColumn("field_caption3",150,"left","string","여유필드 캡션3"),new FingerDataGridColumn("descr",80,"left","string","적    요"),new FingerDataGridColumn("use_yn",310,"left","bool","사용여부"),new FingerDataGridColumn("group_source",50,"left","string","그룹구분")]);$.grdCodeGroup.init();$.grdCodeGroup.setColumnHidden(["code_length","group_category","group_category","field_caption1","field_caption2","field_caption3","descr","use_yn","group_source"],true);$.grdCodeGroup.setBorder(false);$.grdCodeMaster.colIdx=$.grdCodeMaster.setColumns([new FingerDataGridColumn("sub_code",90,"left","string","세부코드"),new FingerDataGridColumn("code_name",150,"left","string","코 드 명"),new FingerDataGridColumn("system_yn",85,"center","checkbox","시스템코드"),new FingerDataGridColumn("extra_field1",120,"left","string","여유필드1"),new FingerDataGridColumn("extra_field2",120,"left","string","여유필드2"),new FingerDataGridColumn("extra_field3",120,"left","string","여유필드3"),new FingerDataGridColumn("sort_seq",90,"right","int","정렬순서"),new FingerDataGridColumn("use_yn",80,"center","checkbox","사용여부")]);$.grdCodeMaster.init();$.grdCodeMaster.setBorder(false);$.grdCodeMaster.setEditable(true);$.panCodeInfo.addButton("btnDelete","삭제");$.panCodeInfo.addButton("btnSave","저장");$.panCodeInfo.addButton("btnNew","신규");$.panCodeInfo.setButtonAction("btnNew","new");$.panCodeInfo.setButtonAction("btnSave","save");$.panCodeInfo.setButtonAction("btnDelete","delete");$.panList.addButton("btnDelete","삭제");$.panList.addButton("btnSave","저장");$.panList.addButton("btnNew","신규");$.panList.setButtonAction("btnNew","new");$.panList.setButtonAction("btnSave","save");$.panList.setButtonAction("btnDelete","delete");$.txtGroupCode1.setReadOnly(true);$.btnAddRow.setVisible(false);$.btnDeleteRow.setVisible(false);$.txtGroupCode1.setAllowBlank(false,"그룹코드");$.txtGroupName1.setAllowBlank(false,"코드그룹명");$.txtCodeLength.setAllowBlank(false,"코드길이");$.cmbGroupCategory1.setAllowBlank(false,"유형분류");$.host=host;$.args=args};$.start=function(){$.panMain.add($.panCodeList);$.panMain.add($.panCodeInfo);$.panMain.add($.panList);$.panCodeList.add($.lblGroupCode);$.panCodeList.add($.lblGroupName);$.panCodeList.add($.lblGroupCategory);$.panCodeList.add($.txtGroupCode);$.panCodeList.add($.txtGroupName);$.panCodeList.add($.cmbGroupCategory);$.panCodeList.add($.grdCodeGroup);$.panCodeList.add($.btnSearch);$.panCodeInfo.add($.lblCodeLength);$.panCodeInfo.add($.lblDescr);$.panCodeInfo.add($.lblFieldCaption1);$.panCodeInfo.add($.lblFieldCaption2);$.panCodeInfo.add($.lblFieldCaption3);$.panCodeInfo.add($.lblGroupCategory1);$.panCodeInfo.add($.lblGroupCode1);$.panCodeInfo.add($.lblGroupName1);$.panCodeInfo.add($.lblUseYn);$.panCodeInfo.add($.chkUseYn);$.panCodeInfo.add($.cmbGroupCategory1);$.panCodeInfo.add($.txtCodeLength);$.panCodeInfo.add($.txtDescr);$.panCodeInfo.add($.txtFieldCaption2);$.panCodeInfo.add($.txtFieldCaption3);$.panCodeInfo.add($.txtFieldCaption1);$.panCodeInfo.add($.txtGroupCode1);$.panCodeInfo.add($.txtGroupName1);$.panList.add($.btnAddRow);$.panList.add($.btnDeleteRow);$.panList.add($.grdCodeMaster);$.s_workType="";searchComCode("Q");var ds=bizComponentData2($,"Q1","L_COM013");setComboBind([$.cmbGroupCategory],ds);setComboBind([$.cmbGroupCategory1],ds)};$.callback=function(type,ds){if(type=="Q"){setDataGrid([$.grdCodeGroup],ds);if($.rId>-1){$.grdCodeGroup.selectRow($.rId)}else{$.grdCodeGroup.selectRow(0)}}else{if(type=="Q2"){setDataGrid([$.grdCodeMaster],ds);$.grdCodeMaster.selectRow(0)}else{if(type=="U"||type=="D"||type=="N"){if($.txtGroupCode.getValue()!=""||$.txtGroupName.getValue()!=""||$.cmbGroupCategory.getValue()!=""){initControls();searchComCode("Q")}else{searchComCode("Q")}}else{if(type=="D2"||type=="save"){searchComCode("Q2")}}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){searchComCode("Q")}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdCodeGroup"){$.rId=rId;console.log($.rId);console.log($.grdCodeGroup.getRowCount());if($.rId>-1&&$.grdCodeGroup.getRowCount()>0){console.log("123");$.s_workType="U";$.txtGroupCode1.setReadOnly(true);$.txtGroupCode1.setValue($.grdCodeGroup.getValue(rId,"group_code"));$.txtGroupName1.setValue($.grdCodeGroup.getValue(rId,"group_name"));$.txtCodeLength.setValue($.grdCodeGroup.getValue(rId,"code_length"));$.cmbGroupCategory1.setValue($.grdCodeGroup.getValue(rId,"group_category"));$.txtFieldCaption1.setValue($.grdCodeGroup.getValue(rId,"field_caption1"));$.txtFieldCaption2.setValue($.grdCodeGroup.getValue(rId,"field_caption2"));$.txtFieldCaption3.setValue($.grdCodeGroup.getValue(rId,"field_caption3"));$.txtDescr.setValue($.grdCodeGroup.getValue(rId,"descr"));$.chkUseYn.setValue($.grdCodeGroup.getValue(rId,"use_yn"));searchComCode("Q2")}else{$.txtGroupCode1.setReadOnly(true);$.txtGroupCode1.setValue("");$.txtGroupName1.setValue("");$.txtCodeLength.setValue("");$.cmbGroupCategory1.setValue("");$.txtFieldCaption1.setValue("");$.txtFieldCaption2.setValue("");$.txtFieldCaption3.setValue("");$.txtDescr.setValue("");$.chkUseYn.setValue("")}}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){if((id=="txtGroupCode")&&value=="13"){searchComCode("Q")}else{if((id=="txtGroupName")&&value=="13"){searchComCode("Q")}else{if((id=="cmbGroupCategory")&&value=="13"){searchComCode("Q")}}}};$.fingeredit_lostfocus=function(id,value){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panCodeInfo"){if(btnId=="btnNew"){$.s_workType="N";$.txtGroupCode1.setReadOnly(false);$.txtGroupCode1.setAllowBlank(false,"그룹코드");$.txtGroupCode1.setValue("");$.txtGroupName1.setValue("");$.txtCodeLength.setValue("");$.cmbGroupCategory1.setValue("");$.txtFieldCaption1.setValue("");$.txtFieldCaption2.setValue("");$.txtFieldCaption3.setValue("");$.txtDescr.setValue("");$.chkUseYn.setValue("");$.txtGroupCode1.setFocus()}else{if(btnId=="btnSave"){if($.txtGroupCode1.getValue()==""){$.txtGroupCode1.setFocus();MessageBoxShow("그룹코드 은(는) 필수입력항목입니다.");return}else{if($.txtGroupName1.getValue()==""){$.txtGroupName1.setFocus();MessageBoxShow("코드그룹명 은(는) 필수입력항목입니다.");return}else{if($.txtCodeLength.getValue()==""){$.txtCodeLength.setFocus();MessageBoxShow("코드길이 은(는) 필수입력항목입니다.");return}else{if($.cmbGroupCategory1.getValue()==""){$.cmbGroupCategory1.setFocus();MessageBoxShow("유형분류 은(는) 필수입력항목입니다.");return}else{saveComCode()}}}}}else{if(btnId=="btnDelete"){confirmBoxShow("["+$.grdCodeGroup.getValue($.rId,"group_name")+"] 그룹코드 내용을<br/> 삭제하시겠습니까?",function(){if(g_main.msgShare==true){saveComCode("D")}})}}}}else{if(panelId=="panList"){if(btnId=="btnNew"){$.grdCodeMaster.addRow()}else{if(btnId=="btnSave"){var returnTemp=0;for(var i=0;i<$.grdCodeMaster.getRowCount();i++){if($.grdCodeMaster.getValue(i,"sub_code")==""||$.grdCodeMaster.getValue(i,"sub_code")==null||typeof $.grdCodeMaster.getValue(i,"sub_code")=="undefined"){MessageBoxShow("세부코드 은(는) 필수입력항목입니다.");returnTemp++;break}else{if($.grdCodeMaster.getValue(i,"code_name")==""||$.grdCodeMaster.getValue(i,"code_name")==null||typeof $.grdCodeMaster.getValue(i,"code_name")=="undefined"){MessageBoxShow("코드명 은(는) 필수입력항목입니다.");returnTemp++;break}}}if(returnTemp==0){saveCodeMaster("")}}else{if(btnId=="btnDelete"){if($.grdCodeMaster.getRowStatus($.grdCodeMaster.getSelectedRowIdx())=="N"){$.grdCodeMaster.extObj.jqxGrid("deleterow",$.grdCodeMaster.getSelectedRowIdx())}else{confirmBoxShow("정말 삭제하시겠습니까?<br/>삭제하시려면 예를 클릭하세요.",function(){if(g_main.msgShare==true){saveCodeMaster("D")}})}}}}}}};$.fingerpopup_close=function(id){};$.fingerpopup2_close=function(id){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerradiobox_change=function(id,value){};$.fingerimage_click=function(id){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>