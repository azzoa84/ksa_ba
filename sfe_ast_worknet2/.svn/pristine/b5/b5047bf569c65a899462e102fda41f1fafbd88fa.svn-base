<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panQuery=null;$.panLeft=null;$.panRight=null;$.grdMaster=null;$.tabDetail=null;$.grdDept=null;$.grdEmp=null;$.panDept=null;$.panEmp=null;$.lbleval_year=null;$.cmbeval_year=null;$.lbleval_group_code=null;$.txteval_group_code=null;$.lbleval_group_type=null;$.cmbeval_group_type=null;$.lbleval_group_name=null;$.txteval_group_name=null;$.lblmemo=null;$.txtmemo=null;$.lbluse_yn=null;$.chkuse_yn=null;$.lbldept_name=null;$.txtdept_name=null;$.btnDept=null;$.lblemp_name=null;$.txtemp_name=null;$.btnEmp=null;$.btnSearch=null;$.btnSave=null;$.btnNew=null;$.btnDelete=null;$.lblsales_yn=null;$.chksales_yn=null;$.initRow=false;$.eval_group_code="";function QueryClick(){fnQRY_P_HRE1200_Q("MASTER")}function fnQRY_P_HRE1200_Q(workType){if(!validateControls([$.cmbeval_year])){return}var json=createJSON_Q(workType);callQuery(["req",json],workType,$)}function createJSON_Q(workType){var json=createExecuteParamInfo("HR..P_HRE1200_Q",[workType,$.cmbeval_year.getValue(),$.txteval_group_code.getValue(),$.txtdept_name.getValue(),$.txtemp_name.getValue(),getToday("")]);return json}function focusedRowChanged(){var rId=$.grdMaster.getSelectedRowIdx();$.txteval_group_code.setValue($.grdMaster.getValue(rId,"eval_group_code"));$.cmbeval_group_type.setValue($.grdMaster.getValue(rId,"eval_group_type"));$.txteval_group_name.setValue($.grdMaster.getValue(rId,"eval_group_name"));$.txtmemo.setValue($.grdMaster.getValue(rId,"memo"));$.chkuse_yn.setValue($.grdMaster.getValue(rId,"use_yn"));$.chksales_yn.setValue($.grdMaster.getValue(rId,"sales_yn"));$.txtdept_name.setValue("");$.txtemp_name.setValue("");if($.cmbeval_group_type.getValue()=="DEPT"){fnQRY_P_HRE1200_Q("DEPT");$.tabDetail.showTabPage(0)}else{fnQRY_P_HRE1200_Q("EMP");$.tabDetail.showTabPage(1)}$.txteval_group_code.setReadOnly(true)}function NewClick(){$.panRight.clear();$.panDept.clear();$.panEmp.clear();$.grdDept.clear();$.grdEmp.clear();$.chkuse_yn.setValue("Y");$.cmbeval_group_type.setValue("DEPT");$.txteval_group_code.setReadOnly(false);$.txteval_group_code.setFocus()}function fnSET_P_HRE1200_S(workType){if(!validateControls([$.txteval_group_code,$.cmbeval_group_type,$.txteval_group_name])){return}var strdept_code="";var stremp_code="";var bResult=false;if(workType=="D"){var json=createJSON_S1(workType);callQuery(["req",json],workType,$)}else{if($.cmbeval_group_type.getValue()=="DEPT"){for(var i=0;i<$.grdDept.getRowCount();i++){if($.grdDept.getValue(i,"chk_yn")=="Y"){strdept_code+=$.grdDept.getValue(i,"dept_code")+"|"}}}else{for(var i=0;i<$.grdEmp.getRowCount();i++){if($.grdEmp.getValue(i,"chk_yn")=="Y"){stremp_code+=$.grdEmp.getValue(i,"emp_code")+"|"}}}var json=createJSON_S(workType,strdept_code,stremp_code);var ds=callExecuteSync(["req",json],workType,$);if(ds!=null){bResult=true}}return bResult}function createJSON_S(workType,strdept_code,stremp_code){var json=createExecuteParamInfo("HR..P_HRE1200_S",[workType,$.cmbeval_year.getValue(),$.txteval_group_code.getValue(),$.txteval_group_name.getValue(),$.cmbeval_group_type.getValue(),$.txtmemo.getValue(),$.chkuse_yn.getValue(),$.chksales_yn.getValue(),"#EmpCode#","#HostInfo#",strdept_code,stremp_code]);return json}function createJSON_S1(workType){var json=createExecuteParamInfo("HR..P_HRE1200_S",[workType,$.cmbeval_year.getValue(),$.txteval_group_code.getValue(),$.txteval_group_name.getValue(),$.cmbeval_group_type.getValue(),$.txtmemo.getValue(),$.chkuse_yn.getValue(),$.chksales_yn.getValue(),"#EmpCode#","#HostInfo#","",""]);return json}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,705);$.panMain.setText("");$.panMain.setBottomLine(true);$.panQuery=new FingerPanel(host,"panQuery",0,0,1200,55);$.panQuery.setText("");$.panQuery.setBottomLine();$.panLeft=new FingerPanel(host,"panLeft",0,60,320,640);$.panLeft.setText("평가그룹 리스트");$.panLeft.setBottomLine(true);$.panRight=new FingerPanel(host,"panRight",330,60,870,640);$.panRight.setText("평가그룹 정보");$.panRight.setBottomLine(true);$.grdMaster=new FingerDataGrid(host,"grdMaster",0,0,320,595);$.tabDetail=new FingerTab(host,"tabDetail",0,140,870,455);$.grdDept=new FingerDataGrid(host,"grdDept",0,50,870,375);$.grdEmp=new FingerDataGrid(host,"grdEmp",0,50,870,375);$.panDept=new FingerPanel(host,"panDept",0,0,870,425);$.panDept.setText("");$.panDept.setBottomLine(true);$.panEmp=new FingerPanel(host,"panEmp",0,0,870,425);$.panEmp.setText("");$.panEmp.setBottomLine(true);$.lbleval_year=new FingerLabel(host,"lbleval_year",0,15,100,20);$.lbleval_year.setText("평가년도");$.cmbeval_year=new FingerComboBox(host,"cmbeval_year",105,15,140,20);$.lbleval_group_code=new FingerLabel(host,"lbleval_group_code",0,15,100,20);$.lbleval_group_code.setText("평가그룹코드");$.txteval_group_code=new FingerEdit(host,"txteval_group_code",105,15,140,20);$.lbleval_group_type=new FingerLabel(host,"lbleval_group_type",250,15,100,20);$.lbleval_group_type.setText("그룹구분");$.cmbeval_group_type=new FingerComboBox(host,"cmbeval_group_type",355,15,140,20);$.lbleval_group_name=new FingerLabel(host,"lbleval_group_name",0,45,100,20);$.lbleval_group_name.setText("평가그룹명");$.txteval_group_name=new FingerEdit(host,"txteval_group_name",105,45,140,20);$.lblmemo=new FingerLabel(host,"lblmemo",0,75,100,20);$.lblmemo.setText("비고");$.txtmemo=new FingerEdit(host,"txtmemo",105,75,390,20);$.lbluse_yn=new FingerLabel(host,"lbluse_yn",0,105,100,20);$.lbluse_yn.setText("사용여부");$.chkuse_yn=new FingerCheckBox(host,"chkuse_yn",105,105,140,20);$.chkuse_yn.setText("사용");$.lbldept_name=new FingerLabel(host,"lbldept_name",0,15,100,20);$.lbldept_name.setText("부서");$.txtdept_name=new FingerEdit(host,"txtdept_name",105,15,140,20);$.btnDept=new FingerButton(host,"btnDept",250,15,80,20);$.btnDept.setText("검색");$.lblemp_name=new FingerLabel(host,"lblemp_name",0,15,100,20);$.lblemp_name.setText("사원");$.txtemp_name=new FingerEdit(host,"txtemp_name",105,15,140,20);$.btnEmp=new FingerButton(host,"btnEmp",250,15,80,20);$.btnEmp.setText("검색");$.btnSearch=new FingerButton(host,"btnSearch",1120,15,80,20);$.btnSearch.setText("조회");$.btnSave=new FingerButton(host,"btnSave",1055,15,80,20);$.btnSave.setText("저장");$.btnNew=new FingerButton(host,"btnNew",925,15,80,20);$.btnNew.setText("신규");$.btnDelete=new FingerButton(host,"btnDelete",990,15,80,20);$.btnDelete.setText("삭제");$.lblsales_yn=new FingerLabel(host,"lblsales_yn",250,105,100,20);$.lblsales_yn.setText("영업부서");$.chksales_yn=new FingerCheckBox(host,"chksales_yn",350,105,140,20);$.chksales_yn.setText("예");$.panQuery.setBorder(true);$.cmbeval_year.setAllowBlank(false,"평가년도");$.txteval_group_code.setAllowBlank(false,"평가그룹코드");$.cmbeval_group_type.setAllowBlank(false,"그룹구분");$.txteval_group_name.setAllowBlank(false,"그룹구분명");$.btnSave.setEnable(false);$.grdMaster.setColumns([new FingerDataGridColumn("eval_group_type",80,"left","string","그룹구분"),new FingerDataGridColumn("eval_group_code",80,"left","string","코드"),new FingerDataGridColumn("eval_group_name",140,"left","string","평가그룹"),new FingerDataGridColumn("memo",730,"left","string","비고",{hidden:true}),new FingerDataGridColumn("use_yn",100,"left","string","사용여부",{hidden:true}),new FingerDataGridColumn("sales_yn",100,"left","string","영업부서여부",{hidden:true})]);$.grdMaster.init({nonExcel:true,isFilter:false,scroll:"xy"});$.grdDept.setColumns([new FingerDataGridColumn("chk_yn",50,"center","checkbox","masterCheckbox"),new FingerDataGridColumn("dept_code",100,"left","string","부서코드"),new FingerDataGridColumn("dept_name",240,"left","string","부서명")]);$.grdDept.init({nonExcel:true,isFilter:false,scroll:"xy"});$.grdEmp.setColumns([new FingerDataGridColumn("chk_yn",50,"center","checkbox","masterCheckbox"),new FingerDataGridColumn("dept_name",150,"left","string","부서명"),new FingerDataGridColumn("emp_code",100,"left","string","사번"),new FingerDataGridColumn("emp_name",100,"left","string","이름"),new FingerDataGridColumn("job_rank",140,"left","string","직급")]);$.grdEmp.init({nonExcel:true,isFilter:false,scroll:"xy"});$.host=host;$.args=args};$.start=function(){$.panMain.add($.panQuery);$.panMain.add($.panLeft);$.panMain.add($.panRight);$.panMain.add($.panEmp);$.panMain.add($.panDept);$.panQuery.add($.lbleval_year);$.panQuery.add($.cmbeval_year);$.panQuery.add($.btnSearch);$.panQuery.add($.btnSave);$.panQuery.add($.btnNew);$.panQuery.add($.btnDelete);$.panLeft.add($.grdMaster);$.panRight.add($.tabDetail);$.panRight.add($.chkuse_yn);$.panRight.add($.lbluse_yn);$.panRight.add($.txtmemo);$.panRight.add($.lblmemo);$.panRight.add($.txteval_group_name);$.panRight.add($.lbleval_group_name);$.panRight.add($.cmbeval_group_type);$.panRight.add($.lbleval_group_type);$.panRight.add($.txteval_group_code);$.panRight.add($.lbleval_group_code);$.panRight.add($.lblsales_yn);$.panRight.add($.chksales_yn);$.panDept.add($.grdDept);$.panDept.add($.lbldept_name);$.panDept.add($.txtdept_name);$.panDept.add($.btnDept);$.panEmp.add($.grdEmp);$.panEmp.add($.lblemp_name);$.panEmp.add($.txtemp_name);$.panEmp.add($.btnEmp);$.tabDetail.addTab([{text:"소속 부서",body:$.panDept,width:120},{text:"소속 사원",body:$.panEmp,width:120}]);$.cmbeval_group_type.setEmptyRow(true);$.cmbeval_year.setColumn("eval_year","eval_year1");var ds=bizComponentData2($,"Q1","L_HRE010_2|L_HRE001");setComboBind([$.cmbeval_year,$.cmbeval_group_type],ds);$.grdMaster.setColumnDropDownList("eval_group_type",ds.resultList[1])};$.callback=function(type,ds){if(type=="MASTER"){setDataGrid([$.grdMaster],ds);if($.grdMaster.getRowCount()<1){NewClick()}else{var rIndex=0;if($.initRow){rIndex=$.grdMaster.getGridRowIndex("eval_group_code",$.eval_group_code)}$.grdMaster.selectRow(rIndex)}$.initRow=false}else{if(type=="DEPT"){setDataGrid([$.grdDept],ds)}else{if(type=="EMP"){setDataGrid([$.grdEmp],ds)}else{if(type=="D"){QueryClick()}}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){fnQRY_P_HRE1200_Q("MASTER")}else{if(id=="btnDept"){fnQRY_P_HRE1200_Q("DEPT")}else{if(id=="btnEmp"){fnQRY_P_HRE1200_Q("EMP")}else{if(id=="btnNew"){NewClick()}else{if(id=="btnDelete"){if($.grdMaster.getRowCount()<1){return}var strMSG=$.txteval_group_name.getValue()+" 삭제하시겠습니까?";confirmBoxShow(strMSG,function(){if(g_main.msgShare==true){fnSET_P_HRE1200_S("D")}})}else{if(id=="btnSave"){var strStatus="";if($.txteval_group_code.getReadOnly()==false){strStatus="N"}else{strStatus="U"}$.eval_group_code=$.txteval_group_code.getValue();if(fnSET_P_HRE1200_S(strStatus)){$.initRow=true;QueryClick()}}}}}}}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){if(id=="cmbeval_group_type"){if($.cmbeval_group_type.getValue()==""){return}if($.cmbeval_group_type.getValue()=="DEPT"){$.tabDetail.setActiveTab(0);$.tabDetail.hideTab(1);$.tabDetail.showTab(0);$.panDept.setVisible(true);$.panEmp.setVisible(false);fnQRY_P_HRE1200_Q("DEPT")}else{$.tabDetail.setActiveTab(1);$.tabDetail.hideTab(0);$.tabDetail.showTab(1);$.panDept.setVisible(false);$.panEmp.setVisible(true);fnQRY_P_HRE1200_Q("EMP")}}};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdMaster"){if($.grdMaster.getRowCount()<1){return}focusedRowChanged()}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){if(id=="grdDept"){if($.grdDept.getRowCount()<1){return}$.btnSave.setEnable(true)}else{if(id=="grdEmp"){if($.grdEmp.getRowCount()<1){return}$.btnSave.setEnable(true)}}};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerimage_click=function(id){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){};$.fingerpopup_close=function(id){};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>