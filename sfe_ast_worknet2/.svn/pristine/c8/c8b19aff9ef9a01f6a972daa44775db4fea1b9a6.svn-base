<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panList=null;$.panInfo=null;$.panDetail=null;$.grdList=null;$.lblBusinessId=null;$.txtBusinessId=null;$.txtBusinessName=null;$.lblBusinessTitle=null;$.txtBusinessTitle=null;$.lblWfFormId=null;$.txtWfFormId=null;$.lblWfType=null;$.cmbWfType=null;$.lblWfKind=null;$.cmbWfKind=null;$.lblWfLineProc=null;$.txtWfLineProc=null;$.lblWfViewProc=null;$.txtWfViewProc=null;$.lblWfEndProc=null;$.txtWfEndProc=null;$.lblWfLoadProc=null;$.txtWfLoadProc=null;$.tabMain=null;$.panTab1=null;$.panTab2=null;$.panTab3=null;$.panTab4=null;$.panTab5=null;$.grdList2=null;$.memLine=null;$.memView=null;$.memEnd=null;$.memLoad=null;$.btnSearch2=null;$.strprocessName="";$.strprocessType="";$.workType="N";function createJSON_Q(workType){var json=createExecuteParamInfo("P_crmWFProcessManage_Q",[workType,workType=="Q"?"":($.grdList.getValue($.grdList.getSelectedRowIdx(),"business_id")==null?"":$.grdList.getValue($.grdList.getSelectedRowIdx(),"business_id")),$.strprocessName,$.strprocessType]);return json}function createJSON_S(workType){var json=createExecuteParamInfo("P_crmWFProcessManage_S",[workType,$.txtBusinessId.getValue(),$.txtBusinessName.getValue(),$.txtBusinessTitle.getValue(),$.cmbWfKind.getValue(),$.cmbWfType.getValue(),$.txtWfFormId.getValue(),$.txtWfLineProc.getValue(),$.txtWfEndProc.getValue(),$.txtWfViewProc.getValue(),$.txtWfLoadProc.getValue(),"#UserID#"]);return json}function searchList(workType){var json=createJSON_Q(workType);callQuery(["req",json],workType,$)}function changePanelButton(){if($.tabMain.getActiveTab()==0){$.panDetail.clearButton();$.btnSearch2.setVisible(false)}else{$.panDetail.clearButton();$.panDetail.addButtons(["btnSave"]);$.btnSearch2.setVisible(true)}}function saveList(workType){if(!validateControls([$.txtBusinessId,$.txtBusinessName,$.cmbWfType,$.cmbWfKind])){return}var json=createJSON_S(workType);callQuery(["req",json],workType,$)}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,770);$.panMain.setText("");$.panMain.setBottomLine(true);$.panList=new FingerPanel(host,"panList",0,0,300,760);$.panList.setText("결재 프로세스 리스트");$.panList.setBottomLine(true);$.panInfo=new FingerPanel(host,"panInfo",310,0,890,220);$.panInfo.setText("결재 프로세스 정보");$.panInfo.setBottomLine(true);$.panDetail=new FingerPanel(host,"panDetail",310,230,890,530);$.panDetail.setText("업무 역할 및 프로시저 세부 정보");$.panDetail.setBottomLine(true);$.grdList=new FingerDataGrid(host,"grdList",0,0,300,715);$.lblBusinessId=new FingerLabel(host,"lblBusinessId",0,15,130,20);$.lblBusinessId.setText("업무아이디");$.txtBusinessId=new FingerEdit(host,"txtBusinessId",135,15,140,20);$.txtBusinessName=new FingerEdit(host,"txtBusinessName",280,15,565,20);$.lblBusinessTitle=new FingerLabel(host,"lblBusinessTitle",0,45,130,20);$.lblBusinessTitle.setText("업무문서제목");$.txtBusinessTitle=new FingerEdit(host,"txtBusinessTitle",135,45,280,20);$.lblWfFormId=new FingerLabel(host,"lblWfFormId",430,45,130,20);$.lblWfFormId.setText("업무화면아이디");$.txtWfFormId=new FingerEdit(host,"txtWfFormId",565,45,280,20);$.lblWfType=new FingerLabel(host,"lblWfType",0,75,130,20);$.lblWfType.setText("결재구분");$.cmbWfType=new FingerComboBox(host,"cmbWfType",135,75,285,20);$.lblWfKind=new FingerLabel(host,"lblWfKind",430,75,130,20);$.lblWfKind.setText("결재종류");$.cmbWfKind=new FingerComboBox(host,"cmbWfKind",565,75,285,20);$.lblWfLineProc=new FingerLabel(host,"lblWfLineProc",0,105,130,20);$.lblWfLineProc.setText("결재라인프로시저");$.txtWfLineProc=new FingerEdit(host,"txtWfLineProc",135,105,280,20);$.lblWfViewProc=new FingerLabel(host,"lblWfViewProc",430,105,130,20);$.lblWfViewProc.setText("결재뷰프로시저");$.txtWfViewProc=new FingerEdit(host,"txtWfViewProc",565,105,280,20);$.lblWfEndProc=new FingerLabel(host,"lblWfEndProc",0,135,130,20);$.lblWfEndProc.setText("완료처리프로시저");$.txtWfEndProc=new FingerEdit(host,"txtWfEndProc",135,135,280,20);$.lblWfLoadProc=new FingerLabel(host,"lblWfLoadProc",430,135,130,20);$.lblWfLoadProc.setText("데이터로드프로시저");$.txtWfLoadProc=new FingerEdit(host,"txtWfLoadProc",565,135,280,20);$.tabMain=new FingerTab(host,"tabMain",0,0,890,485);$.panTab1=new FingerPanel(host,"panTab1",0,0,890,455);$.panTab1.setText("");$.panTab1.setBottomLine(true);$.panTab2=new FingerPanel(host,"panTab2",0,0,890,455);$.panTab2.setText("");$.panTab2.setBottomLine(true);$.panTab3=new FingerPanel(host,"panTab3",0,0,890,455);$.panTab3.setText("");$.panTab3.setBottomLine(true);$.panTab4=new FingerPanel(host,"panTab4",0,0,890,455);$.panTab4.setText("");$.panTab4.setBottomLine(true);$.panTab5=new FingerPanel(host,"panTab5",0,0,890,455);$.panTab5.setText("");$.panTab5.setBottomLine(true);$.grdList2=new FingerDataGrid(host,"grdList2",0,0,890,455);$.memLine=new FingerMemoEdit(host,"memLine",0,0,885,450);$.memView=new FingerMemoEdit(host,"memView",0,0,885,450);$.memEnd=new FingerMemoEdit(host,"memEnd",0,0,885,450);$.memLoad=new FingerMemoEdit(host,"memLoad",0,0,885,450);$.btnSearch2=new FingerButton(host,"btnSearch2",725,-40.5,95,30);$.btnSearch2.setText("조회");$.grdList.colIdx=$.grdList.setColumns([new FingerDataGridColumn("business_id",100,"left","string","업무아이디",{hidden:true}),new FingerDataGridColumn("business_name",300,"left","string","업무명")]);$.grdList.init();$.grdList.setEditable(false);$.grdList2.colIdx=$.grdList2.setColumns([new FingerDataGridColumn("role_code",200,"left","string",[{text:"업무역할코드",css:"col_chk"}]),new FingerDataGridColumn("role_name",300,"left","string",[{text:"업무역할명",css:"col_chk"}]),new FingerDataGridColumn("employee_id",250,"left","string","사원아이디",{hidden:true}),new FingerDataGridColumn("emp_name",180,"left","string",[{text:"사원명",css:"col_chk"}]),new FingerDataGridColumn("dept_name",190,"left","string","부서명")]);$.grdList2.init();$.grdList2.setEditable(false);$.tabMain.addTab([{text:"업무역할",body:$.panTab1,width:150},{text:"결재 라인 프로시저",body:$.panTab2,width:150},{text:"결재 뷰 프로시저",body:$.panTab3,width:150},{text:"완료 처리 프로시저",body:$.panTab4,width:150},{text:"데이터 로드 프로시저",body:$.panTab5,width:150}]);$.txtBusinessId.setAllowBlank(false,"업무아이디");$.txtBusinessName.setAllowBlank(false,"업무명");$.cmbWfType.setAllowBlank(false,"결재구분");$.cmbWfKind.setAllowBlank(false,"결재종류");$.cmbWfType.setEmptyRow(true);$.cmbWfKind.setEmptyRow(true);$.memLine.setReadOnly(true);$.memView.setReadOnly(true);$.memEnd.setReadOnly(true);$.memLoad.setReadOnly(true);$.btnSearch2.setVisible(false);$.panInfo.addButtons(["btnDelete","btnSave","btnNew"]);$.host=host;$.args=args};$.start=function(){$.panMain.add($.panList);$.panMain.add($.panInfo);$.panMain.add($.panDetail);$.panList.add($.grdList);$.panInfo.add($.lblBusinessId);$.panInfo.add($.txtBusinessId);$.panInfo.add($.txtBusinessName);$.panInfo.add($.lblBusinessTitle);$.panInfo.add($.txtBusinessTitle);$.panInfo.add($.lblWfFormId);$.panInfo.add($.txtWfFormId);$.panInfo.add($.lblWfType);$.panInfo.add($.cmbWfType);$.panInfo.add($.lblWfKind);$.panInfo.add($.cmbWfKind);$.panInfo.add($.lblWfLineProc);$.panInfo.add($.txtWfLineProc);$.panInfo.add($.lblWfViewProc);$.panInfo.add($.txtWfViewProc);$.panInfo.add($.lblWfEndProc);$.panInfo.add($.txtWfEndProc);$.panInfo.add($.lblWfLoadProc);$.panInfo.add($.txtWfLoadProc);$.panDetail.add($.tabMain);$.panDetail.add($.btnSearch2);$.panTab1.add($.grdList2);$.panTab2.add($.memLine);$.panTab3.add($.memView);$.panTab4.add($.memEnd);$.panTab5.add($.memLoad);var ds=bizComponentData2($,"Q1","L_CRM0018|L_CRM0017");setComboBind([$.cmbWfType,$.cmbWfKind],ds);changePanelButton();searchList("Q")};$.callback=function(type,ds){if(type=="Q"){setDataGrid([$.grdList],ds);var businessId=$.txtBusinessId.getValue();$.panInfo.clear();if(ds.resultList[0].length>0){if(businessId!=""){for(var i in ds.resultList[0]){if(ds.resultList[0][i].business_id==businessId){$.grdList.selectRow(i)}}}else{$.grdList.selectRow(0)}}}else{if(type=="Q1"){var ds1=ds.resultList[0];var ds2=ds.resultList[1];var ds3=ds.resultList[2];var ds4=ds.resultList[3];var ds5=ds.resultList[4];var ds6=ds.resultList[5];$.txtBusinessId.setValue(ds1[0].business_id);$.txtBusinessName.setValue(ds1[0].business_name);$.txtBusinessTitle.setValue(ds1[0].business_title);$.txtWfFormId.setValue(ds1[0].wf_form_id);$.cmbWfType.setValue(ds1[0].wf_type);$.cmbWfKind.setValue(ds1[0].wf_kind);$.txtWfLineProc.setValue(ds1[0].wf_line_proc);$.txtWfViewProc.setValue(ds1[0].wf_view_proc);$.txtWfEndProc.setValue(ds1[0].wf_end_proc);$.txtWfLoadProc.setValue(ds1[0].wf_load_proc);setDataGrid([$.grdList2],ds2,true);if(ds3[0]){var ds3Text="";for(var i=0;i<ds3.length;i++){if(ds3[i].text){ds3Text+=ds3[i].text}}$.memLine.setValue(ds3Text)}else{$.memLine.setValue("")}if(ds4[0]){var ds4Text="";for(var i=0;i<ds4.length;i++){if(ds4[i].text){ds4Text+=ds4[i].text}}$.memView.setValue(ds4Text)}else{$.memView.setValue("")}if(ds5[0]){var ds5Text="";for(var i=0;i<ds5.length;i++){if(ds5[i].text){ds5Text+=ds5[i].text}}$.memEnd.setValue(ds5Text)}else{$.memEnd.setValue("")}if(ds6[0]){var ds6Text="";for(var i=0;i<ds6.length;i++){if(ds6[i].text){ds6Text+=ds6[i].text}}$.memLoad.setValue(ds6Text)}else{$.memLoad.setValue("")}}else{if(type=="Q2"){if(ds.resultList[0].length>0){if($.strprocessType=="L"){$.memLine.setValue(ds.resultList[0][0].text)}else{if($.strprocessType=="V"){$.memView.setValue(ds.resultList[0][0].text)}else{if($.strprocessType=="E"){$.memEnd.setValue(ds.resultList[0][0].text)}else{if($.strprocessType=="D"){$.memLoad.setValue(ds.resultList[0][0].text)}}}}}else{if($.strprocessType=="L"){$.memLine.setValue("")}else{if($.strprocessType=="V"){$.memView.setValue("")}else{if($.strprocessType=="E"){$.memEnd.setValue("")}else{if($.strprocessType=="D"){$.memLoad.setValue("")}}}}}}else{if(type=="N"||type=="U"||type=="D"){searchList("Q")}}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch2"){if($.tabMain.getActiveTab()==1){$.strprocessName=$.txtWfLineProc.getValue();$.strprocessType="L"}else{if($.tabMain.getActiveTab()==2){$.strprocessName=$.txtWfViewProc.getValue();$.strprocessType="V"}else{if($.tabMain.getActiveTab()==3){$.strprocessName=$.txtWfEndProc.getValue();$.strprocessType="E"}else{if($.tabMain.getActiveTab()==4){$.strprocessName=$.txtWfLoadProc.getValue();$.strprocessType="D"}}}}searchList("Q2")}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdList"){searchList("Q1");$.txtBusinessId.setReadOnly(true);$.workType="U"}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerimage_click=function(id){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panDetail"){if(btnId=="btnSave"){saveList($.workType)}}else{if(panelId=="panInfo"){if(btnId=="btnNew"){$.workType="N";$.txtBusinessId.setReadOnly(false);$.panInfo.clear();$.grdList2.clear();$.panTab2.clear();$.panTab3.clear();$.panTab4.clear();$.panTab5.clear()}else{if(btnId=="btnSave"){saveList($.workType)}else{if(btnId=="btnDelete"){$.workType="D";confirmBoxShow("["+$.grdList.getValue($.grdList.getSelectedRowIdx(),"business_name")+"] 삭제하시겠습니까?",function(){if(g_main.msgShare==true){saveList($.workType)}})}}}}}};$.fingerpopup_close=function(id){};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){if(id=="tabMain"){changePanelButton()}};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>