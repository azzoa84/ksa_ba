<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panLeft=null;$.panRight=null;$.lbl_dept=null;$.cmb_dept=null;$.lbl_employee=null;$.cmb_employee=null;$.lbl_job=null;$.txt_job=null;$.btnSearch=null;$.grdJob=null;$.panJob=null;$.btnSave=null;$.btnApproveReq=null;$.btnApproval=null;$.btnNew=null;$.lbl_yyyymmdd=null;$.dte_start_date=null;$.lbl_Ex1=null;$.dte_end_date=null;$.lbl_state=null;$.cmb_state=null;$.lbl_position=null;$.lbl_date=null;$.lbl_report=null;$.lbl_function=null;$.lbl_incumbent=null;$.lbl_approved=null;$.btnDelete=null;$.txt_date=null;$.txt_function=null;$.txt_approved=null;$.panPosition=null;$.grdPosition=null;$.panScope=null;$.grdScope=null;$.panPrincipal=null;$.grdPrincipal=null;$.panQualifications=null;$.grdQualifications=null;$.panDimensions=null;$.grdDimensions=null;$.panSkill=null;$.grdSkill=null;$.panCustomers=null;$.grdCustomers=null;$.panCareer=null;$.grdCareer=null;$.html_msg=null;$.lbl_site=null;$.cmb_site=null;$.line_gubun=null;$.txt_position=null;$.txt_report_to=null;$.txt_incumbent=null;$.treeEmp=null;$.panEmp=null;$.session=g_main.session.obj;$.saveType="N";$.varSeq=0;$.approvedUserId="";$.varEmployeeId="";$.type="N";function createJSON_Q(workType){var json=createExecuteParamInfo("HR..P_hriAkrPositionDesc_Q",[workType,workType=="Q"?0:$.varSeq,$.dte_start_date.getValue(),$.dte_end_date.getValue(),$.cmb_site.getValue()||"",$.cmb_dept.getValue()||"",workType!="Q_DETAIL"?($.cmb_employee.getValue()||""):$.varEmployeeId,$.txt_job.getValue()||"",$.cmb_state.getValue()||"",$.session.DeptLeaderYN,$.type,"#DeptCode#","#UserID#"]);return json}function createJSON_S(workType,status){var showYn="",apprStatus="";var approveUserId="",approveDate="";var employeeId=$.session.UserID;if(status=="SAVE"){showYn="N";apprStatus="T"}else{if(status=="REQ"){showYn="N";apprStatus="N"}else{if(status=="SUMMIT"){showYn="Y";apprStatus="Y";approveUserId=$.session.UserID;approveDate=getToday();employeeId=$.varEmployeeId}}}var json=createExecuteParamInfo("HR..P_hriAkrPositionDesc_S",[workType,employeeId,$.varSeq,showYn,apprStatus,approveUserId,approveDate,$.txt_position.getText(),$.txt_report_to.getText(),$.txt_function.getValue()||"",$.txt_incumbent.getText(),"",0,"","",$.varApproved,"#UserID#"]);return json}function createJSON_S1(workType,employeeId){var gRow=[],rows=[];createAkrDetailData($.grdPosition,gRow);createAkrDetailData($.grdScope,gRow);createAkrDetailData($.grdPrincipal,gRow);createAkrDetailData($.grdQualifications,gRow);createAkrDetailData($.grdDimensions,gRow);createAkrDetailData($.grdSkill,gRow);createAkrDetailData($.grdCustomers,gRow);createAkrDetailData($.grdCareer,gRow);for(var i in gRow){rows.push([workType,employeeId,$.varSeq,"","","","","","","","",gRow[i].desc_type,gRow[i].desc_seq,gRow[i].desc_name||"",gRow[i].desc||"","","#UserID#"])}json=createExecuteParamInfo("HR..P_hriAkrPositionDesc_S",rows);return json}function searchJobProfile(workType){if(workType=="Q"){if(!$.panLeft.validateControls()){return}}var json=createJSON_Q(workType);callQuery(["req",json],workType,$)}function saveJobProfile(workType,status){var json=createJSON_S(workType,status);var ds=callExecuteSync(["req",json],"S");if(ds){if(workType!="D"){var employeeId=$.varEmployeeId;if(workType=="N"){$.varSeq=ds.returnStr;employeeId=$.session.UserID}$.varSel=$.varSeq;saveJobProfileDetail("N_DETAIL",employeeId)}else{$.varSel="";MessageBoxShow("정상적으로 삭제되었습니다.");searchJobProfile("Q")}}}function saveJobProfileDetail(workType,employeeId){var json=createJSON_S1(workType,employeeId);callExecute(["req",json],"DS",$)}function newClick(){$.saveType="N";$.varApproved="";$.varSeq=0;$.approvedUserId="";$.varEmployeeId="";$.type="N";$.btnApprove="N";$.panRight.clear();$.grdPosition.clear();$.grdScope.clear();$.grdPrincipal.clear();$.grdQualifications.clear();$.grdDimensions.clear();$.grdSkill.clear();$.grdCustomers.clear();$.grdCareer.clear();$.btnSave.setEnable(true);$.btnApproveReq.setEnable(true);panRightControl(true);buttonControl(true);initGridData()}function panRightControl(bo){$.txt_position.setReadOnly(!bo);$.txt_report_to.setReadOnly(!bo);$.txt_incumbent.setReadOnly(!bo);$.txt_function.setReadOnly(!bo);$.grdPosition.setEditable(bo);$.grdScope.setEditable(bo);$.grdPrincipal.setEditable(bo);$.grdQualifications.setEditable(bo);$.grdDimensions.setEditable(bo);$.grdSkill.setEditable(bo);$.grdCustomers.setEditable(bo);$.grdCareer.setEditable(bo)}function buttonControl(bo){$.btnDelete.setEnable(bo);$.btnSave.setEnable(bo);$.btnApproveReq.setEnable(bo);$.btnNew.setEnable(bo);$.panPosition.showButton(bo);$.panScope.showButton(bo);$.panPrincipal.showButton(bo);$.panQualifications.showButton(bo);$.panDimensions.showButton(bo);$.panSkill.showButton(bo);$.panCustomers.showButton(bo);$.panCareer.showButton(bo)}function chk(){if(!$.panRight.validateControls()){return false}var rId=$.grdJob.getSelectedRowIdx();if($.saveType!="N"&&!rId){MessageBoxShow("지원서를 선택해주세요.");return false}return true}function initView(){var ds=bizComponentData2($,"Q1","L_CRM0051|L_ORG001|L_HRI055");setComboBind([$.cmb_dept,$.cmb_site,$.cmb_state],ds);$.grdJob.setColumnDropDownList("appr_status",ds.resultList[2]);$.cmb_site.setValue("1");var now=getCalcMonth(getToday(),-2);$.dte_start_date.setValue(now.substr(0,6)+"01");$.dte_end_date.setValue(getToday());$.html_msg.setHTML("* 해당 직책을 수행하기 위해서 직책자는 아래 영역에 대한 종합적이고 완전한 기술과 지식, 이해를 보유하고 있어야 한다.");$.html_msg.setStyle("color","red");setAuthority();initGridData();searchJobProfile("Q");searchJobProfile("Q_EMP")}function setAuthority(){if($.session.DeptLeaderYN=="Y"){$.cmb_employee.setValue("")}}function initGridData(){var demensionsData=[{desc_seq:1,col1:"연간 IT 예산",col2:": KRW xx M ~ xxx M",desc_type:"DIMENSIONS",desc:""},{desc_seq:2,col1:"IT 담당 직원 수",col2:": X 명 미만",desc_type:"DIMENSIONS",desc:""}];setDataGrid([$.grdDimensions],demensionsData,true)}function gridAddRow(id,type,q){id.addRow({desc_seq:(id.getRowCount()+1)||1,desc:"",desc_type:type,desc_name:""},id.getRowCount())}function gridDelRow(id){var rId=id.getSelectedRowIdx();if(!rId){MessageBoxShow("삭제할 목록을 선택해 주세요.");return}id.deleteCurrentRow();var dt=id.getAllRows();if(!dt.length){return}for(var i in dt){id.setValue(i,"desc_seq",parseInt(i)+1)}}function createAkrDetailData(id,arr){var dt=id.getAllRows();for(var i in dt){arr.push(dt[i])}}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1900,1510);$.panMain.setText("");$.panMain.setBottomLine(true);$.panLeft=new FingerPanel(host,"panLeft",0,0,350,1370);$.panLeft.setText("검색");$.panLeft.setBottomLine(true);$.panRight=new FingerPanel(host,"panRight",360,0,840,1485);$.panRight.setText("Job Profile");$.panRight.setBottomLine(true);$.lbl_dept=new FingerLabel(host,"lbl_dept",0,75,100,20);$.lbl_dept.setText("부서");$.cmb_dept=new FingerComboBox(host,"cmb_dept",105,75,145,20);$.lbl_employee=new FingerLabel(host,"lbl_employee",0,105,100,20);$.lbl_employee.setText("사원");$.cmb_employee=new FingerComboBox(host,"cmb_employee",105,105,145,20);$.lbl_job=new FingerLabel(host,"lbl_job",0,135,100,20);$.lbl_job.setText("직무");$.txt_job=new FingerEdit(host,"txt_job",105,135,140,20);$.btnSearch=new FingerButton(host,"btnSearch",285,-37.5,80,20);$.btnSearch.setText("조회");$.grdJob=new FingerDataGrid(host,"grdJob",0,0,340,168);$.panJob=new FingerPanel(host,"panJob",5,210,335,168);$.panJob.setText("");$.panJob.setBottomLine(true);$.btnSave=new FingerButton(host,"btnSave",444,-40,90,30);$.btnSave.setText("저장");$.btnApproveReq=new FingerButton(host,"btnApproveReq",520,-40,100,30);$.btnApproveReq.setText("승인요청");$.btnApproval=new FingerButton(host,"btnApproval",606,-40,90,30);$.btnApproval.setText("승인");$.btnNew=new FingerButton(host,"btnNew",368,-40,90,30);$.btnNew.setText("신규");$.lbl_yyyymmdd=new FingerLabel(host,"lbl_yyyymmdd",0,15,100,20);$.lbl_yyyymmdd.setText("제출일자");$.dte_start_date=new FingerDateEdit(host,"dte_start_date",105,15,105,20);$.lbl_Ex1=new FingerLabel(host,"lbl_Ex1",210,15,20,20);$.lbl_Ex1.setText("~");$.dte_end_date=new FingerDateEdit(host,"dte_end_date",235,15,105,20);$.lbl_state=new FingerLabel(host,"lbl_state",0,165,100,20);$.lbl_state.setText("승인상태");$.cmb_state=new FingerComboBox(host,"cmb_state",105,165,145,20);$.lbl_position=new FingerLabel(host,"lbl_position",0,15,100,20);$.lbl_position.setText("직무명");$.lbl_date=new FingerLabel(host,"lbl_date",390,15,100,20);$.lbl_date.setText("일자");$.lbl_report=new FingerLabel(host,"lbl_report",0,45,100,20);$.lbl_report.setText("REPORT TO");$.lbl_function=new FingerLabel(host,"lbl_function",390,45,100,20);$.lbl_function.setText("FUNCTION");$.lbl_incumbent=new FingerLabel(host,"lbl_incumbent",0,45,100,20);$.lbl_incumbent.setText("담당자");$.lbl_approved=new FingerLabel(host,"lbl_approved",390,45,100,20);$.lbl_approved.setText("승인자");$.btnDelete=new FingerButton(host,"btnDelete",682,-40,90,30);$.btnDelete.setText("삭제");$.txt_date=new FingerEdit(host,"txt_date",495,15,215,20);$.txt_function=new FingerEdit(host,"txt_function",495,45,215,20);$.txt_approved=new FingerEdit(host,"txt_approved",495,45,215,20);$.panPosition=new FingerPanel(host,"panPosition",10,125,820,200);$.panPosition.setText("직무목표");$.panPosition.setBottomLine(true);$.grdPosition=new FingerDataGrid(host,"grdPosition",0,0,820,155);$.panScope=new FingerPanel(host,"panScope",10,335,820,200);$.panScope.setText("업무범위");$.panScope.setBottomLine(true);$.grdScope=new FingerDataGrid(host,"grdScope",0,0,820,155);$.panPrincipal=new FingerPanel(host,"panPrincipal",10,545,820,200);$.panPrincipal.setText("주요 책임 업무");$.panPrincipal.setBottomLine(true);$.grdPrincipal=new FingerDataGrid(host,"grdPrincipal",0,0,820,155);$.panQualifications=new FingerPanel(host,"panQualifications",10,755,820,200);$.panQualifications.setText("자격요건");$.panQualifications.setBottomLine(true);$.grdQualifications=new FingerDataGrid(host,"grdQualifications",0,0,820,155);$.panDimensions=new FingerPanel(host,"panDimensions",10,965,820,200);$.panDimensions.setText("DIMENSIONS");$.panDimensions.setBottomLine(true);$.grdDimensions=new FingerDataGrid(host,"grdDimensions",0,0,820,155);$.panSkill=new FingerPanel(host,"panSkill",10,970,820,230);$.panSkill.setText("필요지식/기술");$.panSkill.setBottomLine(true);$.grdSkill=new FingerDataGrid(host,"grdSkill",0,30,820,155);$.panCustomers=new FingerPanel(host,"panCustomers",10,1215,820,200);$.panCustomers.setText("내/외부 고객");$.panCustomers.setBottomLine(true);$.grdCustomers=new FingerDataGrid(host,"grdCustomers",0,0,820,155);$.panCareer=new FingerPanel(host,"panCareer",10,1430,820,200);$.panCareer.setText("Next Career");$.panCareer.setBottomLine(true);$.grdCareer=new FingerDataGrid(host,"grdCareer",0,0,820,155);$.html_msg=new FingerHTMLView(host,"html_msg",5,5,810,20);$.lbl_site=new FingerLabel(host,"lbl_site",0,45,100,20);$.lbl_site.setText("사업장");$.cmb_site=new FingerComboBox(host,"cmb_site",105,45,235,20);$.line_gubun=new FingerLine(host,"line_gubun",10,95,820,1);$.txt_position=new FingerEdit(host,"txt_position",105,15,215,20);$.txt_report_to=new FingerEdit(host,"txt_report_to",105,45,215,20);$.txt_incumbent=new FingerEdit(host,"txt_incumbent",105,45,215,20);$.treeEmp=new FingerTree(host,"treeEmp",5,0,335,680);$.panEmp=new FingerPanel(host,"panEmp",0,390,335,680);$.panEmp.setText("");$.panEmp.setBottomLine(true);$.panLeft.setBorder(true);$.panRight.setBorder(true);$.panJob.setBorder(true);$.panEmp.setBorder(true);$.cmb_site.setEmptyRow(true);$.cmb_dept.setEmptyRow(true);$.cmb_employee.setEmptyRow(true);$.cmb_state.setEmptyRow(true);$.cmb_site.setColumn("site_code","site_name");$.cmb_dept.setColumn("dept_code","dept_name");$.cmb_employee.setColumn("employee_id","emp_name");$.panRight.addButton("btnPrint","출력");$.panRight.setButtonAction("btnPrint","print");$.panPosition.addButtons(["btnDelete","btnAdd"]);$.panScope.addButtons(["btnDelete","btnAdd"]);$.panPrincipal.addButtons(["btnDelete","btnAdd"]);$.panQualifications.addButtons(["btnDelete","btnAdd"]);$.panSkill.addButtons(["btnDelete","btnAdd"]);$.panCustomers.addButtons(["btnDelete","btnAdd"]);$.panCareer.addButtons(["btnDelete","btnAdd"]);$.btnSave.setClass("btn_save");$.btnNew.setClass("btn_new");$.btnNew.setVisible(false);$.btnDelete.setClass("btn_delete");$.dte_start_date.setAllowBlank(false,"시작일");$.dte_end_date.setAllowBlank(false,"종료일");$.txt_position.setAllowBlank(false,"POSITION");$.txt_incumbent.setAllowBlank(false,"INCUMBENT");$.txt_date.setReadOnly(true);$.txt_approved.setReadOnly(true);$.btnDelete.setEnable(false);$.btnApproval.setEnable(false);$.lbl_report.setVisible(false);$.lbl_function.setVisible(false);$.txt_function.setVisible(false);$.txt_report_to.setVisible(false);$.grdJob.colIdx=$.grdJob.setColumns([new FingerDataGridColumn("yyyy_seq",70,"left","int","NO."),new FingerDataGridColumn("seq",50,"right","int","순번1",{hidden:true}),new FingerDataGridColumn("employee_id",80,"left","string","사번"),new FingerDataGridColumn("emp_name",70,"left","string","이름"),new FingerDataGridColumn("funct",83,"left","string","지원직무",{hidden:true}),new FingerDataGridColumn("appr_status",70,"left","string","상태"),new FingerDataGridColumn("save_date",85,"left","string","수정일자",{format:"s_ymd"})]);$.grdJob.init({scroll:"xy",leftSplit:3,nonExcel:false});$.grdJob.setBorder(false);$.grdPosition.colIdx=$.grdPosition.setColumns([new FingerDataGridColumn("desc_seq",70,"right","int","순번",{format:"int",readonly:true}),new FingerDataGridColumn("desc",733,"left","string","내용"),new FingerDataGridColumn("desc_type",0,"left","string","작성분류",{hidden:true}),new FingerDataGridColumn("desc_name",0,"left","string","작성분류명",{hidden:true})]);$.grdPosition.init({scroll:"xy"});$.grdPosition.setBorder(false);$.grdPosition.setEditable(true);$.grdScope.colIdx=$.grdScope.setColumns([new FingerDataGridColumn("desc_seq",70,"right","int","순번",{format:"int",readonly:true}),new FingerDataGridColumn("desc",733,"left","string","내용"),new FingerDataGridColumn("desc_type",0,"left","string","작성분류",{hidden:true}),new FingerDataGridColumn("desc_name",0,"left","string","작성분류명",{hidden:true})]);$.grdScope.init({scroll:"xy"});$.grdScope.setBorder(false);$.grdScope.setEditable(true);$.grdPrincipal.colIdx=$.grdPrincipal.setColumns([new FingerDataGridColumn("desc_seq",70,"right","int","순번",{format:"int",readonly:true}),new FingerDataGridColumn("desc",733,"left","string","내용"),new FingerDataGridColumn("desc_type",0,"left","string","작성분류",{hidden:true}),new FingerDataGridColumn("desc_name",0,"left","string","작성분류명",{hidden:true})]);$.grdPrincipal.init({scroll:"xy"});$.grdPrincipal.setBorder(false);$.grdPrincipal.setEditable(true);$.grdQualifications.colIdx=$.grdQualifications.setColumns([new FingerDataGridColumn("desc_seq",70,"right","int","순번",{format:"int",readonly:true}),new FingerDataGridColumn("desc",733,"left","string","내용"),new FingerDataGridColumn("desc_type",0,"left","string","작성분류",{hidden:true}),new FingerDataGridColumn("desc_name",0,"left","string","작성분류명",{hidden:true})]);$.grdQualifications.init({scroll:"xy"});$.grdQualifications.setBorder(false);$.grdQualifications.setEditable(true);$.grdDimensions.colIdx=$.grdDimensions.setColumns([new FingerDataGridColumn("desc_seq",70,"right","int","순번",{format:"int",readonly:true}),new FingerDataGridColumn("col1",100,"left","string","",{readonly:true}),new FingerDataGridColumn("desc",100,"left","string","내용"),new FingerDataGridColumn("col2",533,"left","string","",{readonly:true}),new FingerDataGridColumn("desc_type",0,"left","string","작성분류",{hidden:true}),new FingerDataGridColumn("desc_name",0,"left","string","작성분류명",{hidden:true})]);$.grdDimensions.init({scroll:"xy"});$.grdDimensions.setBorder(false);$.grdDimensions.setEditable(true);$.panDimensions.setVisible(false);$.grdSkill.colIdx=$.grdSkill.setColumns([new FingerDataGridColumn("desc_seq",70,"right","int","순번",{format:"int",readonly:true}),new FingerDataGridColumn("desc",733,"left","string","내용"),new FingerDataGridColumn("desc_type",0,"left","string","작성분류",{hidden:true}),new FingerDataGridColumn("desc_name",0,"left","string","작성분류명",{hidden:true})]);$.grdSkill.init({scroll:"xy"});$.grdSkill.setBorder(false);$.grdSkill.setEditable(true);$.grdCustomers.colIdx=$.grdCustomers.setColumns([new FingerDataGridColumn("desc_seq",70,"right","int","순번",{format:"int",readonly:true}),new FingerDataGridColumn("desc",733,"left","string","내용"),new FingerDataGridColumn("desc_type",0,"left","string","작성분류",{hidden:true}),new FingerDataGridColumn("desc_name",0,"left","string","작성분류명",{hidden:true})]);$.grdCustomers.init({scroll:"xy"});$.grdCustomers.setBorder(false);$.grdCustomers.setEditable(true);$.grdCareer.colIdx=$.grdCareer.setColumns([new FingerDataGridColumn("desc_seq",70,"right","int","순번",{format:"int",readonly:true}),new FingerDataGridColumn("desc",733,"left","string","내용"),new FingerDataGridColumn("desc_type",0,"left","string","작성분류",{hidden:true}),new FingerDataGridColumn("desc_name",0,"left","string","작성분류명",{hidden:true})]);$.grdCareer.init({scroll:"xy"});$.grdCareer.setBorder(false);$.grdCareer.setEditable(true);$.panCareer.setVisible(false);$.host=host;$.args=args};$.start=function(){$.panMain.add($.panLeft);$.panMain.add($.panRight);$.panLeft.add($.btnSearch);$.panLeft.add($.txt_job);$.panLeft.add($.lbl_job);$.panLeft.add($.cmb_employee);$.panLeft.add($.lbl_employee);$.panLeft.add($.cmb_dept);$.panLeft.add($.lbl_dept);$.panLeft.add($.panJob);$.panLeft.add($.lbl_yyyymmdd);$.panLeft.add($.dte_start_date);$.panLeft.add($.lbl_Ex1);$.panLeft.add($.dte_end_date);$.panLeft.add($.lbl_state);$.panLeft.add($.cmb_state);$.panLeft.add($.lbl_site);$.panLeft.add($.cmb_site);$.panLeft.add($.panEmp);$.panRight.add($.lbl_position);$.panRight.add($.lbl_date);$.panRight.add($.lbl_report);$.panRight.add($.lbl_function);$.panRight.add($.lbl_incumbent);$.panRight.add($.lbl_approved);$.panRight.add($.btnDelete);$.panRight.add($.btnSave);$.panRight.add($.btnApproveReq);$.panRight.add($.btnApproval);$.panRight.add($.btnNew);$.panRight.add($.txt_date);$.panRight.add($.txt_function);$.panRight.add($.txt_approved);$.panRight.add($.panPosition);$.panRight.add($.panScope);$.panRight.add($.panPrincipal);$.panRight.add($.panQualifications);$.panRight.add($.panDimensions);$.panRight.add($.panSkill);$.panRight.add($.panCustomers);$.panRight.add($.panCareer);$.panRight.add($.line_gubun);$.panRight.add($.txt_position);$.panRight.add($.txt_report_to);$.panRight.add($.txt_incumbent);$.panJob.add($.grdJob);$.panPosition.add($.grdPosition);$.panScope.add($.grdScope);$.panPrincipal.add($.grdPrincipal);$.panQualifications.add($.grdQualifications);$.panDimensions.add($.grdDimensions);$.panSkill.add($.grdSkill);$.panSkill.add($.html_msg);$.panCustomers.add($.grdCustomers);$.panCareer.add($.grdCareer);$.panEmp.add($.treeEmp);relocateChildIndexInPanel($.panLeft);initView();panRightControl(false);buttonControl(false)};$.callback=function(type,ds){if(type=="Q"){setDataGrid([$.grdJob],ds);var index=0;if($.grdJob.getRowCount()<1){newClick();return}if($.varSel){index=$.grdJob.getGridRowIndex("seq",$.varSel);$.grdJob.selectRow(index)}}else{if(type=="Q_DETAIL"){if(ds&&ds.resultList){var info=ds.resultList[0][0];if(info){$.txt_position.setText(info.position);$.txt_report_to.setText(info.report_to);$.txt_incumbent.setText(info.incumbent);var date=info.approved_date;if(date){date=date.substr(0,4)+"-"+date.substr(4,2)+"-"+date.substr(6,2)}$.txt_date.setValue(date);$.txt_function.setValue(info.funct);$.txt_approved.setValue(info.approved_user_name);setDataGrid([$.grdPosition],ds.resultList[1],true);setDataGrid([$.grdScope],ds.resultList[2],true);setDataGrid([$.grdPrincipal],ds.resultList[3],true);setDataGrid([$.grdQualifications],ds.resultList[4],true);setDataGrid([$.grdDimensions],ds.resultList[5],true);var dt=$.grdDimensions.getAllRows();if(dt.length){$.grdDimensions.setValue(0,"col1","연간 IT 예산");$.grdDimensions.setValue(0,"col2",": KRW xx M ~ xxx M");$.grdDimensions.setValue(1,"col1","IT 담당 직원 수");$.grdDimensions.setValue(1,"col2",": X 명 미만")}setDataGrid([$.grdSkill],ds.resultList[6],true);setDataGrid([$.grdCustomers],ds.resultList[7],true);setDataGrid([$.grdCareer],ds.resultList[8],true)}else{if($.type=="N"){newClick()}}}}else{if(type=="Q_EMP"){$.treeEmp.clearAll();var rs=ds.resultList[0];var isParent="";for(var i in rs){isParent=false;for(var j in rs){if(rs[i]["ParentKeyID"]==rs[j]["KeyID"]){isParent=true}}if(!isParent){rs[i]["ParentKeyID"]="";rs[i]["sort_seq"]="0"}}$.treeEmp.load(rs,"KeyID","ParentKeyID","Name",null,"sort_seq");if($.cmb_employee.getValue()){var selectEmpId=null;for(var i=0;i<rs.length;i++){if(rs[i].Type=="EMP"){selectEmpId=rs[i]["KeyID"];break}}selectEmpId=$.cmb_employee.getValue();setTimeout(function(){if(selectEmpId){$.treeEmp.setFocusNode(selectEmpId)}else{}},100)}}else{if(type=="DS"){var rId=$.grdJob.getSelectedRowIdx();var msg="정상적으로 저장되었습니다.";if(rId){var rt=$.grdJob.getValue(rId);if(rt.appr_status=="N"&&$.btnApprove=="N"){msg="정상적으로 저장되었습니다.<br>승인요청 이전 상태로 변경되었으니 다시 승인요청을 해주시기 바랍니다."}}MessageBoxShow(msg);searchJobProfile("Q")}}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){$.varSel="";$.type="N";$.btnApprove="N";$.treeEmp.setAllNoneCheck();searchJobProfile("Q");searchJobProfile("Q_EMP")}else{if(id=="btnNew"){$.grdJob.clearSelect();newClick()}else{if(id=="btnSave"){if(!chk()){return}var msg="저장 하시겠습니까?";confirmBoxShow(msg,function(){if(g_main.msgShare==true){if($.varApproved=="Y"){$.varSeq=0;$.saveType="N"}saveJobProfile($.saveType,"SAVE")}})}else{if(id=="btnApproveReq"){if(!chk()){return}confirmBoxShow("승인요청 하시겠습니까?",function(){if(g_main.msgShare==true){if($.varApproved=="Y"){$.varSeq=0;$.saveType="N"}saveJobProfile($.saveType,"REQ")}})}else{if(id=="btnApproval"){if(!chk()){return}confirmBoxShow("승인 하시겠습니까?",function(){if(g_main.msgShare==true){$.btnApprove="Y";saveJobProfile($.saveType,"SUMMIT")}})}else{if(id=="btnDelete"){confirmBoxShow("삭제 하시겠습니까?",function(){if(g_main.msgShare==true){saveJobProfile("D","")}})}}}}}}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){if(id.indexOf("chk_lang_ablity")>-1){var index=id.substr(-1,1);for(var i=1;i<=5;i++){if(i!=index){eval("$.chk_lang_ablity"+i+".setValue('N')")}}$.varLangAbility=index+"0"}else{if(id.indexOf("chk_oa_ability")>-1){var index=id.substr(-1,1);for(var i=1;i<=5;i++){if(i!=index){eval("$.chk_oa_ability"+i+".setValue('N')")}}$.varOaAbility="0"+index}}};$.fingercombobox_change=function(id,value){if(id=="cmb_dept"){$.cmb_employee.clear();if(!value){return}var strQuery=" and dept_code ='"+$.cmb_dept.getValue()+"'";var ds=bizComponentData2($,"Q4","L_CRM0052",strQuery,"","");setComboBind([$.cmb_employee],ds)}};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){if(id=="dte_start_date"){var end_date=$.dte_end_date.getValue();if(value>end_date){$.dte_end_date.setValue(value)}}else{if(id=="dte_end_date"){var start_date=$.dte_start_date.getValue();if(value<start_date){$.dte_start_date.setValue(value)}}}};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdJob"){newClick();var row=$.grdJob.getValue(rId);$.varSeq=row.seq;$.varEmployeeId=row.employee_id;$.saveType="U";$.varApproved=row.appr_status;if(row.employee_id==$.session.EmpCode){panRightControl(true);buttonControl(true)}else{panRightControl(false);buttonControl(false)}if($.session.DeptLeaderYN=="Y"&&row.employee_id!=$.session.EmpCode){$.btnApproval.setEnable(true)}else{$.btnApproval.setEnable(false)}if(row.appr_status=="Y"){$.btnApproval.setEnable(false);$.btnApproveReq.setEnable(false);$.btnDelete.setEnable(false);$.btnSave.setEnable(false)}$.type="N";$.treeEmp.setAllNoneCheck();searchJobProfile("Q_DETAIL")}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){if((id=="txt_job")&&value=="13"){$.varSel="";searchJobProfile("Q")}};$.fingeredit_lostfocus=function(id,value){};$.fingerimage_click=function(id){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panRight"){if(btnId=="btnPrint"){var rId=$.grdJob.getSelectedRowIdx();if(!$.varEmployeeId){MessageBoxShow("출력할 내역을 선택해주세요.");return}var dt={};dt.position=$.txt_position.getValue()||"";dt.report_to=$.txt_report_to.getValue()||"";dt.approved=$.txt_approved.getValue()||"";dt.approved_date=$.txt_date.getValue()||"";dt.funct=$.txt_function.getValue()||"";dt.incumbent=$.txt_incumbent.getValue()||"";var params={report:"report_crmJobProfile",isPrint:true,data:{Detail:dt,Position:$.grdPosition.getAllRows(),Scope:$.grdScope.getAllRows(),Principal:$.grdPrincipal.getAllRows(),Qualify:$.grdQualifications.getAllRows(),Dimensions:$.grdDimensions.getAllRows(),Skill:$.grdSkill.getAllRows(),Customers:$.grdCustomers.getAllRows(),Career:$.grdCareer.getAllRows(),}};g_printBrowser.callPrint(params)}}else{if(panelId=="panPosition"){if(btnId=="btnAdd"){gridAddRow($.grdPosition,"POSITION_P")}else{if(btnId=="btnDelete"){gridDelRow($.grdPosition)}}}else{if(panelId=="panScope"){if(btnId=="btnAdd"){gridAddRow($.grdScope,"SCOPE")}else{if(btnId=="btnDelete"){gridDelRow($.grdScope)}}}else{if(panelId=="panPrincipal"){if(btnId=="btnAdd"){gridAddRow($.grdPrincipal,"PRINCIPAL_R")}else{if(btnId=="btnDelete"){gridDelRow($.grdPrincipal)}}}else{if(panelId=="panQualifications"){if(btnId=="btnAdd"){gridAddRow($.grdQualifications,"QUALFI")}else{if(btnId=="btnDelete"){gridDelRow($.grdQualifications)}}}else{if(panelId=="panDimensions"){if(btnId=="btnAdd"){gridAddRow($.grdDimensions,"DIMENSIONS")}else{if(btnId=="btnDelete"){gridDelRow($.grdDimensions)}}}else{if(panelId=="panSkill"){if(btnId=="btnAdd"){gridAddRow($.grdSkill,"KNOWNSKILL")}else{if(btnId=="btnDelete"){gridDelRow($.grdSkill)}}}else{if(panelId=="panCustomers"){if(btnId=="btnAdd"){gridAddRow($.grdCustomers,"CUSTOMER_E")}else{if(btnId=="btnDelete"){gridDelRow($.grdCustomers)}}}else{if(panelId=="panCareer"){if(btnId=="btnAdd"){gridAddRow($.grdCareer,"CAREER")}else{if(btnId=="btnDelete"){gridDelRow($.grdCareer)}}}}}}}}}}}};$.fingerpopup_close=function(id){};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){if(id=="treeEmp"){var itemType=$.treeEmp.getUserData(value.id,"Type");newClick();panRightControl(false);buttonControl(false);$.grdJob.clearSelect();if(itemType=="EMP"){var deptCode=$.treeEmp.getUserData(value.id,"ParentKeyID");$.varEmployeeId=value.id;$.btnApproveReq.setEnable(false);$.btnDelete.setEnable(false);$.btnApproval.setEnable(false);if($.varEmployeeId==$.session.EmpCode){$.btnNew.setEnable(true);$.btnSave.setEnable(true);panRightControl(true);buttonControl(true)}$.type="Y";searchJobProfile("Q_DETAIL")}}};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){if(id=="treeEmp"){$.treeEmp.expandAll()}};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>