<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panList=null;$.grdEmpList=null;$.panEmpList=null;$.panInfo=null;$.panIncomeInfo=null;$.panIncomeInfo_1=null;$.panTaxFreeAmt=null;$.grdTaxFreeAmt=null;$.panBottom=null;$.lbl_year=null;$.dte_year_end_tax_yyyy=null;$.lbl_year_end_tax_type=null;$.cmb_year_end_tax_type=null;$.lbl_site_code=null;$.cmb_site_code=null;$.lbl_dept=null;$.txt_dept_code=null;$.bte_dept_name=null;$.lbl_emp=null;$.txt_emp_code=null;$.bte_emp_name=null;$.lbl_retire_month=null;$.dte_retire_month=null;$.lbl_year_end_tax_yyyy1=null;$.dte_year_end_tax_yyyy1=null;$.cmb_title=null;$.lbl_site_code1=null;$.cmb_site_code1=null;$.lbl_dept1=null;$.txt_dept_code1=null;$.bte_dept_name1=null;$.lbl_enter_date=null;$.dte_enter_date=null;$.lbl_emp1=null;$.txt_emp_code1=null;$.bte_emp_name1=null;$.lbl_retire_date=null;$.dte_retire_date=null;$.lbl_pay_amt1=null;$.spe_pay_amt1=null;$.lbl_bonus_amt1=null;$.spe_bonus_amt1=null;$.lbl_add_bonus_amt1=null;$.spe_add_bonus_amt1=null;$.lbl_income_extra1_amt1=null;$.spe_income_extra1_amt1=null;$.lbl_income_extra2_amt1=null;$.spe_income_extra2_amt1=null;$.lbl_employee_stock_amt1=null;$.spe_employee_stock_amt1=null;$.lbl_stock_profit_amt1=null;$.spe_stock_profit_amt1=null;$.lbl_pension_amt1=null;$.spe_pension_amt1=null;$.lbl_employ_insure_amt1=null;$.spe_employ_insure_amt1=null;$.lbl_health_insure_amt1=null;$.spe_health_insure_amt1=null;$.lbl_income_tax_amt1=null;$.spe_income_tax_amt1=null;$.lbl_local_tax_amt1=null;$.spe_local_tax_amt1=null;$.lbl_pay_amt=null;$.spe_pay_amt=null;$.lbl_bonus_amt=null;$.spe_bonus_amt=null;$.lbl_add_bonus_amt=null;$.spe_add_bonus_amt=null;$.lbl_income_extra1_amt=null;$.spe_income_extra1_amt=null;$.lbl_income_extra2_amt=null;$.spe_income_extra2_amt=null;$.lbl_employee_stock_amt=null;$.spe_employee_stock_amt=null;$.lbl_stock_profit_amt=null;$.spe_stock_profit_amt=null;$.lbl_pension_amt=null;$.spe_pension_amt=null;$.lbl_employ_insure_amt=null;$.spe_employ_insure_amt=null;$.lbl_health_insure_amt=null;$.spe_health_insure_amt=null;$.lbl_income_tax_amt=null;$.spe_income_tax_amt=null;$.lbl_local_tax_amt=null;$.spe_local_tax_amt=null;$.btnCreate=null;$.btnDelete=null;$.btnConfirm=null;$.btnCancel=null;$.btnSearch=null;$.initRow=false;$.empCode="";$.deleteRows=[];function createJson_Q(workType){var rId=$.grdEmpList.getSelectedRowIdx();var json=createExecuteParamInfo("HR..P_HRA1200_Q",[workType,$.dte_year_end_tax_yyyy.getValue(),$.cmb_year_end_tax_type.getValue(),$.cmb_site_code.getValue()||"",$.dte_retire_month.getValue(),$.txt_dept_code.getValue()||"",workType=="MASTER"?$.txt_emp_code.getValue()||"":$.grdEmpList.getValue(rId,"emp_code")]);return json}function createJson_S(workType){var json=createExecuteParamInfo("HR..P_HRA1200_S",[workType,$.dte_year_end_tax_yyyy.getValue(),$.cmb_year_end_tax_type.getValue(),$.txt_emp_code1.getValue(),$.cmb_site_code1.getValue(),$.txt_dept_code1.getValue(),Number($.spe_pay_amt.getValue()),Number($.spe_bonus_amt.getValue()),Number($.spe_add_bonus_amt.getValue()),Number($.spe_income_extra1_amt.getValue()),Number($.spe_income_extra2_amt.getValue()),Number($.spe_employee_stock_amt.getValue()),Number($.spe_stock_profit_amt.getValue()),Number($.spe_pension_amt.getValue()),Number($.spe_employ_insure_amt.getValue()),Number($.spe_health_insure_amt.getValue()),Number($.spe_income_tax_amt.getValue()),Number($.spe_local_tax_amt.getValue()),"#UserID#","#HostInfo#"]);return json}function createJson_S1(workType){var json;var gRow=$.grdTaxFreeAmt.getChangedRows();if($.deleteRows.length>0){for(var i in $.deleteRows){gRow.push($.deleteRows[i])}}if(gRow.length<1){return false}var rows=[];for(var i in gRow){workType=gRow[i].rowType;rows.push([workType,$.dte_year_end_tax_yyyy.getValue(),$.cmb_year_end_tax_type.getValue(),$.txt_emp_code1.getValue(),gRow[i].tax_free_code||"",Number(gRow[i].tax_free_amt),"#UserID#","#HostInfo#"])}json=createExecuteParamInfo("HR..P_HRA1200_S1",rows);return json}function createJson_S2(workType){var stremp_list="";var allRow=$.grdEmpList.getAllRows();for(var i in allRow){if(allRow[i].chk_yn=="Y"){stremp_list+=allRow[i].emp_code+"|"}}if(stremp_list.length>1){stremp_list=stremp_list.substring(0,(stremp_list.length-1))}if(stremp_list==""){MessageBoxShow("사원을 선택해주세요.");return false}var json=createExecuteParamInfo("HR..P_HRA1200_BAT",[workType,$.dte_year_end_tax_yyyy.getValue(),$.cmb_year_end_tax_type.getValue(),stremp_list,"#UserID#","#HostInfo#"]);return json}function searchHRA1200(workType){if(workType=="MASTER"){if(!$.panList.validateControls()){return}}var json=createJson_Q(workType);callQuery(["req",json],workType,$)}function saveHRA1200_S(workType){var rId=$.grdEmpList.getSelectedRowIdx();if(!rId){MessageBoxShow("해당하는 그리드 행이 존재하지 않습니다.");return}if($.grdEmpList.getValue(rId,"summary_step")=="WAIT"){MessageBoxShow("미집계 상태의 사원은 수정이 불가능합니다.");return}if(!$.panList.validateControls()||!gridValidator($.grdTaxFreeAmt,"tax_free_code")){return}var json=createJson_S(workType);callExecute(["req",json],workType,$)}function saveHRA1200_S1(workType){if(!$.panList.validateControls()){return}var json=createJson_S1(workType);if(json){callExecute(["req",json],workType,$)}else{MessageBoxShow("정상적으로 등록되었습니다.");$.initRow=true;saveButton(false);queryClick()}}function saveHRA1200_BAT(workType){if(!$.panList.validateControls()){return}var json=createJson_S2(workType);if(json){callExecute(["req",json],"BOTTOM",$)}}function queryClick(){searchHRA1200("MASTER")}function newClick(){$.panInfo.clear();$.panIncomeInfo.clear();$.panIncomeInfo_1.clear();$.grdTaxFreeAmt.clear()}function saveButton(bo){if(bo){$.panInfo.enableButton(["btnSave"])}else{$.panInfo.disableButton(["btnSave"])}}function gridValidator(){if(arguments.length<2){return false}var grdName=arguments[0];for(var i=0;i<grdName.getRowCount();i++){for(var j=1;j<arguments.length;j++){if(grdName.getValue(i,arguments[j])==""||grdName.getValue(i,arguments[j])==null){MessageBoxShow(grdName.getColumnText(arguments[j])+" 은(는) 필수 입력항목입니다");return false}}}return true}function getObjectDate(objDate){var year=parseInt(objDate.year)+1900;var month=parseInt(objDate.month)+1;var date=objDate.date;if(parseInt(month)<10){month="0"+month}if(parseInt(date)<10){date="0"+date}return year+""+month+""+date}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,840);$.panMain.setText("");$.panMain.setBottomLine(true);$.panList=new FingerPanel(host,"panList",0,0,340,210);$.panList.setText("조회조건");$.panList.setBottomLine(true);$.grdEmpList=new FingerDataGrid(host,"grdEmpList",0,0,340,543);$.panEmpList=new FingerPanel(host,"panEmpList",0,220,340,543);$.panEmpList.setText("");$.panEmpList.setBottomLine(true);$.panInfo=new FingerPanel(host,"panInfo",350,0,850,155);$.panInfo.setText("인적사항");$.panInfo.setBottomLine(true);$.panIncomeInfo=new FingerPanel(host,"panIncomeInfo",350,165,420,440);$.panIncomeInfo.setText("원본내역");$.panIncomeInfo.setBottomLine(true);$.panIncomeInfo_1=new FingerPanel(host,"panIncomeInfo_1",780,165,420,440);$.panIncomeInfo_1.setText("조정내역");$.panIncomeInfo_1.setBottomLine(true);$.panTaxFreeAmt=new FingerPanel(host,"panTaxFreeAmt",350,615,850,210);$.panTaxFreeAmt.setText("비과세내역");$.panTaxFreeAmt.setBottomLine(true);$.grdTaxFreeAmt=new FingerDataGrid(host,"grdTaxFreeAmt",0,0,850,165);$.panBottom=new FingerPanel(host,"panBottom",0,773,340,55);$.panBottom.setText("");$.panBottom.setBottomLine(true);$.lbl_year=new FingerLabel(host,"lbl_year",0,10,100,20);$.lbl_year.setText("정산연도");$.dte_year_end_tax_yyyy=new FingerDateEdit(host,"dte_year_end_tax_yyyy",105,10,130,20);$.lbl_year_end_tax_type=new FingerLabel(host,"lbl_year_end_tax_type",0,40,100,20);$.lbl_year_end_tax_type.setText("정산구분");$.cmb_year_end_tax_type=new FingerComboBox(host,"cmb_year_end_tax_type",105,40,130,20);$.lbl_site_code=new FingerLabel(host,"lbl_site_code",0,70,100,20);$.lbl_site_code.setText("사업장");$.cmb_site_code=new FingerComboBox(host,"cmb_site_code",105,70,203,20);$.lbl_dept=new FingerLabel(host,"lbl_dept",0,100,100,20);$.lbl_dept.setText("부서");$.txt_dept_code=new FingerEdit(host,"txt_dept_code",105,100,65,20);$.bte_dept_name=new FingerButtonEdit(host,"bte_dept_name",175,100,130,20);$.bte_dept_name.setText("");$.lbl_emp=new FingerLabel(host,"lbl_emp",0,130,100,20);$.lbl_emp.setText("사원");$.txt_emp_code=new FingerEdit(host,"txt_emp_code",105,130,65,20);$.bte_emp_name=new FingerButtonEdit(host,"bte_emp_name",175,130,130,20);$.bte_emp_name.setText("");$.lbl_retire_month=new FingerLabel(host,"lbl_retire_month",245,5,65,20);$.lbl_retire_month.setText("퇴직년월");$.dte_retire_month=new FingerDateEdit(host,"dte_retire_month",245,35,90,20);$.lbl_year_end_tax_yyyy1=new FingerLabel(host,"lbl_year_end_tax_yyyy1",0,10,100,20);$.lbl_year_end_tax_yyyy1.setText("정산연도");$.dte_year_end_tax_yyyy1=new FingerDateEdit(host,"dte_year_end_tax_yyyy1",105,10,130,20);$.cmb_title=new FingerComboBox(host,"cmb_title",300,10,75,20);$.lbl_site_code1=new FingerLabel(host,"lbl_site_code1",370,10,100,20);$.lbl_site_code1.setText("사업장");$.cmb_site_code1=new FingerComboBox(host,"cmb_site_code1",475,10,190,20);$.lbl_dept1=new FingerLabel(host,"lbl_dept1",0,40,100,20);$.lbl_dept1.setText("부서");$.txt_dept_code1=new FingerEdit(host,"txt_dept_code1",105,40,95,20);$.bte_dept_name1=new FingerButtonEdit(host,"bte_dept_name1",205,40,170,20);$.bte_dept_name1.setText("");$.lbl_enter_date=new FingerLabel(host,"lbl_enter_date",380,40,90,20);$.lbl_enter_date.setText("입사일");$.dte_enter_date=new FingerDateEdit(host,"dte_enter_date",475,40,140,20);$.lbl_emp1=new FingerLabel(host,"lbl_emp1",0,70,100,20);$.lbl_emp1.setText("사원");$.txt_emp_code1=new FingerEdit(host,"txt_emp_code1",105,70,95,20);$.bte_emp_name1=new FingerButtonEdit(host,"bte_emp_name1",205,70,170,20);$.bte_emp_name1.setText("");$.lbl_retire_date=new FingerLabel(host,"lbl_retire_date",380,70,90,20);$.lbl_retire_date.setText("퇴사일");$.dte_retire_date=new FingerDateEdit(host,"dte_retire_date",475,70,140,20);$.lbl_pay_amt1=new FingerLabel(host,"lbl_pay_amt1",0,10,130,20);$.lbl_pay_amt1.setText("급여");$.spe_pay_amt1=new FingerSpinEdit(host,"spe_pay_amt1",135,10,215,20);$.lbl_bonus_amt1=new FingerLabel(host,"lbl_bonus_amt1",0,40,130,20);$.lbl_bonus_amt1.setText("상여");$.spe_bonus_amt1=new FingerSpinEdit(host,"spe_bonus_amt1",135,40,215,20);$.lbl_add_bonus_amt1=new FingerLabel(host,"lbl_add_bonus_amt1",0,70,130,20);$.lbl_add_bonus_amt1.setText("인정상여");$.spe_add_bonus_amt1=new FingerSpinEdit(host,"spe_add_bonus_amt1",135,70,215,20);$.lbl_income_extra1_amt1=new FingerLabel(host,"lbl_income_extra1_amt1",0,100,130,20);$.lbl_income_extra1_amt1.setText("기타소득1");$.spe_income_extra1_amt1=new FingerSpinEdit(host,"spe_income_extra1_amt1",135,100,215,20);$.lbl_income_extra2_amt1=new FingerLabel(host,"lbl_income_extra2_amt1",0,130,130,20);$.lbl_income_extra2_amt1.setText("기타소득2");$.spe_income_extra2_amt1=new FingerSpinEdit(host,"spe_income_extra2_amt1",135,130,215,20);$.lbl_employee_stock_amt1=new FingerLabel(host,"lbl_employee_stock_amt1",0,160,130,15);$.lbl_employee_stock_amt1.setText("우리사주 조합</br>인출금");$.spe_employee_stock_amt1=new FingerSpinEdit(host,"spe_employee_stock_amt1",135,165,215,20);$.lbl_stock_profit_amt1=new FingerLabel(host,"lbl_stock_profit_amt1",0,200,130,15);$.lbl_stock_profit_amt1.setText("주식매수 선택권</br>행사이익");$.spe_stock_profit_amt1=new FingerSpinEdit(host,"spe_stock_profit_amt1",135,200,215,20);$.lbl_pension_amt1=new FingerLabel(host,"lbl_pension_amt1",0,235,130,20);$.lbl_pension_amt1.setText("국민연금");$.spe_pension_amt1=new FingerSpinEdit(host,"spe_pension_amt1",135,235,215,20);$.lbl_employ_insure_amt1=new FingerLabel(host,"lbl_employ_insure_amt1",0,265,130,20);$.lbl_employ_insure_amt1.setText("고용보험");$.spe_employ_insure_amt1=new FingerSpinEdit(host,"spe_employ_insure_amt1",135,265,215,20);$.lbl_health_insure_amt1=new FingerLabel(host,"lbl_health_insure_amt1",0,295,130,20);$.lbl_health_insure_amt1.setText("건강보험");$.spe_health_insure_amt1=new FingerSpinEdit(host,"spe_health_insure_amt1",135,295,215,20);$.lbl_income_tax_amt1=new FingerLabel(host,"lbl_income_tax_amt1",0,325,130,20);$.lbl_income_tax_amt1.setText("소득세");$.spe_income_tax_amt1=new FingerSpinEdit(host,"spe_income_tax_amt1",135,325,215,20);$.lbl_local_tax_amt1=new FingerLabel(host,"lbl_local_tax_amt1",0,355,130,20);$.lbl_local_tax_amt1.setText("주민세");$.spe_local_tax_amt1=new FingerSpinEdit(host,"spe_local_tax_amt1",135,355,215,20);$.lbl_pay_amt=new FingerLabel(host,"lbl_pay_amt",0,10,130,20);$.lbl_pay_amt.setText("급여");$.spe_pay_amt=new FingerSpinEdit(host,"spe_pay_amt",135,10,215,20);$.lbl_bonus_amt=new FingerLabel(host,"lbl_bonus_amt",0,40,130,20);$.lbl_bonus_amt.setText("상여");$.spe_bonus_amt=new FingerSpinEdit(host,"spe_bonus_amt",135,40,215,20);$.lbl_add_bonus_amt=new FingerLabel(host,"lbl_add_bonus_amt",0,70,130,20);$.lbl_add_bonus_amt.setText("인정상여");$.spe_add_bonus_amt=new FingerSpinEdit(host,"spe_add_bonus_amt",135,70,215,20);$.lbl_income_extra1_amt=new FingerLabel(host,"lbl_income_extra1_amt",0,100,130,20);$.lbl_income_extra1_amt.setText("기타소득1");$.spe_income_extra1_amt=new FingerSpinEdit(host,"spe_income_extra1_amt",135,100,215,20);$.lbl_income_extra2_amt=new FingerLabel(host,"lbl_income_extra2_amt",0,130,130,20);$.lbl_income_extra2_amt.setText("기타소득2");$.spe_income_extra2_amt=new FingerSpinEdit(host,"spe_income_extra2_amt",135,130,215,20);$.lbl_employee_stock_amt=new FingerLabel(host,"lbl_employee_stock_amt",0,165,130,15);$.lbl_employee_stock_amt.setText("우리사주 조합</br>인출금");$.spe_employee_stock_amt=new FingerSpinEdit(host,"spe_employee_stock_amt",135,165,215,20);$.lbl_stock_profit_amt=new FingerLabel(host,"lbl_stock_profit_amt",0,200,130,15);$.lbl_stock_profit_amt.setText("주식매수 선택권</br>행사이익");$.spe_stock_profit_amt=new FingerSpinEdit(host,"spe_stock_profit_amt",135,200,215,20);$.lbl_pension_amt=new FingerLabel(host,"lbl_pension_amt",0,235,130,20);$.lbl_pension_amt.setText("국민연금");$.spe_pension_amt=new FingerSpinEdit(host,"spe_pension_amt",135,235,215,20);$.lbl_employ_insure_amt=new FingerLabel(host,"lbl_employ_insure_amt",0,265,130,20);$.lbl_employ_insure_amt.setText("고용보험");$.spe_employ_insure_amt=new FingerSpinEdit(host,"spe_employ_insure_amt",135,265,215,20);$.lbl_health_insure_amt=new FingerLabel(host,"lbl_health_insure_amt",0,295,130,20);$.lbl_health_insure_amt.setText("건강보험");$.spe_health_insure_amt=new FingerSpinEdit(host,"spe_health_insure_amt",135,295,215,20);$.lbl_income_tax_amt=new FingerLabel(host,"lbl_income_tax_amt",0,325,130,20);$.lbl_income_tax_amt.setText("소득세");$.spe_income_tax_amt=new FingerSpinEdit(host,"spe_income_tax_amt",135,325,215,20);$.lbl_local_tax_amt=new FingerLabel(host,"lbl_local_tax_amt",0,355,130,20);$.lbl_local_tax_amt.setText("주민세");$.spe_local_tax_amt=new FingerSpinEdit(host,"spe_local_tax_amt",135,355,215,20);$.btnCreate=new FingerButton(host,"btnCreate",10,15,95,20);$.btnCreate.setText("집계");$.btnDelete=new FingerButton(host,"btnDelete",92,15,95,20);$.btnDelete.setText("집계취소");$.btnConfirm=new FingerButton(host,"btnConfirm",173,15,95,20);$.btnConfirm.setText("집계확정");$.btnCancel=new FingerButton(host,"btnCancel",255,15,95,20);$.btnCancel.setText("확정취소");$.btnSearch=new FingerButton(host,"btnSearch",260,-37.5,80,20);$.btnSearch.setText("조회");$.panBottom.setBorder(true);$.panInfo.addButtons(["btnDelete","btnSave"]);$.panTaxFreeAmt.addButtons(["btnDelete","btnAdd"]);$.dte_year_end_tax_yyyy.setDateFormat("yyyy");$.dte_year_end_tax_yyyy1.setDateFormat("yyyy");$.dte_retire_month.setDateFormat("yyyymm");$.cmb_year_end_tax_type.setEmptyRow(true);$.cmb_site_code.setEmptyRow(true);$.cmb_site_code1.setEmptyRow(true);$.dte_year_end_tax_yyyy.setAllowBlank(false,"정산연도");$.cmb_year_end_tax_type.setAllowBlank(false,"정산구분");$.dte_year_end_tax_yyyy1.setReadOnly(true);$.cmb_title.setEnable(false);$.cmb_site_code1.setEnable(false);$.txt_dept_code1.setReadOnly(true);$.bte_dept_name1.setReadOnly(true);$.dte_enter_date.setReadOnly(true);$.txt_emp_code1.setReadOnly(true);$.bte_emp_name1.setReadOnly(true);$.dte_retire_date.setReadOnly(true);$.spe_pay_amt1.setEnable(false);$.spe_bonus_amt1.setEnable(false);$.spe_add_bonus_amt1.setEnable(false);$.spe_income_extra1_amt1.setEnable(false);$.spe_income_extra2_amt1.setEnable(false);$.spe_employee_stock_amt1.setEnable(false);$.spe_stock_profit_amt1.setEnable(false);$.spe_pension_amt1.setEnable(false);$.spe_employ_insure_amt1.setEnable(false);$.spe_health_insure_amt1.setEnable(false);$.spe_income_tax_amt1.setEnable(false);$.spe_local_tax_amt1.setEnable(false);$.lbl_retire_month.setVisible(false);$.dte_retire_month.setVisible(false);$.cmb_title.setVisible(false);$.grdEmpList.setColumns([new FingerDataGridColumn("chk_yn",40,"center","checkbox","masterCheckbox"),new FingerDataGridColumn("emp_code",70,"left","string","사번"),new FingerDataGridColumn("emp_full_name",70,"left","string","이름"),new FingerDataGridColumn("summary_step",70,"left","string","상태"),new FingerDataGridColumn("retire_date",90,"left","string","퇴사일",{format:"s_ymd"})]);$.grdEmpList.init({scroll:"xy"});$.grdEmpList.setEditable(false);$.grdEmpList.setBorder(true);$.grdTaxFreeAmt.setColumns([new FingerDataGridColumn("tax_free_code",150,"left","string",[{text:"비과세코드",css:"col_chk"}],{readonly:true}),new FingerDataGridColumn("tax_free_name",150,"left","string","비과세약칭",{readonly:true}),new FingerDataGridColumn("tax_free_amt",150,"right","int","비과세금액",{format:"int"}),new FingerDataGridColumn("tax_free_descr",483,"left","string","비과세설명",{readonly:true})]);$.grdTaxFreeAmt.init({scroll:"xy",eventCellReadOnly:true});$.grdTaxFreeAmt.setEditable(true);$.grdTaxFreeAmt.setBorder(false);$.host=host;$.args=args};$.start=function(){$.panMain.add($.panList);$.panMain.add($.panEmpList);$.panMain.add($.panInfo);$.panMain.add($.panIncomeInfo);$.panMain.add($.panIncomeInfo_1);$.panMain.add($.panTaxFreeAmt);$.panMain.add($.panBottom);$.panList.add($.bte_emp_name);$.panList.add($.cmb_site_code);$.panList.add($.cmb_year_end_tax_type);$.panList.add($.dte_year_end_tax_yyyy);$.panList.add($.lbl_dept);$.panList.add($.lbl_emp);$.panList.add($.lbl_site_code);$.panList.add($.lbl_year);$.panList.add($.lbl_year_end_tax_type);$.panList.add($.txt_emp_code);$.panList.add($.txt_dept_code);$.panList.add($.lbl_retire_month);$.panList.add($.dte_retire_month);$.panList.add($.bte_dept_name);$.panList.add($.btnSearch);$.panEmpList.add($.grdEmpList);$.panInfo.add($.bte_dept_name1);$.panInfo.add($.bte_emp_name1);$.panInfo.add($.cmb_site_code1);$.panInfo.add($.cmb_title);$.panInfo.add($.dte_enter_date);$.panInfo.add($.dte_retire_date);$.panInfo.add($.dte_year_end_tax_yyyy1);$.panInfo.add($.lbl_dept1);$.panInfo.add($.lbl_emp1);$.panInfo.add($.lbl_enter_date);$.panInfo.add($.lbl_retire_date);$.panInfo.add($.lbl_site_code1);$.panInfo.add($.lbl_year_end_tax_yyyy1);$.panInfo.add($.txt_dept_code1);$.panInfo.add($.txt_emp_code1);$.panIncomeInfo.add($.lbl_add_bonus_amt1);$.panIncomeInfo.add($.lbl_bonus_amt1);$.panIncomeInfo.add($.lbl_employ_insure_amt1);$.panIncomeInfo.add($.lbl_employee_stock_amt1);$.panIncomeInfo.add($.lbl_health_insure_amt1);$.panIncomeInfo.add($.lbl_income_extra1_amt1);$.panIncomeInfo.add($.lbl_income_extra2_amt1);$.panIncomeInfo.add($.lbl_income_tax_amt1);$.panIncomeInfo.add($.lbl_local_tax_amt1);$.panIncomeInfo.add($.lbl_pay_amt1);$.panIncomeInfo.add($.lbl_pension_amt1);$.panIncomeInfo.add($.lbl_stock_profit_amt1);$.panIncomeInfo.add($.spe_add_bonus_amt1);$.panIncomeInfo.add($.spe_bonus_amt1);$.panIncomeInfo.add($.spe_employ_insure_amt1);$.panIncomeInfo.add($.spe_employee_stock_amt1);$.panIncomeInfo.add($.spe_health_insure_amt1);$.panIncomeInfo.add($.spe_income_extra1_amt1);$.panIncomeInfo.add($.spe_income_extra2_amt1);$.panIncomeInfo.add($.spe_income_tax_amt1);$.panIncomeInfo.add($.spe_local_tax_amt1);$.panIncomeInfo.add($.spe_pay_amt1);$.panIncomeInfo.add($.spe_pension_amt1);$.panIncomeInfo.add($.spe_stock_profit_amt1);$.panIncomeInfo_1.add($.spe_local_tax_amt);$.panIncomeInfo_1.add($.lbl_local_tax_amt);$.panIncomeInfo_1.add($.spe_income_tax_amt);$.panIncomeInfo_1.add($.lbl_income_tax_amt);$.panIncomeInfo_1.add($.spe_health_insure_amt);$.panIncomeInfo_1.add($.lbl_health_insure_amt);$.panIncomeInfo_1.add($.spe_employ_insure_amt);$.panIncomeInfo_1.add($.lbl_employ_insure_amt);$.panIncomeInfo_1.add($.spe_pension_amt);$.panIncomeInfo_1.add($.lbl_pension_amt);$.panIncomeInfo_1.add($.spe_stock_profit_amt);$.panIncomeInfo_1.add($.lbl_stock_profit_amt);$.panIncomeInfo_1.add($.spe_employee_stock_amt);$.panIncomeInfo_1.add($.lbl_employee_stock_amt);$.panIncomeInfo_1.add($.spe_income_extra2_amt);$.panIncomeInfo_1.add($.lbl_income_extra2_amt);$.panIncomeInfo_1.add($.spe_income_extra1_amt);$.panIncomeInfo_1.add($.lbl_income_extra1_amt);$.panIncomeInfo_1.add($.spe_add_bonus_amt);$.panIncomeInfo_1.add($.lbl_add_bonus_amt);$.panIncomeInfo_1.add($.spe_bonus_amt);$.panIncomeInfo_1.add($.lbl_bonus_amt);$.panIncomeInfo_1.add($.spe_pay_amt);$.panIncomeInfo_1.add($.lbl_pay_amt);$.panTaxFreeAmt.add($.grdTaxFreeAmt);$.panBottom.add($.btnCreate);$.panBottom.add($.btnDelete);$.panBottom.add($.btnConfirm);$.panBottom.add($.btnCancel);relocateChildIndexInPanel([$.panIncomeInfo_1]);var ds=bizComponentData2($,"Q1","L_ORG001|L_ORG001|L_HRA029|L_HRA046|L_HRA041");$.cmb_site_code.setColumn("site_code","site_name");$.cmb_site_code1.setColumn("site_code","site_name");setComboBind([$.cmb_site_code,$.cmb_site_code1,$.cmb_year_end_tax_type],ds);$.grdEmpList.setColumnDropDownList("summary_step",ds.resultList[3]);var title=ds.resultList[4];if(title.length>0){$.lbl_income_extra1_amt.setText(title[0].code_name);$.lbl_income_extra1_amt1.setText(title[0].code_name);if(title.length>1){$.lbl_income_extra2_amt.setText(title[1].code_name);$.lbl_income_extra2_amt1.setText(title[1].code_name)}}var strDate=getCalcMonth(getToday(""),-12);$.dte_year_end_tax_yyyy.setValue(strDate);$.dte_retire_month.setValue(strDate.substring(0,4)+"12");$.cmb_site_code.setValue(g_main.session.obj.SiteCode);saveButton(false)};$.callback=function(type,ds){if(type=="MASTER"){setDataGrid([$.grdEmpList],ds);if($.grdEmpList.getRowCount()<1){newClick()}else{var rIndex=0;if($.initRow){rIndex=$.grdEmpList.getGridRowIndex("emp_code",$.empCode)}$.grdEmpList.selectRow(rIndex)}$.deleteRows=[];$.initRow=false}else{if(type=="DETAIL"){if(ds&&ds.errorCode=="MSG0001"){var rs1=ds.resultList[1];if(ds.resultList[0].length>0){var rs=ds.resultList[0][0];$.dte_year_end_tax_yyyy1.setValue(rs.year_end_tax_yyyy);$.cmb_site_code1.setValue(rs.site_code);$.txt_dept_code1.setValue(rs.dept_code);$.bte_dept_name1.setText(rs.dept_name);$.dte_enter_date.setValue(rs.enter_date);$.txt_emp_code1.setValue(rs.emp_code);$.bte_emp_name1.setText(rs.emp_full_name);$.dte_retire_date.setValue(rs.retire_date);$.spe_pay_amt1.setValue(rs.pay_original_amt);$.spe_bonus_amt1.setValue(rs.bonus_original_amt);$.spe_add_bonus_amt1.setValue(rs.add_bonus_original_amt);$.spe_income_extra1_amt1.setValue(rs.income_extra1_original_amt);$.spe_income_extra2_amt1.setValue(rs.income_extra2_original_amt);$.spe_employee_stock_amt1.setValue(rs.employee_stock_original_amt);$.spe_stock_profit_amt1.setValue(rs.stock_profit_original_amt);$.spe_pension_amt1.setValue(rs.pension_original_amt);$.spe_employ_insure_amt1.setValue(rs.employ_insure_original_amt);$.spe_health_insure_amt1.setValue(rs.health_insure_original_amt);$.spe_income_tax_amt1.setValue(rs.income_tax_original_amt);$.spe_local_tax_amt1.setValue(rs.local_tax_original_amt);$.spe_pay_amt.setValue(rs.pay_amt);$.spe_bonus_amt.setValue(rs.bonus_amt);$.spe_add_bonus_amt.setValue(rs.add_bonus_amt);$.spe_income_extra1_amt.setValue(rs.income_extra1_amt);$.spe_income_extra2_amt.setValue(rs.income_extra2_amt);$.spe_employee_stock_amt.setValue(rs.employee_stock_amt);$.spe_stock_profit_amt.setValue(rs.stock_profit_amt);$.spe_pension_amt.setValue(rs.pension_amt);$.spe_employ_insure_amt.setValue(rs.employ_insure_amt);$.spe_health_insure_amt.setValue(rs.health_insure_amt);$.spe_income_tax_amt.setValue(rs.income_tax_amt);$.spe_local_tax_amt.setValue(rs.local_tax_amt)}if(ds.resultList[1].length>0){setDataGrid([$.grdTaxFreeAmt],ds.resultList[1],true)}else{$.grdTaxFreeAmt.clear()}}else{newClick()}}else{if(type=="BOTTOM"){if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg);return}else{if(ds.errorCode=="MSG0002"){MessageBoxShow("정상적으로 등록되었습니다.");queryClick()}else{if(ds.errorCode=="MSG0029"){MessageBoxShow("등록된 레코드가 없습니다.");queryClick()}}}}else{if(type=="U"){$.empCode=$.txt_emp_code1.getValue();if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg);return}else{saveHRA1200_S1("")}}else{if(type==""){log(ds);if(ds){var rs=ds.resultList;var msg="정상적으로 등록되었습니다.";if(rs.length>1){for(var i in rs){if(rs[i].errorCode.substring(0,1)=="P"||rs[i].errorCode.substring(0,1)=="E"){msg=rs[i].errorCode+"</br>"+rs[i].errorMsg}}}else{if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){msg=ds.errorCode+"</br>"+ds.errorMsg}}MessageBoxShow(msg);$.initRow=true;saveButton(false);queryClick()}}else{if(type=="D"){$.empCode=$.txt_emp_code1.getValue();if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg);return}else{if(ds.errorCode=="MSG0003"){MessageBoxShow("정상적으로 삭제되었습니다.")}else{if(ds.errorCode=="MSG0031"){MessageBoxShow("삭제된 레코드가 없습니다.")}}}$.initRow=true;saveButton(false);queryClick()}}}}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){queryClick()}else{if(id=="btnCreate"){confirmBoxShow("집계 하시겠습니까?",function(){if(g_main.msgShare==true){saveHRA1200_BAT("CREATE")}})}else{if(id=="btnDelete"){confirmBoxShow("집계취소시 기존에 집계된 데이터가 삭제됩니다. 취소하시겠습니까?",function(){if(g_main.msgShare==true){saveHRA1200_BAT("DELETE")}})}else{if(id=="btnConfirm"){confirmBoxShow("집계확정 하시겠습니까?",function(){if(g_main.msgShare==true){saveHRA1200_BAT("CONFIRM")}})}else{if(id=="btnCancel"){confirmBoxShow("확정취소 하시겠습니까?",function(){if(g_main.msgShare==true){saveHRA1200_BAT("CANCEL")}})}}}}}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){$.popUpCallId=id;if(id=="bte_dept_name"){var param={dept_name:$.bte_dept_name.getText()||"",};g_main.openPopup("popDept.html","popDept","",0,0,"","",param,"","")}else{if(id=="bte_emp_name"){var param={emp_name:$.bte_emp_name.getText()||"",};g_main.openPopup("popEmp.html","popEmp","",0,0,"","",param,"","")}}};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){if(id=="grdTaxFreeAmt"){if(cInd=="tax_free_code"||cInd=="tax_free_name"){if($.grdTaxFreeAmt.getRowStatus(rId)=="N"){$.popUpCallId=id;$.varId=rId;var param={tax_free_code:$.grdTaxFreeAmt.getValue(rId,"tax_free_code")||""};g_main.openPopup("popTaxInfo.html","popTaxInfo","",0,0,"","",param,"","")}}}else{if(id=="grdEmpList"){if(cInd=="chk_yn"){if($.grdEmpList.getValue(rId,"chk_yn")=="N"){$.grdEmpList.setValue(rId,"chk_yn","Y")}else{$.grdEmpList.setValue(rId,"chk_yn","N")}$.grdEmpList.selectRow(rId)}}}};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdEmpList"){$.deleteRows=[];saveButton(false);searchHRA1200("DETAIL")}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){if(id=="grdTaxFreeAmt"){saveButton(true);if(cInd=="tax_free_amt"){var inputData=nValue.toString();if(inputData.trim()==""||isNaN(inputData)){$.grdTaxFreeAmt.setValue(rId,cInd,oValue)}}}else{if(id=="grdEmpList"){if(cInd=="chk_yn"){}}}};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){if(id=="txt_dept_code"||id=="txt_emp_code"){return}saveButton(true)};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerimage_click=function(id){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panInfo"){if(btnId=="btnSave"){confirmBoxShow("저장하시겠습니까?",function(){if(g_main.msgShare==true){saveHRA1200_S("U")}})}else{if(btnId=="btnDelete"){confirmBoxShow($.bte_emp_name1.getValue()+" 정보를 삭제하시겠습니까?",function(){if(g_main.msgShare==true){saveHRA1200_S("D")}})}}}else{if(panelId=="panTaxFreeAmt"){if(btnId=="btnAdd"){$.grdTaxFreeAmt.addRow({tax_free_name:"",tax_free_amt:"0",tax_free_descr:""});saveButton(true)}else{if(btnId=="btnDelete"){var rId=$.grdTaxFreeAmt.getSelectedRowIdx();if(!rId){return}if($.grdTaxFreeAmt.getRowStatus(rId)!="N"){confirmBoxShow("정말 삭제하시겠습니까?",function(){if(g_main.msgShare==true){$.grdTaxFreeAmt.getItem(rId).rowType="D";$.deleteRows.push($.grdTaxFreeAmt.getValue(rId));$.grdTaxFreeAmt.deleteCurrentRow();saveButton(true)}})}else{$.grdTaxFreeAmt.deleteCurrentRow()}}}}}};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(popResult){if(id=="popDept"){if($.popUpCallId=="bte_dept_name"){$.bte_dept_name.setText(popResult.dept_name);$.txt_dept_code.setValue(popResult.dept_code)}}else{if(id=="popEmp"){if($.popUpCallId=="bte_emp_name"){$.bte_emp_name.setText(popResult.emp_name);$.txt_emp_code.setValue(popResult.employee_id)}}else{if(id=="popTaxInfo"){log(popResult);if($.popUpCallId=="grdTaxFreeAmt"){$.grdTaxFreeAmt.setValue($.varId,"tax_free_code",popResult.tax_free_code);$.grdTaxFreeAmt.setValue($.varId,"tax_free_name",popResult.tax_free_name);$.grdTaxFreeAmt.setValue($.varId,"tax_free_descr",popResult.tax_free_descr)}}}}}};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){}};</script>