<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panMaster=null;$.panList1=null;$.panList2=null;$.grdMaster=null;$.grdList2=null;$.btnSearch=null;$.lbljob_yyyy=null;$.ymdjob_yyyy=null;$.lblsite_code=null;$.cmbsite_code=null;$.lblearner_code=null;$.txtearner_code=null;$.txtearner_name=null;$.lblsocial_no=null;$.txtsocial_no=null;$.lbljob_yyyy1=null;$.ymdjob_yyyy1=null;$.lblsite_code1=null;$.cmbsite_code1=null;$.lblearner_code1=null;$.txtearner_code1=null;$.txtearner_name1=null;$.lblstatus=null;$.cmbstatus=null;$.lblsocial_no1=null;$.txtsocial_no1=null;$.lblbusiness_type=null;$.cmbbusiness_type=null;$.lblcomp_name=null;$.txtcomp_name=null;$.lblbiz_regno1=null;$.txtbiz_regno1=null;$.lblreside_type=null;$.cmbreside_type=null;$.lblnation_code=null;$.cmbnation_code=null;$.lblincome_type=null;$.cmbincome_type=null;$.deleteRow=[];function newClick(){$.panList1.clear();$.grdList2.clear();fnControlSetting(true);$.ymdjob_yyyy1.setValue(getToday());$.cmbsite_code1.setValue(g_main.session.obj.SiteCode);$.cmbnation_code.setValue("KR");$.txtearner_code1.setFocus();$.txtearner_name1.setAllowBlank(false,"소득자이름");$.deleteRow=[];$.strEarner=false;$.strStatus1="N"}function fnControlSetting(bNew){$.ymdjob_yyyy1.setEnable(bNew);$.txtearner_code1.setEnable(bNew);$.txtearner_name1.setEnable(bNew);$.cmbsite_code1.setReadOnly(!bNew);$.cmbstatus.setReadOnly(!bNew);$.cmbbusiness_type.setEnable(bNew);$.txtcomp_name.setReadOnly(!bNew);$.cmbreside_type.setEnable(bNew);$.cmbnation_code.setEnable(bNew);$.txtbiz_regno1.setReadOnly(!bNew)}function QueryClick(){$.deleteRow=[];$.panList1.disableButton(["btnSave"]);fnQRY_P_HRA2200_Q("MASTER")}function fnQRY_P_HRA2200_Q(workType){var json=createJSON_Q(workType);callQuery(["req",json],workType,$)}function createJSON_Q(workType){var rId1=$.grdMaster.getSelectedRowIdx();var rId2=$.grdList2.getSelectedRowIdx();var json=createExecuteParamInfo("HR..P_HRA2200_Q",[workType,workType=="MASTER"?$.ymdjob_yyyy.getValue():$.grdMaster.getValue(rId1,"job_yyyy"),workType=="MASTER"?$.txtearner_code.getValue():$.grdMaster.getValue(rId1,"earner_code"),$.cmbsite_code.getValue(),$.txtsocial_no.getValue()?$.txtsocial_no.getValue().replace("-",""):""]);return json}function fnSET_P_HRA2200_S1(workType){if(!$.panList1.validateControls()){return false}if($.grdList2.getRowCount()>0){if(!gridValidator($.grdList2,"pay_date","income_type","declaration_yyyymm")){return false}}var json=createJSON_S1(workType);var ds=callExecuteSync(["req",json],workType,$);if(ds){if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg);return false}else{return true}}}function createJSON_S1(workType){var json=createExecuteParamInfo("HR..P_HRA2200_S1",[workType,$.ymdjob_yyyy1.getValue()||"",$.txtearner_code1.getValue()||"",$.cmbstatus.getValue()||"",$.cmbsite_code1.getValue()||"",$.cmbbusiness_type.getValue()||"",$.cmbreside_type.getValue()||"",$.cmbnation_code.getValue()||"",$.txtcomp_name.getValue()||"",$.txtbiz_regno1.getValue()||"",$.cmbincome_type.getValue()||"","#UserID#","#HostInfo#"]);return json}function fnSET_P_HRA2200_S2(workType){var json=createJSON_S2(workType);if(json){var ds=callExecuteSync(["req",json],workType,$);if(ds){var rs=ds.resultList;if(rs.length>1){for(var i in rs){if(rs[i].errorCode.substring(0,1)=="P"||rs[i].errorCode.substring(0,1)=="E"){MessageBoxShow(rs[i].errorCode+"</br>"+rs[i].errorMsg);return false}}}else{if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg);return false}}return true}else{return false}}return true}function createJSON_S2(workType){var json="";var changedRows=$.grdList2.getChangedRows();var rows=[];if($.deleteRow.length>0){for(var i in $.deleteRow){changedRows.push($.deleteRow[i])}}if(changedRows.length==0){return false}for(var i in changedRows){workType=changedRows[i].rowType;rows.push([workType,$.ymdjob_yyyy1.getValue(),$.txtearner_code1.getValue(),Number(changedRows[i].seq),getFormatDate(changedRows[i].pay_date,"yyyyMMdd"),changedRows[i].job_mm,changedRows[i].income_type,Number(changedRows[i].tax_rate),Number(changedRows[i].total_pay_amt),Number(changedRows[i].income_tax_amt),Number(changedRows[i].local_tax_amt),Number(changedRows[i].total_tax_Amt),changedRows[i].memo||"",changedRows[i].remark||"",changedRows[i].declaration_yyyymm.replace("-",""),"#UserID#","#HostInfo#"])}json=createExecuteParamInfo("HR..P_HRA2200_S2",rows);return json}function income_tax_amt_Calc(rId){var dIncomeAmt=Number($.grdList2.getValue(rId,"total_pay_amt"));var dTaxRate=Number($.grdList2.getValue(rId,"tax_rate"));var dIncome_tax_amt=Math.floor(dIncomeAmt*(dTaxRate/100));var str_dIncome_tax_amt=dIncome_tax_amt.toString();var dIncome_tax_amt_won=Number(str_dIncome_tax_amt.substr(str_dIncome_tax_amt.length-1,1));dIncome_tax_amt=dIncome_tax_amt-dIncome_tax_amt_won;$.grdList2.setValue(rId,"income_tax_amt",dIncome_tax_amt);local_tax_amt_Calc(rId)}function local_tax_amt_Calc(rId){var dTaxAmt=Number($.grdList2.getValue(rId,"income_tax_amt"));var dLocal_tax_amt=Math.floor(dTaxAmt/10);var str_dLocal_tax_amt=dLocal_tax_amt.toString();var dLocal_tax_amt_won=Number(str_dLocal_tax_amt.substr(str_dLocal_tax_amt.length-1,1));dLocal_tax_amt=dLocal_tax_amt-dLocal_tax_amt_won;$.grdList2.setValue(rId,"local_tax_amt",Math.floor(dLocal_tax_amt));total_tax_Amt_Calc(rId)}function total_tax_Amt_Calc(rId){var dincome_tax_amt=Number($.grdList2.getValue(rId,"income_tax_amt"));var dlocal_tax_amt=Number($.grdList2.getValue(rId,"local_tax_amt"));$.grdList2.setValue(rId,"total_tax_Amt",dincome_tax_amt+dlocal_tax_amt)}function gridValidator(){if(arguments.length<2){return false}var grdName=arguments[0];for(var i=0;i<grdName.getRowCount();i++){for(var j=1;j<arguments.length;j++){if(grdName.getValue(i,arguments[j])==""||grdName.getValue(i,arguments[j])==null){MessageBoxShow(grdName.getColumnText(arguments[j])+" 은(는) 필수 입력항목입니다.");return false}}}return true}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,720);$.panMain.setText("");$.panMain.setBottomLine(true);$.panMaster=new FingerPanel(host,"panMaster",0,0,400,700);$.panMaster.setText("리스트정보");$.panMaster.setBottomLine(true);$.panList1=new FingerPanel(host,"panList1",410,0,790,255);$.panList1.setText("기본정보");$.panList1.setBottomLine(true);$.panList2=new FingerPanel(host,"panList2",410,265,790,435);$.panList2.setText("세부정보");$.panList2.setBottomLine(true);$.grdMaster=new FingerDataGrid(host,"grdMaster",0,140,400,515);$.grdList2=new FingerDataGrid(host,"grdList2",0,0,790,390);$.btnSearch=new FingerButton(host,"btnSearch",320,-39.5,80,20);$.btnSearch.setText("조회");$.lbljob_yyyy=new FingerLabel(host,"lbljob_yyyy",35,15,100,20);$.lbljob_yyyy.setText("귀속연도");$.ymdjob_yyyy=new FingerDateEdit(host,"ymdjob_yyyy",140,15,210,20);$.lblsite_code=new FingerLabel(host,"lblsite_code",35,45,100,20);$.lblsite_code.setText("사업장");$.cmbsite_code=new FingerComboBox(host,"cmbsite_code",140,45,210,20);$.lblearner_code=new FingerLabel(host,"lblearner_code",35,75,100,20);$.lblearner_code.setText("소득자");$.txtearner_code=new FingerEdit(host,"txtearner_code",140,75,100,20);$.txtearner_name=new FingerButtonEdit(host,"txtearner_name",245,75,100,20);$.txtearner_name.setText("");$.lblsocial_no=new FingerLabel(host,"lblsocial_no",0,105,135,20);$.lblsocial_no.setText("주민/사업자등록번호");$.txtsocial_no=new FingerEdit(host,"txtsocial_no",140,105,210,20);$.lbljob_yyyy1=new FingerLabel(host,"lbljob_yyyy1",0,15,100,20);$.lbljob_yyyy1.setText("귀속연도");$.ymdjob_yyyy1=new FingerDateEdit(host,"ymdjob_yyyy1",105,15,210,20);$.lblsite_code1=new FingerLabel(host,"lblsite_code1",320,15,100,20);$.lblsite_code1.setText("사업장");$.cmbsite_code1=new FingerComboBox(host,"cmbsite_code1",425,15,215,20);$.lblearner_code1=new FingerLabel(host,"lblearner_code1",0,45,100,20);$.lblearner_code1.setText("소득자");$.txtearner_code1=new FingerEdit(host,"txtearner_code1",105,45,100,20);$.txtearner_name1=new FingerButtonEdit(host,"txtearner_name1",210,45,100,20);$.txtearner_name1.setText("");$.lblstatus=new FingerLabel(host,"lblstatus",320,45,100,20);$.lblstatus.setText("상태");$.cmbstatus=new FingerComboBox(host,"cmbstatus",425,45,215,20);$.lblsocial_no1=new FingerLabel(host,"lblsocial_no1",0,75,100,20);$.lblsocial_no1.setText("주민등록번호");$.txtsocial_no1=new FingerEdit(host,"txtsocial_no1",105,75,210,20);$.lblbusiness_type=new FingerLabel(host,"lblbusiness_type",320,75,100,20);$.lblbusiness_type.setText("개인/법인 구분");$.cmbbusiness_type=new FingerComboBox(host,"cmbbusiness_type",425,75,215,20);$.lblcomp_name=new FingerLabel(host,"lblcomp_name",0,105,100,20);$.lblcomp_name.setText("상호");$.txtcomp_name=new FingerEdit(host,"txtcomp_name",105,105,210,20);$.lblbiz_regno1=new FingerLabel(host,"lblbiz_regno1",315,105,105,20);$.lblbiz_regno1.setText("사업자등록번호");$.txtbiz_regno1=new FingerEdit(host,"txtbiz_regno1",425,105,210,20);$.lblreside_type=new FingerLabel(host,"lblreside_type",0,135,100,20);$.lblreside_type.setText("거주구분");$.cmbreside_type=new FingerComboBox(host,"cmbreside_type",105,135,215,20);$.lblnation_code=new FingerLabel(host,"lblnation_code",320,135,100,20);$.lblnation_code.setText("거주국");$.cmbnation_code=new FingerComboBox(host,"cmbnation_code",425,135,215,20);$.lblincome_type=new FingerLabel(host,"lblincome_type",0,165,100,20);$.lblincome_type.setText("업종구분");$.cmbincome_type=new FingerComboBox(host,"cmbincome_type",105,165,215,20);$.panList1.addButtons(["btnDelete","btnSave","btnNew"]);$.panList2.addButtons(["btnDelete","btnAdd"]);$.ymdjob_yyyy.setDateFormat("yyyy");$.ymdjob_yyyy1.setDateFormat("yyyy");$.ymdjob_yyyy.setValue(getToday(""));$.cmbsite_code.setEmptyRow(true);$.cmbsite_code1.setEmptyRow(true);$.cmbstatus.setEmptyRow(true);$.cmbbusiness_type.setEmptyRow(true);$.cmbreside_type.setEmptyRow(true);$.cmbnation_code.setEmptyRow(true);$.cmbincome_type.setEmptyRow(true);$.txtearner_code1.setReadOnly(true);$.txtsocial_no1.setReadOnly(true);$.ymdjob_yyyy.setAllowBlank(false,"귀속연도");$.cmbsite_code.setAllowBlank(false,"사업장");$.ymdjob_yyyy1.setAllowBlank(false,"귀속연도");$.cmbsite_code1.setAllowBlank(false,"사업장");$.txtearner_code1.setAllowBlank(false,"소득자코드");$.txtearner_name1.setAllowBlank(false,"소득자이름");$.cmbreside_type.setAllowBlank(false,"거주구분");$.cmbnation_code.setAllowBlank(false,"거주국");$.cmbsite_code.setColumn("site_code","site_name");$.cmbsite_code1.setColumn("site_code","site_name");$.cmbnation_code.setColumn("nation_code","nation_name");$.panList1.disableButton(["btnSave"]);$.grdMaster.setColumns([new FingerDataGridColumn("earner_code",90,"left","string","소득자코드"),new FingerDataGridColumn("earner_name",90,"left","string","소득자성명"),new FingerDataGridColumn("social_no",110,"left","string","주민등록번호"),new FingerDataGridColumn("belong_to",100,"left","string","소속"),new FingerDataGridColumn("comp_name",100,"left","string","상호"),new FingerDataGridColumn("biz_regno",120,"left","string","사업자등록번호"),new FingerDataGridColumn("job_yyyy",120,"left","string","귀속연도",{hidden:true})]);$.grdMaster.init({panel:$.panMaster,scroll:"xy",nonExcel:true,isFilter:false});$.grdMaster.setBorder(false);$.grdList2.setColumns([new FingerDataGridColumn("seq",100,"left","string","순번",{hidden:true}),new FingerDataGridColumn("pay_date",90,"left","date",{text:"지급일자",css:"col_chk"},{format:"ymd"}),new FingerDataGridColumn("job_mm",90,"left","string","귀속월"),new FingerDataGridColumn("income_type",100,"left","string",{text:"업종구분",css:"col_chk"}),new FingerDataGridColumn("tax_rate",80,"right","string","세율",{format:"number"}),new FingerDataGridColumn("total_pay_amt",80,"right","string","지급총액",{format:"int"}),new FingerDataGridColumn("income_tax_amt",80,"right","string","소득세",{format:"int"}),new FingerDataGridColumn("local_tax_amt",130,"right","string","지방소득세(주민세)",{format:"int"}),new FingerDataGridColumn("total_tax_Amt",80,"right","string","세액 계",{format:"int"}),new FingerDataGridColumn("memo",100,"left","string","비고"),new FingerDataGridColumn("remark",100,"left","string","분개장번호"),new FingerDataGridColumn("declaration_yyyymm",100,"left","date",{text:"신고연월",css:"col_chk"},{format:"ym"})]);$.grdList2.init({panel:$.panList2,leftSplit:4,scroll:"xy",nonExcel:true,isFilter:false});$.grdList2.setEditable(true);$.grdList2.setBorder(false);$.host=host;$.args=args};$.start=function(){$.panMain.add($.panMaster);$.panMain.add($.panList1);$.panMain.add($.panList2);$.panMaster.add($.grdMaster);$.panMaster.add($.btnSearch);$.panMaster.add($.lbljob_yyyy);$.panMaster.add($.ymdjob_yyyy);$.panMaster.add($.lblsite_code);$.panMaster.add($.cmbsite_code);$.panMaster.add($.lblearner_code);$.panMaster.add($.txtearner_code);$.panMaster.add($.txtearner_name);$.panMaster.add($.lblsocial_no);$.panMaster.add($.txtsocial_no);$.panList1.add($.lbljob_yyyy1);$.panList1.add($.ymdjob_yyyy1);$.panList1.add($.lblsite_code1);$.panList1.add($.cmbsite_code1);$.panList1.add($.lblearner_code1);$.panList1.add($.txtearner_code1);$.panList1.add($.txtearner_name1);$.panList1.add($.lblstatus);$.panList1.add($.cmbstatus);$.panList1.add($.lblsocial_no1);$.panList1.add($.txtsocial_no1);$.panList1.add($.lblbusiness_type);$.panList1.add($.cmbbusiness_type);$.panList1.add($.lblcomp_name);$.panList1.add($.txtcomp_name);$.panList1.add($.lblbiz_regno1);$.panList1.add($.txtbiz_regno1);$.panList1.add($.lblreside_type);$.panList1.add($.cmbreside_type);$.panList1.add($.lblnation_code);$.panList1.add($.cmbnation_code);$.panList1.add($.lblincome_type);$.panList1.add($.cmbincome_type);$.panList2.add($.grdList2);var ds=bizComponentData2($,"Q1","L_ORG001|L_ORG001|L_HRA019|L_HRA014|L_HRA015|L_COM015|L_HRA047");setComboBind([$.cmbsite_code,$.cmbsite_code1,$.cmbstatus,$.cmbbusiness_type,$.cmbreside_type,$.cmbnation_code,$.cmbincome_type],ds);$.grdList2.setColumnDropDownList("income_type",ds.resultList[6]);var ds1=bizComponentData2($,"Q1","L_HRA038");$.grdList2.setColumnDropDownList("job_mm",ds1.resultList[0]);$.cmbsite_code.setValue(g_main.session.obj.SiteCode)};$.callback=function(type,ds){if(type=="MASTER"){if(ds&&ds.resultList[0].length>0){for(var i=0;i<ds.resultList[0].length;i++){ds.resultList[0][i].social_no=ds.resultList[0][i].social_no.substring(0,6)+"-"+ds.resultList[0][i].social_no.substring(6,13)}}setDataGrid([$.grdMaster],ds);if($.grdMaster.getRowCount()<1){newClick();$.panList1.disableButton(["btnSave"]);return}if($.strEarner){$.grdMaster.selectRow($.grdMaster.getGridRowIndex("earner_code",$.strEarner))}else{$.grdMaster.selectRow(0)}$.strEarner=false}else{if(type=="DETAIL"){$.ymdjob_yyyy1.setValue(ds.resultList[0][0].job_yyyy);$.cmbsite_code1.setValue(ds.resultList[0][0].site_code);$.txtearner_code1.setValue(ds.resultList[0][0].earner_code);$.txtearner_name1.setText(ds.resultList[0][0].earner_name);$.cmbstatus.setValue(ds.resultList[0][0].status);$.txtsocial_no1.setValue(ds.resultList[0][0].social_no.substring(0,6)+"-"+ds.resultList[0][0].social_no.substring(6,13));$.cmbbusiness_type.setValue(ds.resultList[0][0].business_type);$.txtcomp_name.setValue(ds.resultList[0][0].comp_name);var regno=(ds.resultList[0][0].biz_regno?ds.resultList[0][0].biz_regno.substr(0,3)+"-"+ds.resultList[0][0].biz_regno.substr(4,2)+"-"+ds.resultList[0][0].biz_regno.substr(6):"");$.txtbiz_regno1.setValue(regno);$.cmbreside_type.setValue(ds.resultList[0][0].reside_type);$.cmbnation_code.setValue(ds.resultList[0][0].nation_code);$.cmbincome_type.setValue(ds.resultList[0][0].income_type);var ds=ds.resultList[1];setDataGrid([$.grdList2],ds,true);var aRow=$.grdList2.getAllRows();for(var i in aRow){ds[i].pay_date=extFormat(ds[i].pay_date,"yyyyMMdd");ds[i].declaration_yyyymm=extFormat(ds[i].declaration_yyyymm,"yyyyMM")}$.strStatus1="U";$.grdList2.selectRow(0);$.panList1.disableButton(["btnSave"]);fnControlSetting(false)}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){QueryClick()}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){$.popUpCallId=id;if(id=="txtearner_name"){var param={earner_code:$.txtearner_code.getValue()||"",earner_name:$.txtearner_name.getText()||""};g_main.openPopup("popHRA023.html","popHRA023","소득자정보",400,585,"","",param,"","")}else{if(id=="txtearner_name1"){var param={earner_code:$.txtearner_code1.getValue()||"",earner_name:$.txtearner_name1.getText()||""};g_main.openPopup("popHRA023.html","popHRA023","소득자정보",400,585,"","",param,"","")}}};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){$.panList1.disableButton(["btnSave"]);if(id=="cmbsite_code"){return}else{$.panList1.enableButton(["btnSave"])}};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdMaster"){$.deleteRow=[];fnQRY_P_HRA2200_Q("DETAIL")}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){if(id=="grdList2"){$.panList1.enableButton(["btnSave"]);if(cInd=="job_mm"){var dt=$.ymdjob_yyyy1.getValue()+$.grdList2.getValue(rId,"job_mm")+"01";dt2=extFormat(getCalcMonth(dt,1),"yyyyMM");$.grdList2.setValue(rId,"declaration_yyyymm",dt2)}else{if(cInd=="tax_rate"||cInd=="total_pay_amt"){income_tax_amt_Calc(rId)}else{if(cInd=="income_tax_amt"){local_tax_amt_Calc(rId)}else{if(cInd=="local_tax_amt"){total_tax_Amt_Calc(rId)}else{if(cInd=="pay_date"){$.grdList2.setValue(rId,"job_mm",$.grdList2.getValue(rId,"pay_date").substring(5,7));var dt=$.grdList2.getValue(rId,"pay_date").substring(0,4)+$.grdList2.getValue(rId,"job_mm")+"01";dt2=extFormat(getCalcMonth(dt,1),"yyyyMM");$.grdList2.setValue(rId,"declaration_yyyymm",dt2)}}}}}}};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){$.panList1.disableButton(["btnSave"]);if(id=="txtsocial_no"){return}else{$.panList1.enableButton(["btnSave"])}};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerimage_click=function(id){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panList1"){if(btnId=="btnNew"){newClick();$.panList1.enableButton(["btnSave"])}else{if(btnId=="btnDelete"){var strMSG="["+$.txtearner_name1.getText()+"] 정보를 삭제하시겠습니까?";confirmBoxShow(strMSG,function(){if(g_main.msgShare==true){if(fnSET_P_HRA2200_S1("D")){MessageBoxShow("정상적으로 삭제되었습니다.");QueryClick()}}})}else{if(btnId=="btnSave"){if(fnSET_P_HRA2200_S1($.strStatus1)){if(fnSET_P_HRA2200_S2("")){MessageBoxShow("정상적으로 저장 되었습니다.");$.strEarner=$.txtearner_code1.getValue();QueryClick()}}}}}}else{if(panelId=="panList2"){if(btnId=="btnAdd"){var dt=getToday("");var j_nm=dt.substring(4,6);var dt2=getCalcMonth(getToday(""),1);$.grdList2.addRow({pay_date:extFormat(dt,"yyyyMMdd"),job_mm:j_nm,seq:0,income_type:$.cmbincome_type.getValue()||"",tax_rate:3,total_pay_amt:0,income_tax_amt:0,local_tax_amt:0,total_tax_Amt:0,memo:"",remark:"",declaration_yyyymm:extFormat(dt2,"yyyyMM")});$.panList1.enableButton(["btnSave"])}else{if(btnId=="btnDelete"){if($.grdList2.getRowCount()>0){var rId=$.grdList2.getSelectedRowIdx();var rType=$.grdList2.getRowStatus(rId);if(rType=="N"){$.grdList2.deleteRow(rId);$.panList1.enableButton(["btnSave"])}else{confirmBoxShow("정말 삭제하시겠습니까?",function(){if(g_main.msgShare==true){$.grdList2.getItem(rId).rowType="D";$.deleteRow.push($.grdList2.getValue(rId));$.grdList2.deleteRow(rId);$.panList1.enableButton(["btnSave"])}})}}}}}}};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(id=="popHRA023"){if($.popUpCallId=="txtearner_name"){if(popResult){$.txtearner_code.setValue(popResult.earner_code);$.txtearner_name.setText(popResult.earner_name)}}else{if($.popUpCallId=="txtearner_name1"){if(popResult){$.panList1.enableButton(["btnSave"]);$.txtearner_code1.setValue(popResult.earner_code);$.txtearner_name1.setText(popResult.earner_name);$.txtsocial_no1.setValue(popResult.social_no.substring(0,6)+"-"+popResult.social_no.substring(6,13));$.txtcomp_name.setValue(popResult.comp_name);$.cmbbusiness_type.setValue(popResult.business_type);var regno=(popResult.biz_regno?popResult.biz_regno.substr(0,3)+"-"+popResult.biz_regno.substr(4,2)+"-"+popResult.biz_regno.substr(6):"");$.txtbiz_regno1.setValue(regno);$.cmbreside_type.setValue(popResult.reside_type);$.cmbnation_code.setValue(popResult.nation_code);$.cmbincome_type.setValue(popResult.earner_type)}}}}};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>