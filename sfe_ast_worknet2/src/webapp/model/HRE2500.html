<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panQuery=null;$.panCreate=null;$.panInfo=null;$.tabMain=null;$.grdMaster=null;$.grdKPI=null;$.grdKBI=null;$.grdHistory=null;$.lbleval_year=null;$.cboeval_year=null;$.lbleval_month=null;$.cboeval_month=null;$.lbleval_group_code=null;$.cboeval_group_code=null;$.lbldept_code=null;$.txtdept_code=null;$.txtdept_name=null;$.lblevaluated_emp=null;$.txtevaluated_emp=null;$.txtemp_name=null;$.btnCreate=null;$.lbleval_group_code1=null;$.cboeval_group_code1=null;$.lbldept_code1=null;$.txtdept_code1=null;$.txtdept_name1=null;$.lblevaluated_emp1=null;$.txtevaluated_emp1=null;$.txtemp_name1=null;$.lbleval_date=null;$.ymdeval_date=null;$.lblcreate_option=null;$.cbocreate_option=null;$.lblkbi_apply_all_yn=null;$.chkkbi_apply_all_yn=null;$.btnCreate1=null;$.lbleval_group_code2=null;$.cboeval_group_code2=null;$.lbldept_code2=null;$.txtdept_code2=null;$.txtdept_name2=null;$.lblevaluated_emp2=null;$.txtevaluated_emp2=null;$.txtemp_name2=null;$.lbljob_rank=null;$.cbojob_rank=null;$.lblduty_code=null;$.cboduty_code=null;$.lblposition_code=null;$.cboposition_code=null;$.lbljob_code=null;$.cbojob_code=null;$.lblevaluate_emp1=null;$.txtevaluate_emp1=null;$.txtemp_name3=null;$.lblevaluate_emp2=null;$.txtevaluate_emp2=null;$.txtemp_name4=null;$.lbleval_date1=null;$.ymdeval_date1=null;$.lbleval_weighted_rate=null;$.numeval_weighted_rate=null;$.lbldifficult_yn=null;$.chkdifficult_yn=null;$.visibleYN=null;$.btnSearch=null;$.btnDelete=null;$.btnMakePermission=null;$.initRow=false;$.strFocus="";var tmp1=[];var tmp2=[];function visibleSet(){$.panCreate.setVisible(false);$.grdMaster.setProperty(0,90,1200,290);$.panInfo.setProperty(0,385,1200,495);$.visibleYN.setValue("N")}function QueryClick(){var iBeforeRow=0;if($.grdMaster.getRowCount()>0){iBeforeRow=$.grdMaster.getSelectedRowIdx()}fnQRY_P_HRE2500_Q("MASTER");if(iBeforeRow==0){FocusedRowChanged()}if($.grdMaster.getRowCount()<1){$.grdKPI.clear();$.grdKBI.clear();$.grdHistory.clear();$.panInfo.clear()}}function fnReadOnly(bo){$.txtdept_code2.setReadOnly(bo);$.txtdept_name2.setReadOnly(bo);$.txtevaluated_emp2.setReadOnly(bo);$.txtemp_name2.setReadOnly(bo);$.cbojob_rank.setReadOnly(bo);$.cboduty_code.setReadOnly(bo);$.cbojob_code.setReadOnly(bo);$.cboposition_code.setReadOnly(bo);$.ymdeval_date1.setReadOnly(bo)}function FocusedRowChanged(){var rId=$.grdMaster.getSelectedRowIdx();$.cboeval_group_code2.setValue($.grdMaster.getValue(rId,"eval_group_code"));$.txtdept_code2.setValue($.grdMaster.getValue(rId,"dept_code"));$.txtdept_name2.setText($.grdMaster.getValue(rId,"dept_name"));$.txtevaluated_emp2.setValue($.grdMaster.getValue(rId,"evaluated_emp"));$.txtemp_name2.setText($.grdMaster.getValue(rId,"emp_name"));$.cbojob_rank.setValue($.grdMaster.getValue(rId,"job_rank"));$.cboduty_code.setValue($.grdMaster.getValue(rId,"duty_code"));$.cboposition_code.setValue($.grdMaster.getValue(rId,"position_code"));$.cbojob_code.setValue($.grdMaster.getValue(rId,"job_code"));$.txtevaluate_emp1.setValue($.grdMaster.getValue(rId,"evaluate_emp1"));$.txtemp_name3.setText($.grdMaster.getValue(rId,"evaluate_emp1_name"));$.txtevaluate_emp2.setValue($.grdMaster.getValue(rId,"evaluate_emp2"));$.txtemp_name4.setText($.grdMaster.getValue(rId,"evaluate_emp2_name"));$.ymdeval_date1.setValue($.grdMaster.getValue(rId,"eval_date"));$.numeval_weighted_rate.setValue($.grdMaster.getValue(rId,"eval_weighted_rate"));$.chkdifficult_yn.setValue($.grdMaster.getValue(rId,"difficult_yn"));fnReadOnly(true);fnQRY_P_HRE2500_Q("DETAIL")}function fnQRY_P_HRE2500_Q(workType){if(!validateControls([$.cboeval_year,$.cboeval_month])){return}var json=createJSON_Q(workType);var ds=callExecuteSync(["req",json],workType,$);if(ds!=null){if(workType=="MASTER"){setDataGrid([$.grdMaster],ds);if($.grdMaster.getRowCount()>0){$.grdMaster.selectRow(0)}}else{if(workType=="DETAIL"){setDataGrid([$.grdKPI],ds.resultList[0],true);setDataGrid([$.grdKBI],ds.resultList[1],true);setDataGrid([$.grdHistory],ds.resultList[2],true);if($.grdKPI.getRowCount()>0){$.grdKPI.selectRow(0)}if($.grdKBI.getRowCount()>0){$.grdKBI.selectRow(0)}if($.grdHistory.getRowCount()>0){$.grdHistory.selectRow(0)}}}}}function createJSON_Q(workType){var json=createExecuteParamInfo("HR..P_HRE2500_Q",[workType,$.cboeval_year.getValue(),$.cboeval_month.getValue(),$.cboeval_group_code.getValue(),$.txtdept_code.getValue(),workType=="MASTER"?$.txtevaluated_emp.getValue():$.txtevaluated_emp2.getValue(),workType=="MASTER"?"":$.ymdeval_date1.getValue()]);return json}function fnSET_P_HRE2500_BAT(workType,strCheck){if(!validateControls([$.cboeval_year,$.cboeval_month])){return}var json=createJSON_S(workType,strCheck);var ds=callExecuteSync(["req",json],workType,$);var bResult=false;if(workType=="BATCH"){if(ds!=null){if(ds.errorCode=="P_HRE2500_BAT_001"){confirmBoxShow("기 생성된 피평가자 정보가 존재합니다. 기존 자료를 삭제 후 재 생성하시겠습니까?",function(){if(g_main.msgShare==true){if(fnSET_P_HRE2500_BAT("BATCH","SKIP_CHECK")){bResult=true}}})}else{if(!ds.errorCode.substring(0,1)=="P"&&!ds.errorCode.substring(0,1)=="E"){bResult=true}else{if(ds.errorCode=="MSG0002"){MessageBoxShow("정상적으로 생성되었습니다.");bResult=true}else{if(ds.errorCode=="MSG0029"){MessageBoxShow("일괄생성 시 오류가 발생했습니다.");bResult=true}}}}}}else{var json=createJSON_S(workType,strCheck);callQuery(["req",json],workType,$);bResult=true}return bResult}function createJSON_S(workType,strCheck){var json=createExecuteParamInfo("HR..P_HRE2500_BAT",[workType,$.cboeval_year.getValue(),$.cboeval_month.getValue(),workType=="BATCH"?$.ymdeval_date.getValue():$.ymdeval_date1.getValue(),workType=="BATCH"?$.cboeval_group_code1.getValue():$.cboeval_group_code2.getValue(),workType=="BATCH"?$.txtdept_code1.getValue():$.txtdept_code2.getValue(),workType=="BATCH"?$.txtevaluated_emp1.getValue():$.txtevaluated_emp2.getValue(),$.cbocreate_option.getValue(),$.chkkbi_apply_all_yn.getValue(),strCheck,$.numeval_weighted_rate.getValue(),$.cboposition_code.getValue(),$.cbojob_rank.getValue(),$.cboduty_code.getValue(),$.cbojob_code.getValue(),$.txtevaluate_emp1.getValue(),$.txtevaluate_emp2.getValue(),$.chkdifficult_yn.getValue(),g_main.session.obj.UserID,"#HostInfo#"]);return json}function fnSET_P_HRE2500_KPI_S(workType){if($.grdKPI.getRowCount()<1){return}var changedRows=$.grdKPI.getChangedRows();if(changedRows.length==0&&tmp1==""){return}var json=createJSON_S1(workType);callQuery(["req",json],workType,$)}function createJSON_S1(workType){var json="";var changedRows=$.grdKPI.getChangedRows();var rows=[];if(tmp1!=null){rows.push(tmp1)}for(var i in changedRows){workType=changedRows[i].rowType;rows.push([workType,$.cboeval_year.getValue(),$.cboeval_month.getValue(),$.txtevaluated_emp2.getValue(),$.ymdeval_date1.getValue(),changedRows[i].kpi_code,changedRows[i].weighted_rate,changedRows[i].kpi_progress_rate,changedRows[i].kpi_achieve_rate,g_main.session.obj.UserID,"#HostInfo#"])}json=createExecuteParamInfo("HR..P_HRE2500_KPI_S",rows);return json}function fnSET_P_HRE2500_KBI_S(workType){if($.grdKBI.getRowCount()<1){return}var changedRows=$.grdKBI.getChangedRows();if(changedRows.length==0&&tmp2==""){return}var json=createJSON_S2(workType);callQuery(["req",json],workType,$)}function createJSON_S2(workType){var json="";var changedRows=$.grdKBI.getChangedRows();var rows=[];if(tmp2!=null){rows.push(tmp2)}for(var i in changedRows){workType=changedRows[i].rowType;rows.push([workType,$.cboeval_year.getValue(),$.cboeval_month.getValue(),$.txtevaluated_emp2.getValue(),$.ymdeval_date1.getValue(),changedRows[i].kbi_code,changedRows[i].weighted_rate,g_main.session.obj.UserID,"#HostInfo#"])}json=createExecuteParamInfo("HR..P_HRE2500_KBI_S",rows);return json}function fnSET_P_HRE2500_ASSIGN(workType){if(!validateControls([$.cboeval_year,$.cboeval_month])){return}var json=createJSON_S3(workType);var ds=callExecuteSync(["req",json],workType,$);if(ds!=null){if(ds.errorCode=="MSG0002"){MessageBoxShow("정상적으로 생성되었습니다.");bResult=true}else{if(ds.errorCode=="MSG0029"){MessageBoxShow("일괄생성 시 오류가 발생했습니다.");bResult=true}}}}function createJSON_S3(workType){var json=createExecuteParamInfo("HR..P_HRE2500_ASSIGN_S",[workType,$.cboeval_year.getValue(),$.cboeval_month.getValue(),g_main.session.obj.UserID,"#HostInfo#"]);return json}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,965);$.panMain.setText("");$.panMain.setBottomLine(true);$.panQuery=new FingerPanel(host,"panQuery",0,0,1200,85);$.panQuery.setText("");$.panQuery.setBottomLine();$.panCreate=new FingerPanel(host,"panCreate",0,90,1200,85);$.panCreate.setText("");$.panCreate.setBottomLine(true);$.panInfo=new FingerPanel(host,"panInfo",0,470,1200,490);$.panInfo.setText("평가대상자");$.panInfo.setBottomLine(true);$.tabMain=new FingerTab(host,"tabMain",0,145,1200,300);$.grdMaster=new FingerDataGrid(host,"grdMaster",0,175,1200,290);$.grdKPI=new FingerDataGrid(host,"grdKPI",0,0,1200,270);$.grdKBI=new FingerDataGrid(host,"grdKBI",0,0,1200,270);$.grdHistory=new FingerDataGrid(host,"grdHistory",0,0,1200,270);$.lbleval_year=new FingerLabel(host,"lbleval_year",0,15,100,20);$.lbleval_year.setText("평가년도");$.cboeval_year=new FingerComboBox(host,"cboeval_year",105,15,140,20);$.lbleval_month=new FingerLabel(host,"lbleval_month",250,15,100,20);$.lbleval_month.setText("평가명");$.cboeval_month=new FingerComboBox(host,"cboeval_month",355,15,140,20);$.lbleval_group_code=new FingerLabel(host,"lbleval_group_code",0,45,100,20);$.lbleval_group_code.setText("평가그룹");$.cboeval_group_code=new FingerComboBox(host,"cboeval_group_code",105,45,140,20);$.lbldept_code=new FingerLabel(host,"lbldept_code",250,45,100,20);$.lbldept_code.setText("부서");$.txtdept_code=new FingerEdit(host,"txtdept_code",355,45,100,20);$.txtdept_name=new FingerButtonEdit(host,"txtdept_name",460,45,140,20);$.txtdept_name.setText("");$.lblevaluated_emp=new FingerLabel(host,"lblevaluated_emp",605,45,100,20);$.lblevaluated_emp.setText("피평가자");$.txtevaluated_emp=new FingerEdit(host,"txtevaluated_emp",710,45,100,20);$.txtemp_name=new FingerButtonEdit(host,"txtemp_name",815,45,140,20);$.txtemp_name.setText("");$.btnCreate=new FingerButton(host,"btnCreate",1055,45,145,20);$.btnCreate.setText("평가대상일괄생성");$.lbleval_group_code1=new FingerLabel(host,"lbleval_group_code1",0,15,100,20);$.lbleval_group_code1.setText("평가그룹");$.cboeval_group_code1=new FingerComboBox(host,"cboeval_group_code1",105,15,140,20);$.lbldept_code1=new FingerLabel(host,"lbldept_code1",250,15,100,20);$.lbldept_code1.setText("부서");$.txtdept_code1=new FingerEdit(host,"txtdept_code1",355,15,100,20);$.txtdept_name1=new FingerButtonEdit(host,"txtdept_name1",460,15,140,20);$.txtdept_name1.setText("");$.lblevaluated_emp1=new FingerLabel(host,"lblevaluated_emp1",605,15,100,20);$.lblevaluated_emp1.setText("피평가자");$.txtevaluated_emp1=new FingerEdit(host,"txtevaluated_emp1",710,15,100,20);$.txtemp_name1=new FingerButtonEdit(host,"txtemp_name1",815,15,140,20);$.txtemp_name1.setText("");$.lbleval_date=new FingerLabel(host,"lbleval_date",0,45,100,20);$.lbleval_date.setText("작성일");$.ymdeval_date=new FingerDateEdit(host,"ymdeval_date",105,45,140,20);$.lblcreate_option=new FingerLabel(host,"lblcreate_option",250,45,100,20);$.lblcreate_option.setText("생성구분");$.cbocreate_option=new FingerComboBox(host,"cbocreate_option",355,50,140,20);$.lblkbi_apply_all_yn=new FingerLabel(host,"lblkbi_apply_all_yn",605,45,100,20);$.lblkbi_apply_all_yn.setText("공통역량 적용");$.chkkbi_apply_all_yn=new FingerCheckBox(host,"chkkbi_apply_all_yn",710,45,140,20);$.chkkbi_apply_all_yn.setText("적용");$.btnCreate1=new FingerButton(host,"btnCreate1",1055,45,145,20);$.btnCreate1.setText("평가대상일괄생성");$.lbleval_group_code2=new FingerLabel(host,"lbleval_group_code2",0,15,100,20);$.lbleval_group_code2.setText("평가그룹");$.cboeval_group_code2=new FingerComboBox(host,"cboeval_group_code2",105,15,140,20);$.lbldept_code2=new FingerLabel(host,"lbldept_code2",250,15,100,20);$.lbldept_code2.setText("부서");$.txtdept_code2=new FingerEdit(host,"txtdept_code2",355,15,100,20);$.txtdept_name2=new FingerButtonEdit(host,"txtdept_name2",460,15,140,20);$.txtdept_name2.setText("");$.lblevaluated_emp2=new FingerLabel(host,"lblevaluated_emp2",605,15,100,20);$.lblevaluated_emp2.setText("이름");$.txtevaluated_emp2=new FingerEdit(host,"txtevaluated_emp2",710,15,100,20);$.txtemp_name2=new FingerButtonEdit(host,"txtemp_name2",815,15,140,20);$.txtemp_name2.setText("");$.lbljob_rank=new FingerLabel(host,"lbljob_rank",0,45,100,20);$.lbljob_rank.setText("직급");$.cbojob_rank=new FingerComboBox(host,"cbojob_rank",105,45,140,20);$.lblduty_code=new FingerLabel(host,"lblduty_code",250,45,100,20);$.lblduty_code.setText("직책");$.cboduty_code=new FingerComboBox(host,"cboduty_code",355,45,140,20);$.lblposition_code=new FingerLabel(host,"lblposition_code",605,45,100,20);$.lblposition_code.setText("호칭");$.cboposition_code=new FingerComboBox(host,"cboposition_code",710,45,140,20);$.lbljob_code=new FingerLabel(host,"lbljob_code",0,75,100,20);$.lbljob_code.setText("직무");$.cbojob_code=new FingerComboBox(host,"cbojob_code",105,75,140,20);$.lblevaluate_emp1=new FingerLabel(host,"lblevaluate_emp1",250,75,100,20);$.lblevaluate_emp1.setText("1차평가자");$.txtevaluate_emp1=new FingerEdit(host,"txtevaluate_emp1",355,75,100,20);$.txtemp_name3=new FingerButtonEdit(host,"txtemp_name3",460,75,140,20);$.txtemp_name3.setText("");$.lblevaluate_emp2=new FingerLabel(host,"lblevaluate_emp2",605,75,100,20);$.lblevaluate_emp2.setText("2차평가자");$.txtevaluate_emp2=new FingerEdit(host,"txtevaluate_emp2",710,75,100,20);$.txtemp_name4=new FingerButtonEdit(host,"txtemp_name4",815,75,140,20);$.txtemp_name4.setText("");$.lbleval_date1=new FingerLabel(host,"lbleval_date1",0,105,100,20);$.lbleval_date1.setText("작성일");$.ymdeval_date1=new FingerDateEdit(host,"ymdeval_date1",105,105,140,20);$.lbleval_weighted_rate=new FingerLabel(host,"lbleval_weighted_rate",250,105,100,20);$.lbleval_weighted_rate.setText("평가가중치");$.numeval_weighted_rate=new FingerSpinEdit(host,"numeval_weighted_rate",355,105,140,20);$.lbldifficult_yn=new FingerLabel(host,"lbldifficult_yn",605,105,100,20);$.lbldifficult_yn.setText("난이도");$.chkdifficult_yn=new FingerCheckBox(host,"chkdifficult_yn",710,105,140,20);$.chkdifficult_yn.setText("");$.visibleYN=new FingerEdit(host,"visibleYN",930,15,30,20);$.btnSearch=new FingerButton(host,"btnSearch",1120,15,80,20);$.btnSearch.setText("조회");$.btnDelete=new FingerButton(host,"btnDelete",1055,15,80,20);$.btnDelete.setText("삭제");$.btnMakePermission=new FingerButton(host,"btnMakePermission",920,15,150,20);$.btnMakePermission.setText("권한그룹 일괄생성");$.visibleYN.setVisible(false);$.panInfo.addButtons(["btnDelete","btnAdd","btnSave","btnNew"]);$.cboeval_year.setAllowBlank(false,"평가년도");$.cboeval_month.setAllowBlank(false,"평가명");$.ymdeval_date.setAllowBlank(false,"작성일");$.cbocreate_option.setAllowBlank(false,"생성구분");$.cboeval_group_code2.setAllowBlank(false,"평가그룹");$.txtdept_code2.setAllowBlank(false,"부서코드");$.txtdept_name2.setAllowBlank(false,"부서명");$.txtevaluated_emp2.setAllowBlank(false,"사원코드");$.txtemp_name2.setAllowBlank(false,"사원명");$.cbojob_rank.setAllowBlank(false,"직급");$.cboduty_code.setAllowBlank(false,"직책");$.cboposition_code.setAllowBlank(false,"호칭");$.cbojob_code.setAllowBlank(false,"직무");$.txtevaluate_emp1.setAllowBlank(false,"1차평가자코드");$.txtemp_name3.setAllowBlank(false,"1차평가자");$.ymdeval_date1.setAllowBlank(false,"작성일");$.cboeval_year.setEmptyRow(true);$.cboeval_month.setEmptyRow(true);$.cboeval_group_code.setEmptyRow(true);$.cboeval_group_code1.setEmptyRow(true);$.cboeval_group_code2.setEmptyRow(true);$.cbocreate_option.setEmptyRow(true);$.cbojob_rank.setEmptyRow(true);$.cboduty_code.setEmptyRow(true);$.cboposition_code.setEmptyRow(true);$.cbojob_code.setEmptyRow(true);$.panQuery.setBorder(true);$.panCreate.setBorder(true);$.grdMaster.setColumns([new FingerDataGridColumn("eval_group_code",100,"left","string","평가그룹",{hidden:true}),new FingerDataGridColumn("dept_code",100,"left","string","부서코드",{hidden:true}),new FingerDataGridColumn("dept_name",100,"left","string","부서"),new FingerDataGridColumn("evaluated_emp",90,"left","string","사번"),new FingerDataGridColumn("emp_name",90,"left","string","이름"),new FingerDataGridColumn("job_rank",100,"left","string","직급"),new FingerDataGridColumn("duty_code",100,"left","string","직책"),new FingerDataGridColumn("position_code",100,"left","string","호칭"),new FingerDataGridColumn("job_code",100,"left","string","직무"),new FingerDataGridColumn("evaluate_emp1",100,"left","string","1차평가자",{hidden:true}),new FingerDataGridColumn("evaluate_emp1_name",100,"left","string","1차평가자"),new FingerDataGridColumn("evaluate_emp2",100,"left","string","2차평가자",{hidden:true}),new FingerDataGridColumn("evaluate_emp2_name",100,"left","string","2차평가자"),new FingerDataGridColumn("eval_weighted_rate",100,"left","string","평가가중치"),new FingerDataGridColumn("difficult_yn",100,"left","string","난이도"),new FingerDataGridColumn("eval_date",100,"left","string","작성일자")]);$.grdMaster.init({nonExcel:true,isFilter:false,scroll:"xy"});$.grdKPI.setColumns([new FingerDataGridColumn("eval_year",100,"left","string","평가년도",{hidden:true}),new FingerDataGridColumn("eval_month",100,"left","string","평가명",{hidden:true}),new FingerDataGridColumn("kpi_type",100,"left","string","성과구분"),new FingerDataGridColumn("kpi_code",100,"left","string","KPI코드",{hidden:true}),new FingerDataGridColumn("kpi_name",230,"left","string",{text:"KPI",css:"col_chk"}),new FingerDataGridColumn("kpi_csf",300,"left","string","핵심과제"),new FingerDataGridColumn("weighted_rate",100,"right","string",{text:"가중치",css:"col_chk"},{format:"number"}),new FingerDataGridColumn("kpi_progress_rate",100,"right","string",{text:"진척률",css:"col_chk"},{format:"number"}),new FingerDataGridColumn("kpi_achieve_rate",100,"right","string",{text:"달성률",css:"col_chk"},{format:"number"}),new FingerDataGridColumn("kpi_eval_criteria",250,"left","string","평가척도")]);$.grdKPI.init({nonExcel:true,isFilter:false,scroll:"xy"});$.grdKPI.setEditable(true);$.grdKBI.setColumns([new FingerDataGridColumn("eval_year1",100,"left","string","평가년도",{hidden:true}),new FingerDataGridColumn("eval_month1",100,"left","string","평가명",{hidden:true}),new FingerDataGridColumn("kbi_type",100,"left","string","역량구분"),new FingerDataGridColumn("kbi_code",100,"left","string","역량코드",{hidden:true}),new FingerDataGridColumn("kbi_name",250,"left","string",{text:"KBI",css:"col_chk"}),new FingerDataGridColumn("kbi_level_memo",410,"left","string","행동지표"),new FingerDataGridColumn("weighted_rate",410,"right","string",{text:"가중치",css:"col_chk"},{format:"number"})]);$.grdKBI.init({nonExcel:true,isFilter:false,scroll:"xy"});$.grdKBI.setEditable(true);$.grdHistory.setColumns([new FingerDataGridColumn("dept_name",100,"left","string","부서"),new FingerDataGridColumn("evaluated_emp",100,"left","string","사번"),new FingerDataGridColumn("emp_name",100,"left","string","이름"),new FingerDataGridColumn("position_code",100,"left","string","호칭"),new FingerDataGridColumn("job_rank",100,"left","string","직급"),new FingerDataGridColumn("duty_code",100,"left","string","직책"),new FingerDataGridColumn("job_code",100,"left","string","직무"),new FingerDataGridColumn("evaluate_emp1",100,"left","string","1차평가자"),new FingerDataGridColumn("evaluate_emp2",100,"left","string","2차평가자"),new FingerDataGridColumn("difficult_yn",100,"left","string","난이도"),new FingerDataGridColumn("eval_date",100,"left","string","작성일자")]);$.grdHistory.init({nonExcel:true,isFilter:false,scroll:"xy"});$.host=host;$.args=args};$.start=function(){$.panMain.add($.panQuery);$.panMain.add($.panCreate);$.panMain.add($.panInfo);$.panMain.add($.grdMaster);$.panQuery.add($.lbleval_year);$.panQuery.add($.cboeval_year);$.panQuery.add($.lbleval_month);$.panQuery.add($.cboeval_month);$.panQuery.add($.lbleval_group_code);$.panQuery.add($.cboeval_group_code);$.panQuery.add($.lbldept_code);$.panQuery.add($.txtdept_code);$.panQuery.add($.txtdept_name);$.panQuery.add($.lblevaluated_emp);$.panQuery.add($.txtevaluated_emp);$.panQuery.add($.txtemp_name);$.panQuery.add($.btnCreate);$.panQuery.add($.visibleYN);$.panQuery.add($.btnSearch);$.panQuery.add($.btnDelete);$.panQuery.add($.btnMakePermission);$.panCreate.add($.lbleval_group_code1);$.panCreate.add($.cboeval_group_code1);$.panCreate.add($.lbldept_code1);$.panCreate.add($.txtdept_code1);$.panCreate.add($.txtdept_name1);$.panCreate.add($.lblevaluated_emp1);$.panCreate.add($.txtevaluated_emp1);$.panCreate.add($.txtemp_name1);$.panCreate.add($.lbleval_date);$.panCreate.add($.ymdeval_date);$.panCreate.add($.lblcreate_option);$.panCreate.add($.cbocreate_option);$.panCreate.add($.lblkbi_apply_all_yn);$.panCreate.add($.chkkbi_apply_all_yn);$.panCreate.add($.btnCreate1);$.panInfo.add($.tabMain);$.panInfo.add($.grdHistory);$.panInfo.add($.grdKBI);$.panInfo.add($.grdKPI);$.panInfo.add($.lbleval_group_code2);$.panInfo.add($.cboeval_group_code2);$.panInfo.add($.lbldept_code2);$.panInfo.add($.txtdept_code2);$.panInfo.add($.txtdept_name2);$.panInfo.add($.lblevaluated_emp2);$.panInfo.add($.txtevaluated_emp2);$.panInfo.add($.txtemp_name2);$.panInfo.add($.lbljob_rank);$.panInfo.add($.cbojob_rank);$.panInfo.add($.lblduty_code);$.panInfo.add($.cboduty_code);$.panInfo.add($.lblposition_code);$.panInfo.add($.cboposition_code);$.panInfo.add($.lbljob_code);$.panInfo.add($.cbojob_code);$.panInfo.add($.lblevaluate_emp1);$.panInfo.add($.txtevaluate_emp1);$.panInfo.add($.txtemp_name3);$.panInfo.add($.lblevaluate_emp2);$.panInfo.add($.txtevaluate_emp2);$.panInfo.add($.txtemp_name4);$.panInfo.add($.lbleval_date1);$.panInfo.add($.ymdeval_date1);$.panInfo.add($.lbleval_weighted_rate);$.panInfo.add($.numeval_weighted_rate);$.panInfo.add($.lbldifficult_yn);$.panInfo.add($.chkdifficult_yn);$.tabMain.addTab([{text:"업적",body:$.grdKPI,width:120},{text:"역량",body:$.grdKBI,width:120},{text:"변경이력",body:$.grdHistory,width:120}]);visibleSet();$.cboeval_year.setColumn("eval_year","eval_year1");$.cboeval_month.setColumn("eval_month","eval_name");$.cboeval_group_code.setColumn("eval_group_code","eval_group_name");$.cboeval_group_code1.setColumn("eval_group_code","eval_group_name");$.cboeval_group_code2.setColumn("eval_group_code","eval_group_name");$.cbocreate_option.setColumn("sub_code","code_name");$.cbojob_rank.setColumn("sub_code","code_name");$.cboduty_code.setColumn("sub_code","code_name");$.cboposition_code.setColumn("sub_code","code_name");$.cbojob_code.setColumn("sub_code","code_name");var ds=bizComponentData2($,"Q1","L_HRE010_2|L_HRE016|L_HRI005|L_HRI003|L_HRI002|L_HRI006");setComboBind([$.cboeval_year,$.cbocreate_option,$.cbojob_rank,$.cboduty_code,$.cboposition_code,$.cbojob_code],ds);var ds2=bizComponentData2($,"Q1","L_HRI005|L_HRI003|L_HRI002|L_HRI006|L_HRE007|L_HRE011");$.grdMaster.setColumnDropDownList("job_rank",ds2.resultList[0]);$.grdMaster.setColumnDropDownList("duty_code",ds2.resultList[1]);$.grdMaster.setColumnDropDownList("position_code",ds2.resultList[2]);$.grdMaster.setColumnDropDownList("job_code",ds2.resultList[3]);$.grdKPI.setColumnDropDownList("kpi_type",ds2.resultList[4]);$.grdKBI.setColumnDropDownList("kbi_type",ds2.resultList[5]);$.grdHistory.setColumnDropDownList("position_code",ds2.resultList[2]);$.grdHistory.setColumnDropDownList("job_rank",ds2.resultList[0]);$.grdHistory.setColumnDropDownList("duty_code",ds2.resultList[1]);$.grdHistory.setColumnDropDownList("job_code",ds2.resultList[3])};$.callback=function(type,ds){tmp1=[];tmp2=[];if(type=="U"){if($.grdMaster.getRowCount()>1){var rIndex=0;if($.initRow){rIndex=$.grdMaster.getGridRowIndex("evaluated_emp",$.strFocus)}$.grdMaster.selectRow(rIndex)}$.initRow=false}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnCreate"){if(!validateControls([$.cboeval_year,$.cboeval_month])){return}if($.visibleYN.getValue()=="N"){$.panCreate.setVisible(true);$.grdMaster.setProperty(0,175,1200,290);$.panInfo.setProperty(0,470,1200,490);$.visibleYN.setValue("Y");$.cboeval_group_code1.setFocus();$.ymdeval_date.setValue($.cboeval_month.getValue()+"01")}else{$.panCreate.setVisible(false);$.grdMaster.setProperty(0,90,1200,290);$.panInfo.setProperty(0,385,1200,490);$.visibleYN.setValue("N");$.panCreate.clear()}}else{if(id=="btnSearch"){QueryClick()}else{if(id=="btnDelete"){if(!validateControls([$.cboeval_year,$.cboeval_month,$.cboeval_group_code2,$.txtdept_code2,$.txtdept_name2,$.txtevaluated_emp2,$.txtemp_name2,$.cbojob_rank,$.cboduty_code,$.cboposition_code,$.cbojob_code,$.txtevaluate_emp1,$.txtemp_name3,$.ymdeval_date1])){return}var strMSG=$.txtemp_name2.getValue()+" 을(를) 삭제하시겠습니까?";confirmBoxShow(strMSG,function(){if(g_main.msgShare){if(fnSET_P_HRE2500_BAT("D","")){QueryClick()}}})}else{if(id=="btnCreate1"){if(fnSET_P_HRE2500_BAT("BATCH","CHECK")){QueryClick()}}else{if(id=="btnMakePermission"){fnSET_P_HRE2500_ASSIGN("MakeList")}}}}}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){if(id=="txtdept_name"){$.popUpCallId=id;var param={dept_name:$.txtdept_name.getValue()};g_main.openPopup("popDept.html","popDept","",0,0,"","",param,"","")}else{if(id=="txtdept_name1"){$.popUpCallId=id;var param={dept_name:$.txtdept_name1.getValue()};g_main.openPopup("popDept.html","popDept","",0,0,"","",param,"","")}else{if(id=="txtdept_name2"){$.popUpCallId=id;var param={dept_name:$.txtdept_name2.getValue()};g_main.openPopup("popDept.html","popDept","",0,0,"","",param,"","")}else{if(id=="txtemp_name"){$.popUpCallId=id;;var param={emp_name:$.txtemp_name.getValue()};g_main.openPopup("popEmpInfo2.html","popEmpInfo","",0,0,"","",param,"","")}else{if(id=="txtemp_name1"){$.popUpCallId=id;var param={emp_name:$.txtemp_name1.getValue()};g_main.openPopup("popEmpInfo2.html","popEmpInfo","",0,0,"","",param,"","")}else{if(id=="txtemp_name2"){$.popUpCallId=id;var param={emp_name:$.txtemp_name2.getValue()};g_main.openPopup("popEmpInfo2.html","popEmpInfo","",0,0,"","",param,"","")}else{if(id=="txtemp_name3"){$.popUpCallId=id;var param={emp_name:$.txtemp_name3.getValue()};g_main.openPopup("popEmpInfo2.html","popEmpInfo","",0,0,"","",param,"","")}else{if(id=="txtemp_name4"){$.popUpCallId=id;var param={emp_name:$.txtemp_name4.getValue()};g_main.openPopup("popEmpInfo2.html","popEmpInfo","",0,0,"","",param,"","")}}}}}}}}};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){if(id=="cboeval_year"){$.cboeval_month.clear();$.cboeval_group_code.clear();$.cboeval_group_code1.clear();$.cboeval_group_code2.clear();var ds1=bizComponentData2($,"Q4","L_HRE009"," and eval_year = '"+$.cboeval_year.getValue()+"'");setComboBind([$.cboeval_month],ds1);var ds2=bizComponentData2($,"Q4","L_HRE014"," and eval_year = '"+$.cboeval_year.getValue()+"'");setComboBind([$.cboeval_group_code],ds2);var ds3=bizComponentData2($,"Q4","L_HRE014"," and eval_year = '"+$.cboeval_year.getValue()+"'");setComboBind([$.cboeval_group_code1],ds3);var ds4=bizComponentData2($,"Q4","L_HRE014"," and eval_year = '"+$.cboeval_year.getValue()+"'");setComboBind([$.cboeval_group_code2],ds4)}};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){$.popUpCallId;if(id=="grdKPI"){if(cInd=="kpi_name"){$.popUpCallId=cInd;var rId=$.grdKPI.getSelectedRowIdx();if($.grdKPI.getRowStatus(rId)=="N"){var param={eval_year:$.grdKPI.getValue(rId,"eval_year"),eval_month:$.grdKPI.getValue(rId,"eval_month")};g_main.openPopup("popKPIPool.html","popKPIPool","연도별 KPI Pool",400,600,"","",param,"","")}}}else{if(id=="grdKBI"){if(cInd=="kbi_name"){$.popUpCallId=cInd;var rId=$.grdKBI.getSelectedRowIdx();if($.grdKBI.getRowStatus(rId)=="N"){var param={eval_year:$.grdKBI.getValue(rId,"eval_year1"),eval_month:$.grdKBI.getValue(rId,"eval_month1")};g_main.openPopup("popKBIPool.html","popKBIPool","연도별 역량 Pool",400,600,"","",param,"","")}}}}};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdMaster"){if($.grdMaster.getRowCount()<1){return}FocusedRowChanged()}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerimage_click=function(id){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panInfo"){if(btnId=="btnAdd"){if(!validateControls([$.cboeval_year,$.cboeval_month])){return}if($.tabMain.getActiveTab()=="0"){$.grdKPI.addRow({eval_year:$.cboeval_year.getValue(),eval_month:$.cboeval_month.getValue(),weighted_rate:0,kpi_progress_rate:0,kpi_achieve_rate:0})}else{if($.tabMain.getActiveTab()=="1"){$.grdKBI.addRow({eval_year1:$.cboeval_year.getValue(),eval_month1:$.cboeval_month.getValue(),weighted_rate:0})}}}else{if(btnId=="btnDelete"){if($.tabMain.getActiveTab()=="0"){if($.grdKPI.getRowCount()<1){return}var rId0=$.grdKPI.getSelectedRowIdx();if($.grdKPI.getRowStatus(rId0)=="N"){$.grdKPI.deleteRow(rId0);$.grdKPI.selectRow(0)}else{confirmBoxShow("정말 삭제하시겠습니까?",function(){if(g_main.msgShare==true){tmp1.push("D",$.cboeval_year.getValue(),$.cboeval_month.getValue(),$.txtevaluated_emp2.getValue(),$.ymdeval_date1.getValue(),$.grdKPI.getValue(rId0,"kpi_code"),$.grdKPI.getValue(rId0,"weighted_rate"),$.grdKPI.getValue(rId0,"kpi_progress_rate"),$.grdKPI.getValue(rId0,"kpi_achieve_rate"),"#EmpCode#","#HostInfo#");$.grdKPI.deleteRow(rId0);$.grdKPI.selectRow(0)}})}}else{if($.tabMain.getActiveTab()=="1"){if($.grdKBI.getRowCount()<1){return}var rId1=$.grdKBI.getSelectedRowIdx();if($.grdKBI.getRowStatus(rId1)=="N"){$.grdKBI.deleteRow(rId1);$.grdKBI.selectRow(0)}else{confirmBoxShow("정말 삭제하시겠습니까?",function(){if(g_main.msgShare==true){tmp2.push("D",$.cboeval_year.getValue(),$.cboeval_month.getValue(),$.txtevaluated_emp2.getValue(),$.ymdeval_date1.getValue(),$.grdKPI.getValue(rId1,"kbi_code"),$.grdKPI.getValue(rId1,"weighted_rate"),"#EmpCode#","#HostInfo#");$.grdKBI.deleteRow(rId1);$.grdKBI.selectRow(0)}})}}}}else{if(btnId=="btnNew"){$.panInfo.clear();$.grdKPI.clear();$.grdKBI.clear();$.grdHistory.clear();fnReadOnly(false);$.ymdeval_date1.setValue(getToday(""));$.numeval_weighted_rate.setValue("100");$.cboeval_group_code2.setFocus()}else{if(btnId=="btnSave"){var strStatus="";if($.txtevaluated_emp2.getReadOnly()==true){strStatus="U"}else{strStatus="N"}var rId=$.grdMaster.getSelectedRowIdx();$.strFocus=$.grdMaster.getValue(rId,"evaluated_emp");if(fnSET_P_HRE2500_BAT(strStatus,"")){fnSET_P_HRE2500_BAT("U","");fnSET_P_HRE2500_KPI_S("");fnSET_P_HRE2500_KBI_S("");$.initRow=true;QueryClick()}}}}}}};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if($.popUpCallId=="kpi_name"){if(popResult!=null){var rId=$.grdKPI.getSelectedRowIdx();$.grdKPI.setValue(rId,"kpi_type",popResult.kpi_type);$.grdKPI.setValue(rId,"kpi_code",popResult.kpi_code);$.grdKPI.setValue(rId,"kpi_name",popResult.kpi_name);$.grdKPI.setValue(rId,"kpi_csf",popResult.kpi_csf)}}else{if($.popUpCallId=="kbi_name"){if(popResult!=null){var rId=$.grdKBI.getSelectedRowIdx();$.grdKBI.setValue(rId,"kbi_type",popResult.kbi_type);$.grdKBI.setValue(rId,"kbi_code",popResult.kbi_code);$.grdKBI.setValue(rId,"kbi_name",popResult.kbi_name);$.grdKBI.setValue(rId,"kbi_level_memo",popResult.kbi_level_memo)}}else{if($.popUpCallId=="txtdept_name"){if(popResult!=null){$.txtdept_code.setValue(popResult.dept_code);$.txtdept_name.setText(popResult.dept_name)}}else{if($.popUpCallId=="txtdept_name1"){if(popResult!=null){$.txtdept_code1.setValue(popResult.dept_code);$.txtdept_name1.setText(popResult.dept_name)}}else{if($.popUpCallId=="txtdept_name2"){if(popResult!=null){$.txtdept_code2.setValue(popResult.dept_code);$.txtdept_name2.setText(popResult.dept_name)}}else{if($.popUpCallId=="txtemp_name"){if(popResult!=null){$.txtevaluated_emp.setValue(popResult.employee_id);$.txtemp_name.setText(popResult.emp_name)}}else{if($.popUpCallId=="txtemp_name1"){if(popResult!=null){$.txtevaluated_emp1.setValue(popResult.employee_id);$.txtemp_name1.setText(popResult.emp_name)}}else{if($.popUpCallId=="txtemp_name2"){if(popResult!=null){$.txtevaluated_emp2.setValue(popResult.employee_id);$.txtemp_name2.setText(popResult.emp_name)}}else{if($.popUpCallId=="txtemp_name3"){if(popResult!=null){$.txtevaluate_emp1.setValue(popResult.employee_id);$.txtemp_name3.setText(popResult.emp_name)}}else{if($.popUpCallId=="txtemp_name4"){if(popResult!=null){$.txtevaluate_emp2.setValue(popResult.employee_id);$.txtemp_name4.setText(popResult.emp_name)}}}}}}}}}}}};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>