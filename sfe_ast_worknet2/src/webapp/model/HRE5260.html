<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panQuery=null;$.panTab=null;$.lblYear=null;$.dteYear=null;$.lblEvalMonth=null;$.cmbEvalMonth=null;$.lblEmpName=null;$.bteEmpName=null;$.tabMain=null;$.panTab1=null;$.panTab2=null;$.grdList1=null;$.grdList2=null;$.btnSearch=null;$.cmbYear=null;$.cmbEmpName=null;$.empId="";function createJSON_Q1(workType){var json=createExecuteParamInfo("HR..P_HRE4120_KPI_Q",[workType,$.cmbYear.getValue(),$.cmbEvalMonth.getValue(),$.cmbEmpName.getValue()]);return json}function createJSON_Q2(workType){var json=createExecuteParamInfo("HR..P_HRE4120_Comp_Q",[workType,$.cmbYear.getValue(),$.cmbEvalMonth.getValue(),$.cmbEmpName.getValue()]);return json}function searchKPI(workType){var json=createJSON_Q1(workType);callQuery(["req",json],"KPI",$)}function searchComp(workType){var json=createJSON_Q2(workType);callQuery(["req",json],"Comp",$)}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,900);$.panMain.setText("");$.panMain.setBottomLine(true);$.panQuery=new FingerPanel(host,"panQuery",0,0,1200,95);$.panQuery.setText("");$.panQuery.setBottomLine(true);$.panTab=new FingerPanel(host,"panTab",0,100,1200,800);$.panTab.setText("");$.panTab.setBottomLine(true);$.lblYear=new FingerLabel(host,"lblYear",115,30,80,20);$.lblYear.setText("평가년도");$.dteYear=new FingerDateEdit(host,"dteYear",85,30,140,20);$.lblEvalMonth=new FingerLabel(host,"lblEvalMonth",415,30,80,20);$.lblEvalMonth.setText("평가명");$.cmbEvalMonth=new FingerComboBox(host,"cmbEvalMonth",500,30,210,20);$.lblEmpName=new FingerLabel(host,"lblEmpName",770,30,80,20);$.lblEmpName.setText("이름");$.bteEmpName=new FingerButtonEdit(host,"bteEmpName",870,70,140,20);$.bteEmpName.setText("");$.tabMain=new FingerTab(host,"tabMain",0,0,1200,800);$.panTab1=new FingerPanel(host,"panTab1",0,0,1200,800);$.panTab1.setText("KPI 목록");$.panTab1.setBottomLine(true);$.panTab2=new FingerPanel(host,"panTab2",0,0,1200,815);$.panTab2.setText("Competencies");$.panTab2.setBottomLine(true);$.grdList1=new FingerDataGrid(host,"grdList1",0,0,1200,720);$.grdList2=new FingerDataGrid(host,"grdList2",0,0,1200,720);$.btnSearch=new FingerButton(host,"btnSearch",185,-37.5,80,20);$.btnSearch.setText("조회");$.cmbYear=new FingerComboBox(host,"cmbYear",200,30,140,20);$.cmbEmpName=new FingerComboBox(host,"cmbEmpName",870,30,150,20);$.tabMain.addTab([{text:"업적KPI",body:$.panTab1,width:150},{text:"역량 7' Competencies",body:$.panTab2,width:150}]);$.cmbYear.setAllowBlank(false,"평가년도");$.cmbEvalMonth.setAllowBlank(false,"평가명");$.cmbEmpName.setAllowBlank(false,"피평가자");$.bteEmpName.setVisible(false);$.grdList1.colIdx=$.grdList1.setColumns([new FingerDataGridColumn("kpi_type",70,"left","string",[{text:"",colspan:5},"성과구분"],{hidden:true}),new FingerDataGridColumn("kpi_code",70,"left","string",["","KPI코드"],{hidden:true}),new FingerDataGridColumn("kpi_csf",140,"left","string",["","핵심실행과제"],{readonly:true,multiLine:true,verticalMiddle:true}),new FingerDataGridColumn("kpi_name",140,"left","string",["","KPI"],{readonly:true,multiLine:true,verticalMiddle:true}),new FingerDataGridColumn("weighted_rate",80,"center","string",["","가중치(%)"],{readonly:true,footer:{content:"summColumn"},verticalMiddle:true}),new FingerDataGridColumn("kpi_progress_state_1q",250,"left","multi_line_edit",[{text:"1Q",colspan:3},"진행상황"],{readonly:true}),new FingerDataGridColumn("kpi_plan_request_1q",250,"left","multi_line_edit",["","향후 Action Plan 및 제안(요청사항)"],{readonly:true}),new FingerDataGridColumn("mgr_feedback_1q",250,"left","multi_line_edit",["","상사 feedback"],{readonly:true}),new FingerDataGridColumn("kpi_progress_state_2q",250,"left","multi_line_edit",[{text:"2Q",colspan:3},"진행상황"],{readonly:true}),new FingerDataGridColumn("kpi_plan_request_2q",250,"left","multi_line_edit",["","향후 Action Plan 및 제안(요청사항)"],{readonly:true}),new FingerDataGridColumn("mgr_feedback_2q",250,"left","multi_line_edit",["","상사 feedback"],{readonly:true})]);$.grdList1.init({panel:$.panTab1,scroll:"xy",footer:true,eventCellReadOnly:true,rowHeight:140});$.grdList1.setEditable(true);$.grdList2.colIdx=$.grdList2.setColumns([new FingerDataGridColumn("comp_name",140,"center","string","역량항목<br>Astellas<br>7Competencies",{readonly:true,multiLine:true,verticalMiddle:true}),new FingerDataGridColumn("competency_level",140,"left","string","역량구분",{hidden:true}),new FingerDataGridColumn("comp_code",140,"left","string","역량코드",{hidden:true}),new FingerDataGridColumn("kbi_code",140,"left","string","KBI 코드",{hidden:true}),new FingerDataGridColumn("self_review_1q",250,"left","multi_line_edit","1Q(본인행동기록)<br>(현재 수준 및<br> 역량행동 Review)",{readonly:true}),new FingerDataGridColumn("feedback_1q",250,"left","multi_line_edit","1Q(상사 Feedback)<br>(육성Point 및 진행사항,<br> 코칭Point)",{readonly:true}),new FingerDataGridColumn("self_review_2q",250,"left","multi_line_edit","2Q(본인행동기록)<br>(현재 수준 및<br> 역량행동 Review)",{readonly:true}),new FingerDataGridColumn("feedback_2q",250,"left","multi_line_edit","2Q(상사 Feedback)<br>(육성Point 및 진행사항,<br> 코칭Point)",{readonly:true}),new FingerDataGridColumn("self_review_3q",250,"left","multi_line_edit","3Q(본인행동기록)<br>(현재 수준 및<br> 역량행동 Review)",{readonly:true}),new FingerDataGridColumn("feedback_3q",250,"left","multi_line_edit","3Q(상사 Feedback)<br>(육성Point 및 진행사항,<br> 코칭Point)",{readonly:true}),new FingerDataGridColumn("self_review_4q",250,"left","multi_line_edit","4Q(본인행동기록)<br>(현재 수준 및<br>  역량행동 Review)",{readonly:true}),new FingerDataGridColumn("feedback_4q",250,"left","multi_line_edit","4Q(상사 Feedback)<br>(육성Point 및 진행사항,<br> 코칭Point)",{readonly:true})]);$.grdList2.init({panel:$.panTab2,scroll:"xy",headerRowHeight:60,rowHeight:140});$.grdList2.setEditable(true);$.cmbEvalMonth.setEmptyRow(true);$.dteYear.setVisible(false);$.bteEmpName.setDirectSearch("#EMP#",function(ds){if(ds&&ds.resultList&&ds.resultList[0]){var list=ds.resultList[0];if(list.length==1){$.bteEmpName.setValue(list[0]["value"]);$.bteEmpName.setText(list[0]["text"]);$.fingerbutton_click("btnSearch")}else{$.fingerbuttonedit_click("bteEmpName")}}});$.host=host;$.args=args};$.start=function(){$.panMain.add($.panQuery);$.panMain.add($.panTab);$.panQuery.add($.lblYear);$.panQuery.add($.dteYear);$.panQuery.add($.lblEvalMonth);$.panQuery.add($.cmbEvalMonth);$.panQuery.add($.lblEmpName);$.panQuery.add($.bteEmpName);$.panQuery.add($.btnSearch);$.panQuery.add($.cmbYear);$.panTab.add($.tabMain);$.panTab1.add($.grdList1);$.panTab2.add($.grdList2);$.empId=g_main.session.getValue("UserID");$.cmbEvalMonth.setColumn("eval_month","eval_name");$.cmbYear.setColumn("eval_year","eval_year1");$.cmbEmpName.setColumn("employee_id","emp_name");var ds=bizComponentData2($,"Q1","L_HRE010_2");setComboBind([$.cmbYear],ds);var strQuery="where eval_year = '"+$.cmbYear.getValue()+"'";var ds2=bizComponentData2($,"Q4","L_HRE0090_2",strQuery);setComboBind([$.cmbEvalMonth],ds2);var strQuery2="where (employee_id = '"+$.empId+"') or (line1empno = '"+$.empId+"') or (line1empno = employee_id and line2empno = '"+$.empId+"') or (line2empno = employee_id and line3empno ='"+$.empId+"') or (line3empno = employee_id and line4empno ='"+$.empId+"') or (line4empno = employee_id and line5empno ='"+$.empId+"')";var ds3=bizComponentData2($,"Q4","L_HRE038",strQuery2);setComboBind([$.cmbEmpName],ds3)};$.callback=function(type,ds){if(type=="RERIOD"){if(ds.resultList[0].length>0){$.txtEvalPeriod.setValue(ds.resultList[0][0].eval_period)}else{$.txtEvalPeriod.setValue("")}}else{if(type=="Comp"){if(ds.resultList[0].length>0){setDataGrid([$.grdList2],ds)}else{setDataGrid([$.grdList2],ds);$.grdList2.setDisplayPanelRowCount(0)}}else{if(type=="KPI"){if(ds.resultList[0].length>0){setDataGrid([$.grdList1],ds);$.grdList1.selectRow(0)}else{setDataGrid([$.grdList1],ds);$.grdList1.setDisplayPanelRowCount(0)}}else{if(type=="S_KPI"){searchKPI("Q")}else{if(type=="S_Comp"){searchComp("Q")}else{if(type=="S_SMARTSheet"){searchSMARTSheet("Q")}}}}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){if($.cmbEvalMonth.getValue()==""){$.txtEvalPeriod.setValue("");return}else{searchComp("Q");searchKPI("Q")}}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){if(id=="cmbEvalMonth"){if($.cmbEmpName.getValue()==""){return}else{searchComp("Q");searchKPI("Q")}}else{if(id=="cmbYear"){$.cmbEvalMonth.clear();$.cmbEvalMonth.setColumn("eval_month","eval_name");var strQuery="where eval_year = '"+$.cmbYear.getValue()+"'";var ds2=bizComponentData2($,"Q4","L_HRE0090_2",strQuery);setComboBind([$.cmbEvalMonth],ds2)}else{if(id=="cmbEmpName"){if($.cmbEvalMonth.getValue()==""||$.cmbYear.getValue==""){return}else{searchComp("Q");searchKPI("Q")}}}}};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerimage_click=function(id){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(popResult){if(id=="popEmp"){if($.popUpCallId=="bteEmpName"){if(popResult.employee_id){$.bteEmpName.setValue(popResult.employee_id);$.bteEmpName.setText(popResult.emp_name);$.fingerbutton_click("btnSearch")}}}}};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>