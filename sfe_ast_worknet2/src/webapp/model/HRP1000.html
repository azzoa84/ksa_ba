<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panLeftTop=null;$.grdMaster=null;$.panMaster=null;$.panInfo=null;$.panAnnualInfo=null;$.panInsurance=null;$.panPay=null;$.panDed=null;$.grdPay=null;$.grdDed=null;$.lbl_site_code=null;$.cmb_site_code=null;$.lbl_dept=null;$.txt_dept_code=null;$.bte_dept_name=null;$.lbl_emp=null;$.txt_emp_code=null;$.bte_emp_name=null;$.lbl_emp_state=null;$.cmb_emp_state=null;$.lbl_emp_code1=null;$.txt_emp_code1=null;$.lbl_emp_name1=null;$.txt_emp_name1=null;$.lbl_site_code1=null;$.cmb_site_code1=null;$.lbl_dept1=null;$.txt_dept_code1=null;$.bte_dept_name1=null;$.lbl_emp_type=null;$.cmb_emp_type=null;$.lbl_job_rank=null;$.cmb_job_rank=null;$.lbl_enter_date=null;$.dte_enter_date=null;$.lbl_bank=null;$.txt_bank_code=null;$.bte_bank_name=null;$.lbl_bank_account=null;$.txt_bank_account=null;$.lbl_bank_depositor=null;$.txt_bank_depositor=null;$.lbl_pay_group_code=null;$.cmb_pay_group_code=null;$.lbl_annual_salary_amt=null;$.spe_annual_salary_amt=null;$.lbl_annual_salary_start_date=null;$.dte_annual_salary_start_date=null;$.lbl_salary_base_amt=null;$.spe_salary_base_amt=null;$.chk_pay_yn=null;$.lbl_bonus_base_amt=null;$.spe_bonus_base_amt=null;$.chk_bonus_pay_yn=null;$.chk_retire_pay_yn=null;$.lbl_supportee_qty=null;$.spe_supportee_qty=null;$.lbl_memo=null;$.txt_memo=null;$.lbl_taxtable_income_tax_rate=null;$.spe_taxtable_income_tax_rate=null;$.lbl_Ex1=null;$.lbl_children_qty=null;$.lbl_income_tax_rate=null;$.spe_income_tax_rate=null;$.spe_children_qty=null;$.chk_pension_yn=null;$.chk_health_insure_yn=null;$.chk_employ_insure_yn=null;$.lbl_pension_join_date=null;$.dte_pension_join_date=null;$.lbl_health_insure_join_date=null;$.dte_health_insure_join_date=null;$.lbl_pension_close_date=null;$.dte_pension_close_date=null;$.lbl_heath_insure_close_date=null;$.dte_heath_insure_close_date=null;$.lbl_pension_no=null;$.txt_pension_no=null;$.lbl_health_insure_no=null;$.txt_health_insure_no=null;$.lbl_pension_base_amt=null;$.spe_pension_base_amt=null;$.lbl_health_insure_base_amt=null;$.spe_health_insure_base_amt=null;$.lbl_employ_insure_base_amt=null;$.spe_employ_insure_base_amt=null;$.lbl_longterm_care_deduct_rate=null;$.spe_longterm_care_deduct_rate=null;$.btnSearch=null;$.initRow=false;function createJson_Q(workType){var rId=$.grdMaster.getSelectedRowIdx();var json=createExecuteParamInfo("HR..P_HRP1000_Q",[workType,$.cmb_site_code.getValue(),$.txt_dept_code.getValue()||"",workType=="DETAIL"?$.grdMaster.getValue(rId,"emp_code"):$.txt_emp_code.getValue()||"",$.cmb_emp_state.getValue()]);return json}function createJson_S(workType){var strtype="";var strpay_type="";var strpay_item_code="";var strapply_start_date="";var strapply_end_date="";var strpay_amt="";var payRow=$.grdPay.getAllRows();var dedRow=$.grdDed.getAllRows();if(payRow.length>0){for(var i=0;i<payRow.length;i++){for(var j=i+1;j<payRow.length;j++){if(payRow[i].pay_type==payRow[j].pay_type&&payRow[i].pay_item_code==payRow[j].pay_item_code&&payRow[i].apply_start_date==payRow[j].apply_start_date&&payRow[i].apply_end_date==payRow[j].apply_end_date){MessageBoxShow("중복된 수당항목이 존재합니다.");return false}}}}if(dedRow.length>0){for(var i=0;i<dedRow.length;i++){for(var j=i+1;j<dedRow.length;j++){if(dedRow[i].pay_type==dedRow[j].pay_type&&dedRow[i].pay_item_code==dedRow[j].pay_item_code&&dedRow[i].apply_start_date==dedRow[j].apply_start_date&&dedRow[i].apply_end_date==dedRow[j].apply_end_date){MessageBoxShow("중복된 공제항목이 존재합니다.");return false}}}}if(payRow.length>0){strtype="PAY";strpay_type=payRow[0].pay_type;strpay_item_code=payRow[0].pay_item_code;strapply_start_date=getFormatDate(payRow[0].apply_start_date,"yyyyMMdd").substring(0,8);strapply_end_date=getFormatDate(payRow[0].apply_end_date,"yyyyMMdd").substring(0,8);strpay_amt=payRow[0].pay_amt}for(var i=1;i<payRow.length;i++){strtype+="|PAY";strpay_type+="|"+payRow[i].pay_type;strpay_item_code+="|"+payRow[i].pay_item_code;strapply_start_date+="|"+getFormatDate(payRow[i].apply_start_date,"yyyyMMdd").substring(0,8);strapply_end_date+="|"+getFormatDate(payRow[i].apply_end_date,"yyyyMMdd").substring(0,8);strpay_amt+="|"+payRow[i].pay_amt}if(dedRow.length>0){if(strtype!=""){strtype+="|";strpay_type+="|";strpay_item_code+="|";strapply_start_date+="|";strapply_end_date+="|";strpay_amt+="|"}strtype+="DED";strpay_type+=dedRow[0].pay_type;strpay_item_code+=dedRow[0].pay_item_code;strapply_start_date+=getFormatDate(dedRow[0].apply_start_date,"yyyyMMdd").substring(0,8);strapply_end_date+=getFormatDate(dedRow[0].apply_end_date,"yyyyMMdd").substring(0,8);strpay_amt+=dedRow[0].pay_amt}for(var i=1;i<dedRow.length;i++){strtype+="|DED";strpay_type+="|"+dedRow[i].pay_type;strpay_item_code+="|"+dedRow[i].pay_item_code;strapply_start_date+="|"+getFormatDate(dedRow[i].apply_start_date,"yyyyMMdd").substring(0,8);strapply_end_date+="|"+getFormatDate(dedRow[i].apply_end_date,"yyyyMMdd").substring(0,8);strpay_amt+="|"+dedRow[i].pay_amt}var json=createExecuteParamInfo("HR..P_HRP1000_S",[workType,$.txt_emp_code1.getValue(),$.cmb_pay_group_code.getValue(),$.chk_pay_yn.getValue(),$.chk_bonus_pay_yn.getValue(),$.chk_retire_pay_yn.getValue(),Number($.spe_supportee_qty.getValue()||0),$.txt_memo.getValue()||"",Number($.spe_children_qty.getValue()||0),Number($.spe_annual_salary_amt.getValue()||0),$.dte_annual_salary_start_date.getValue(),Number($.spe_salary_base_amt.getValue()||0),Number($.spe_bonus_base_amt.getValue()||0),Number($.spe_income_tax_rate.getValue()||0),Number($.spe_taxtable_income_tax_rate.getValue()||0),$.chk_pension_yn.getValue(),$.dte_pension_join_date.getValue()||"",$.dte_pension_close_date.getValue()||"",$.txt_pension_no.getValue()||"",Number($.spe_pension_base_amt.getValue()||0),$.chk_health_insure_yn.getValue(),$.dte_health_insure_join_date.getValue()||"",$.dte_heath_insure_close_date.getValue()||"",$.txt_health_insure_no.getValue()||"",Number($.spe_health_insure_base_amt.getValue()||0),Number($.spe_longterm_care_deduct_rate.getValue())||0,$.chk_employ_insure_yn.getValue(),Number($.spe_employ_insure_base_amt.getValue()||0),$.txt_bank_code.getValue()||"",$.txt_bank_account.getValue()||"",$.txt_bank_depositor.getValue()||"","#UserID#","#HostInfo#",strtype,strpay_type,strpay_item_code,strapply_start_date,strapply_end_date,strpay_amt]);return json}function searchHRP1000(workType){if(workType=="MASTER"){if(!$.panLeftTop.validateControls()){return}}var json=createJson_Q(workType);callQuery(["req",json],workType,$)}function saveHRP1000(workType){if(!$.panLeftTop.validateControls()||!validateControls([$.cmb_pay_group_code,$.dte_annual_salary_start_date])){return}if(!gridValidator($.grdPay,"pay_type","pay_item_code","apply_start_date","apply_end_date")||!gridValidator($.grdDed,"pay_type","pay_item_code","apply_start_date","apply_end_date")){return}if($.spe_taxtable_income_tax_rate.getValue()!=80&&$.spe_taxtable_income_tax_rate.getValue()!=100&&$.spe_taxtable_income_tax_rate.getValue()!=120){MessageBoxShow("소득세율을 80, 100, 120으로 정확히 입력해 주세요.");return}var json=createJson_S(workType);if(!json){return}callExecute(["req",json],workType,$)}function queryClick(){searchHRP1000("MASTER")}function focusedRowChanged(){searchHRP1000("DETAIL")}function initView(){$.panInfo.clear();$.panAnnualInfo.clear();$.panInsurance.clear();$.grdPay.clear();$.grdDed.clear()}function saveButton(bo){if(bo){$.panInfo.enableButton(["btnSave"])}else{$.panInfo.disableButton(["btnSave"])}}function gridValidator(){if(arguments.length<2){return false}var grdName=arguments[0];for(var i=0;i<grdName.getRowCount();i++){for(var j=1;j<arguments.length;j++){if(grdName.getValue(i,arguments[j])==""||grdName.getValue(i,arguments[j])==null){MessageBoxShow(grdName.getColumnText(arguments[j])+" 은(는) 필수 입력항목입니다");return false}}}return true}function getObjectDate(objDate){var year=parseInt(objDate.year)+1900;var month=parseInt(objDate.month)+1;var date=objDate.date;if(parseInt(month)<10){month="0"+month}if(parseInt(date)<10){date="0"+date}return year+""+month+""+date}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,770);$.panMain.setText("");$.panMain.setBottomLine(true);$.panLeftTop=new FingerPanel(host,"panLeftTop",0,0,320,185);$.panLeftTop.setText("사원 리스트");$.panLeftTop.setBottomLine(true);$.grdMaster=new FingerDataGrid(host,"grdMaster",0,0,320,567);$.panMaster=new FingerPanel(host,"panMaster",0,195,320,567);$.panMaster.setText("");$.panMaster.setBottomLine(true);$.panInfo=new FingerPanel(host,"panInfo",330,0,870,185);$.panInfo.setText("인사 기본 정보");$.panInfo.setBottomLine(true);$.panAnnualInfo=new FingerPanel(host,"panAnnualInfo",330,195,410,245);$.panAnnualInfo.setText("급여 정보");$.panAnnualInfo.setBottomLine(true);$.panInsurance=new FingerPanel(host,"panInsurance",750,195,450,245);$.panInsurance.setText("사회 보험");$.panInsurance.setBottomLine(true);$.panPay=new FingerPanel(host,"panPay",330,450,410,310);$.panPay.setText("고정 수당항목");$.panPay.setBottomLine(true);$.panDed=new FingerPanel(host,"panDed",750,450,450,310);$.panDed.setText("고정 공제항목");$.panDed.setBottomLine(true);$.grdPay=new FingerDataGrid(host,"grdPay",0,0,410,265);$.grdDed=new FingerDataGrid(host,"grdDed",0,0,450,265);$.lbl_site_code=new FingerLabel(host,"lbl_site_code",0,10,100,20);$.lbl_site_code.setText("사업장");$.cmb_site_code=new FingerComboBox(host,"cmb_site_code",105,10,210,20);$.lbl_dept=new FingerLabel(host,"lbl_dept",0,40,100,20);$.lbl_dept.setText("부서");$.txt_dept_code=new FingerEdit(host,"txt_dept_code",105,40,80,20);$.bte_dept_name=new FingerButtonEdit(host,"bte_dept_name",190,40,120,20);$.bte_dept_name.setText("");$.lbl_emp=new FingerLabel(host,"lbl_emp",0,70,100,20);$.lbl_emp.setText("사원");$.txt_emp_code=new FingerEdit(host,"txt_emp_code",105,70,80,20);$.bte_emp_name=new FingerButtonEdit(host,"bte_emp_name",190,70,120,20);$.bte_emp_name.setText("");$.lbl_emp_state=new FingerLabel(host,"lbl_emp_state",0,100,100,20);$.lbl_emp_state.setText("재직구분");$.cmb_emp_state=new FingerComboBox(host,"cmb_emp_state",105,100,210,20);$.lbl_emp_code1=new FingerLabel(host,"lbl_emp_code1",0,10,100,20);$.lbl_emp_code1.setText("사번");$.txt_emp_code1=new FingerEdit(host,"txt_emp_code1",105,10,200,20);$.lbl_emp_name1=new FingerLabel(host,"lbl_emp_name1",315,10,100,20);$.lbl_emp_name1.setText("이름");$.txt_emp_name1=new FingerEdit(host,"txt_emp_name1",420,10,200,20);$.lbl_site_code1=new FingerLabel(host,"lbl_site_code1",0,40,100,20);$.lbl_site_code1.setText("사업장");$.cmb_site_code1=new FingerComboBox(host,"cmb_site_code1",105,40,200,20);$.lbl_dept1=new FingerLabel(host,"lbl_dept1",315,40,100,20);$.lbl_dept1.setText("부서");$.txt_dept_code1=new FingerEdit(host,"txt_dept_code1",420,40,70,20);$.bte_dept_name1=new FingerButtonEdit(host,"bte_dept_name1",495,40,125,20);$.bte_dept_name1.setText("");$.lbl_emp_type=new FingerLabel(host,"lbl_emp_type",0,70,100,20);$.lbl_emp_type.setText("사원구분");$.cmb_emp_type=new FingerComboBox(host,"cmb_emp_type",105,70,200,20);$.lbl_job_rank=new FingerLabel(host,"lbl_job_rank",315,70,100,20);$.lbl_job_rank.setText("직급");$.cmb_job_rank=new FingerComboBox(host,"cmb_job_rank",420,70,200,20);$.lbl_enter_date=new FingerLabel(host,"lbl_enter_date",615,70,100,20);$.lbl_enter_date.setText("입사일");$.dte_enter_date=new FingerDateEdit(host,"dte_enter_date",720,70,120,20);$.lbl_bank=new FingerLabel(host,"lbl_bank",0,100,100,20);$.lbl_bank.setText("은행");$.txt_bank_code=new FingerEdit(host,"txt_bank_code",105,100,70,20);$.bte_bank_name=new FingerButtonEdit(host,"bte_bank_name",180,100,125,20);$.bte_bank_name.setText("");$.lbl_bank_account=new FingerLabel(host,"lbl_bank_account",315,100,100,20);$.lbl_bank_account.setText("계좌번호");$.txt_bank_account=new FingerEdit(host,"txt_bank_account",420,100,200,20);$.lbl_bank_depositor=new FingerLabel(host,"lbl_bank_depositor",615,100,100,20);$.lbl_bank_depositor.setText("예금주");$.txt_bank_depositor=new FingerEdit(host,"txt_bank_depositor",720,100,120,20);$.lbl_pay_group_code=new FingerLabel(host,"lbl_pay_group_code",0,10,100,20);$.lbl_pay_group_code.setText("급여체계");$.cmb_pay_group_code=new FingerComboBox(host,"cmb_pay_group_code",105,10,110,20);$.lbl_annual_salary_amt=new FingerLabel(host,"lbl_annual_salary_amt",0,40,100,20);$.lbl_annual_salary_amt.setText("연봉");$.spe_annual_salary_amt=new FingerSpinEdit(host,"spe_annual_salary_amt",105,40,85,20);$.lbl_annual_salary_start_date=new FingerLabel(host,"lbl_annual_salary_start_date",190,40,110,20);$.lbl_annual_salary_start_date.setText("연봉적용시작일");$.dte_annual_salary_start_date=new FingerDateEdit(host,"dte_annual_salary_start_date",305,40,95,20);$.lbl_salary_base_amt=new FingerLabel(host,"lbl_salary_base_amt",0,70,100,20);$.lbl_salary_base_amt.setText("급여기본급");$.spe_salary_base_amt=new FingerSpinEdit(host,"spe_salary_base_amt",105,70,85,20);$.chk_pay_yn=new FingerCheckBox(host,"chk_pay_yn",200,70,140,20);$.chk_pay_yn.setText("급여지급");$.lbl_bonus_base_amt=new FingerLabel(host,"lbl_bonus_base_amt",0,100,100,20);$.lbl_bonus_base_amt.setText("상여기본급");$.spe_bonus_base_amt=new FingerSpinEdit(host,"spe_bonus_base_amt",105,100,85,20);$.chk_bonus_pay_yn=new FingerCheckBox(host,"chk_bonus_pay_yn",200,100,85,20);$.chk_bonus_pay_yn.setText("상여지급");$.chk_retire_pay_yn=new FingerCheckBox(host,"chk_retire_pay_yn",295,100,100,20);$.chk_retire_pay_yn.setText("퇴직금 지급");$.lbl_supportee_qty=new FingerLabel(host,"lbl_supportee_qty",0,130,100,20);$.lbl_supportee_qty.setText("부양자수");$.spe_supportee_qty=new FingerSpinEdit(host,"spe_supportee_qty",105,130,85,20);$.lbl_memo=new FingerLabel(host,"lbl_memo",135,130,100,20);$.lbl_memo.setText("메모");$.txt_memo=new FingerEdit(host,"txt_memo",240,130,160,20);$.lbl_taxtable_income_tax_rate=new FingerLabel(host,"lbl_taxtable_income_tax_rate",0,160,100,20);$.lbl_taxtable_income_tax_rate.setText("소득세율(%)");$.spe_taxtable_income_tax_rate=new FingerSpinEdit(host,"spe_taxtable_income_tax_rate",105,160,85,20);$.lbl_Ex1=new FingerLabel(host,"lbl_Ex1",190,160,20,20);$.lbl_Ex1.setText("%");$.lbl_children_qty=new FingerLabel(host,"lbl_children_qty",205,160,110,20);$.lbl_children_qty.setText("20세미만자녀수");$.lbl_income_tax_rate=new FingerLabel(host,"lbl_income_tax_rate",210,160,100,20);$.lbl_income_tax_rate.setText("소득세율(%)");$.spe_income_tax_rate=new FingerSpinEdit(host,"spe_income_tax_rate",275,170,65,20);$.spe_children_qty=new FingerSpinEdit(host,"spe_children_qty",340,170,65,20);$.chk_pension_yn=new FingerCheckBox(host,"chk_pension_yn",0,10,140,20);$.chk_pension_yn.setText("국민연금 대상");$.chk_health_insure_yn=new FingerCheckBox(host,"chk_health_insure_yn",145,10,140,20);$.chk_health_insure_yn.setText("건강보험 대상");$.chk_employ_insure_yn=new FingerCheckBox(host,"chk_employ_insure_yn",290,10,140,20);$.chk_employ_insure_yn.setText("고용보험 대상");$.lbl_pension_join_date=new FingerLabel(host,"lbl_pension_join_date",15,40,105,20);$.lbl_pension_join_date.setText("국민연금취득일");$.dte_pension_join_date=new FingerDateEdit(host,"dte_pension_join_date",125,40,95,20);$.lbl_health_insure_join_date=new FingerLabel(host,"lbl_health_insure_join_date",225,40,115,20);$.lbl_health_insure_join_date.setText("건강보험취득일");$.dte_health_insure_join_date=new FingerDateEdit(host,"dte_health_insure_join_date",345,40,95,20);$.lbl_pension_close_date=new FingerLabel(host,"lbl_pension_close_date",15,70,105,20);$.lbl_pension_close_date.setText("국민연금상실일");$.dte_pension_close_date=new FingerDateEdit(host,"dte_pension_close_date",125,70,95,20);$.lbl_heath_insure_close_date=new FingerLabel(host,"lbl_heath_insure_close_date",235,70,105,20);$.lbl_heath_insure_close_date.setText("건강보험상실일");$.dte_heath_insure_close_date=new FingerDateEdit(host,"dte_heath_insure_close_date",345,70,95,20);$.lbl_pension_no=new FingerLabel(host,"lbl_pension_no",15,100,105,20);$.lbl_pension_no.setText("국민연금번호");$.txt_pension_no=new FingerEdit(host,"txt_pension_no",125,100,95,20);$.lbl_health_insure_no=new FingerLabel(host,"lbl_health_insure_no",240,100,100,20);$.lbl_health_insure_no.setText("건강보험번호");$.txt_health_insure_no=new FingerEdit(host,"txt_health_insure_no",345,100,95,20);$.lbl_pension_base_amt=new FingerLabel(host,"lbl_pension_base_amt",0,130,120,20);$.lbl_pension_base_amt.setText("국민연금보수월액");$.spe_pension_base_amt=new FingerSpinEdit(host,"spe_pension_base_amt",125,130,95,20);$.lbl_health_insure_base_amt=new FingerLabel(host,"lbl_health_insure_base_amt",220,130,120,20);$.lbl_health_insure_base_amt.setText("건강보험보수월액");$.spe_health_insure_base_amt=new FingerSpinEdit(host,"spe_health_insure_base_amt",345,130,95,25);$.lbl_employ_insure_base_amt=new FingerLabel(host,"lbl_employ_insure_base_amt",0,160,120,20);$.lbl_employ_insure_base_amt.setText("고용보험보수월액");$.spe_employ_insure_base_amt=new FingerSpinEdit(host,"spe_employ_insure_base_amt",125,160,95,20);$.lbl_longterm_care_deduct_rate=new FingerLabel(host,"lbl_longterm_care_deduct_rate",220,160,155,20);$.lbl_longterm_care_deduct_rate.setText("장기요양보험경감율(%)");$.spe_longterm_care_deduct_rate=new FingerSpinEdit(host,"spe_longterm_care_deduct_rate",380,160,60,25);$.btnSearch=new FingerButton(host,"btnSearch",240,-37.5,80,20);$.btnSearch.setText("조회");$.panInfo.addButtons(["btnDelete","btnSave"]);$.panPay.addButtons(["btnDelete","btnAdd"]);$.panDed.addButtons(["btnDelete","btnAdd"]);$.txt_emp_code.setValue("");$.txt_emp_code1.setReadOnly(true);$.txt_emp_name1.setReadOnly(true);$.cmb_site_code1.setReadOnly(true);$.txt_dept_code1.setReadOnly(true);$.bte_dept_name1.setReadOnly(true);$.cmb_emp_type.setReadOnly(true);$.cmb_job_rank.setReadOnly(true);$.dte_enter_date.setReadOnly(true);$.lbl_children_qty.setVisible(false);$.lbl_income_tax_rate.setVisible(false);$.spe_income_tax_rate.setVisible(false);$.spe_children_qty.setVisible(false);$.cmb_site_code1.setEmptyRow(true);$.cmb_emp_type.setEmptyRow(true);$.cmb_job_rank.setEmptyRow(true);$.cmb_pay_group_code.setEmptyRow(true);$.cmb_site_code.setAllowBlank(false,"사업장");$.cmb_emp_state.setAllowBlank(false,"재직구분");$.cmb_pay_group_code.setAllowBlank(false,"급여체계");$.spe_annual_salary_amt.setAllowBlank(false,"연봉");$.dte_annual_salary_start_date.setAllowBlank(false,"연봉적용시작일");$.spe_salary_base_amt.setAllowBlank(false,"급여기본급");$.spe_bonus_base_amt.setAllowBlank(false,"상여기본급");$.spe_supportee_qty.setAllowBlank(false,"부양자수");$.spe_taxtable_income_tax_rate.setAllowBlank(false,"소득세율");$.spe_pension_base_amt.setAllowBlank(false,"국민연금보수월액");$.spe_health_insure_base_amt.setAllowBlank(false,"건강보험보수월액");$.spe_employ_insure_base_amt.setAllowBlank(false,"고용보험보수월액");$.grdMaster.setColumns([new FingerDataGridColumn("chk_yn",60,"center","checkbox","등록",{readonly:true}),new FingerDataGridColumn("emp_code",80,"left","string","사번"),new FingerDataGridColumn("emp_full_name",80,"left","string","이름"),new FingerDataGridColumn("dept_name",120,"left","string","부서명")]);$.grdMaster.init({scroll:"xy"});$.grdMaster.setEditable(false);$.grdMaster.setBorder(true);$.grdPay.setColumns([new FingerDataGridColumn("pay_type",80,"left","string",[{text:"지급구분",css:"col_chk"}]),new FingerDataGridColumn("pay_item_code",100,"left","string",[{text:"수당항목",css:"col_chk"}]),new FingerDataGridColumn("pay_amt",80,"right","int",[{text:"금액",css:"col_chk"}],{format:"int"}),new FingerDataGridColumn("apply_start_date",90,"left","date",[{text:"적용시작일",css:"col_chk"}],{format:"ymd"}),new FingerDataGridColumn("apply_end_date",90,"left","date",[{text:"적용종료일",css:"col_chk"}],{format:"ymd"})]);$.grdPay.init({scroll:"xy",eventCellReadOnly:true});$.grdPay.setEditable(true);$.grdPay.setBorder(false);$.grdDed.setColumns([new FingerDataGridColumn("pay_type",80,"left","string",[{text:"지급구분",css:"col_chk"}]),new FingerDataGridColumn("pay_item_code",100,"left","string",[{text:"공제항목",css:"col_chk"}]),new FingerDataGridColumn("pay_amt",80,"right","int",[{text:"금액",css:"col_chk"}],{format:"int"}),new FingerDataGridColumn("apply_start_date",90,"left","date",[{text:"적용시작일",css:"col_chk"}],{format:"ymd"}),new FingerDataGridColumn("apply_end_date",90,"left","date",[{text:"적용종료일",css:"col_chk"}],{format:"ymd"})]);$.grdDed.init({scroll:"xy",eventCellReadOnly:true});$.grdDed.setEditable(true);$.grdDed.setBorder(false);$.host=host;$.args=args};$.start=function(){$.panMain.add($.panLeftTop);$.panMain.add($.panMaster);$.panMain.add($.panInfo);$.panMain.add($.panAnnualInfo);$.panMain.add($.panInsurance);$.panMain.add($.panPay);$.panMain.add($.panDed);$.panLeftTop.add($.lbl_site_code);$.panLeftTop.add($.cmb_site_code);$.panLeftTop.add($.lbl_dept);$.panLeftTop.add($.txt_dept_code);$.panLeftTop.add($.bte_dept_name);$.panLeftTop.add($.lbl_emp);$.panLeftTop.add($.txt_emp_code);$.panLeftTop.add($.bte_emp_name);$.panLeftTop.add($.lbl_emp_state);$.panLeftTop.add($.cmb_emp_state);$.panLeftTop.add($.btnSearch);$.panMaster.add($.grdMaster);$.panInfo.add($.txt_bank_depositor);$.panInfo.add($.lbl_bank_depositor);$.panInfo.add($.txt_bank_account);$.panInfo.add($.lbl_bank_account);$.panInfo.add($.bte_bank_name);$.panInfo.add($.txt_bank_code);$.panInfo.add($.lbl_bank);$.panInfo.add($.dte_enter_date);$.panInfo.add($.lbl_enter_date);$.panInfo.add($.cmb_job_rank);$.panInfo.add($.lbl_job_rank);$.panInfo.add($.cmb_emp_type);$.panInfo.add($.lbl_emp_type);$.panInfo.add($.bte_dept_name1);$.panInfo.add($.txt_dept_code1);$.panInfo.add($.lbl_dept1);$.panInfo.add($.cmb_site_code1);$.panInfo.add($.lbl_site_code1);$.panInfo.add($.txt_emp_name1);$.panInfo.add($.lbl_emp_name1);$.panInfo.add($.txt_emp_code1);$.panInfo.add($.lbl_emp_code1);$.panAnnualInfo.add($.lbl_Ex1);$.panAnnualInfo.add($.spe_taxtable_income_tax_rate);$.panAnnualInfo.add($.lbl_taxtable_income_tax_rate);$.panAnnualInfo.add($.txt_memo);$.panAnnualInfo.add($.lbl_memo);$.panAnnualInfo.add($.spe_supportee_qty);$.panAnnualInfo.add($.lbl_supportee_qty);$.panAnnualInfo.add($.chk_retire_pay_yn);$.panAnnualInfo.add($.chk_bonus_pay_yn);$.panAnnualInfo.add($.spe_bonus_base_amt);$.panAnnualInfo.add($.lbl_bonus_base_amt);$.panAnnualInfo.add($.chk_pay_yn);$.panAnnualInfo.add($.spe_salary_base_amt);$.panAnnualInfo.add($.lbl_salary_base_amt);$.panAnnualInfo.add($.dte_annual_salary_start_date);$.panAnnualInfo.add($.lbl_annual_salary_start_date);$.panAnnualInfo.add($.spe_annual_salary_amt);$.panAnnualInfo.add($.lbl_annual_salary_amt);$.panAnnualInfo.add($.cmb_pay_group_code);$.panAnnualInfo.add($.lbl_pay_group_code);$.panAnnualInfo.add($.lbl_children_qty);$.panAnnualInfo.add($.lbl_income_tax_rate);$.panAnnualInfo.add($.spe_income_tax_rate);$.panAnnualInfo.add($.spe_children_qty);$.panInsurance.add($.spe_longterm_care_deduct_rate);$.panInsurance.add($.lbl_longterm_care_deduct_rate);$.panInsurance.add($.spe_employ_insure_base_amt);$.panInsurance.add($.lbl_employ_insure_base_amt);$.panInsurance.add($.spe_health_insure_base_amt);$.panInsurance.add($.lbl_health_insure_base_amt);$.panInsurance.add($.spe_pension_base_amt);$.panInsurance.add($.lbl_pension_base_amt);$.panInsurance.add($.txt_health_insure_no);$.panInsurance.add($.lbl_health_insure_no);$.panInsurance.add($.txt_pension_no);$.panInsurance.add($.lbl_pension_no);$.panInsurance.add($.dte_heath_insure_close_date);$.panInsurance.add($.lbl_heath_insure_close_date);$.panInsurance.add($.dte_pension_close_date);$.panInsurance.add($.lbl_pension_close_date);$.panInsurance.add($.dte_health_insure_join_date);$.panInsurance.add($.lbl_health_insure_join_date);$.panInsurance.add($.dte_pension_join_date);$.panInsurance.add($.lbl_pension_join_date);$.panInsurance.add($.chk_employ_insure_yn);$.panInsurance.add($.chk_health_insure_yn);$.panInsurance.add($.chk_pension_yn);$.panPay.add($.grdPay);$.panDed.add($.grdDed);relocateChildIndexInPanel([$.panLeftTop,$.panInfo,$.panAnnualInfo,$.panInsurance]);var ds=bizComponentData2($,"Q1","L_ORG001|L_HRI009|L_ORG001|L_HRI008|L_HRI005|L_HRI010|L_HRB008|L_HRP001|L_HRP002|");$.cmb_site_code.setColumn("site_code","site_name");$.cmb_site_code1.setColumn("site_code","site_name");$.cmb_pay_group_code.setColumn("pay_group_code","pay_group_name");setComboBind([$.cmb_site_code,$.cmb_emp_state,$.cmb_site_code1,$.cmb_emp_type,$.cmb_job_rank,$.cmb_pay_group_code],ds);$.grdPay.setColumnDropDownList("pay_type",ds.resultList[6]);$.grdPay.setColumnDropDownList("pay_item_code",ds.resultList[7],{key:"pay_item_code",name:"pay_item_name"});$.grdDed.setColumnDropDownList("pay_type",ds.resultList[6]);$.grdDed.setColumnDropDownList("pay_item_code",ds.resultList[8],{key:"pay_item_code",name:"pay_item_name"});$.cmb_site_code.setValue(g_main.session.obj.SiteCode);$.cmb_emp_state.setValue("WORK");saveButton(false);queryClick()};$.callback=function(type,ds){if(type=="MASTER"){setDataGrid([$.grdMaster],ds);if($.grdMaster.getRowCount()<1){initView()}else{var rIndex=0;if($.initRow){rIndex=$.grdMaster.getGridRowIndex("emp_code",$.strfocus)}$.grdMaster.selectRow(rIndex)}$.initRow=false;saveButton(false)}else{if(type=="DETAIL"){var rs=ds.resultList[0][0];if(rs){$.txt_emp_code1.setValue(rs.emp_code);$.txt_emp_name1.setValue(rs.emp_full_name);$.cmb_site_code1.setValue(rs.site_code);$.txt_dept_code1.setValue(rs.dept_code);$.bte_dept_name1.setText(rs.dept_name);$.cmb_emp_type.setValue(rs.emp_type);$.cmb_job_rank.setValue(rs.job_rank);$.dte_enter_date.setValue(rs.enter_date);$.txt_bank_code.setValue(rs.bank_code);$.bte_bank_name.setText(rs.bank_name);$.txt_bank_account.setValue(rs.bank_account);$.txt_bank_depositor.setValue(rs.bank_depositor)}else{$.panInfo.clear()}var rs1=ds.resultList[1][0];if(rs1){$.cmb_pay_group_code.setValue(rs1.pay_group_code);$.spe_annual_salary_amt.setValue(rs1.annual_salary_amt);$.dte_annual_salary_start_date.setValue(rs1.annul_salary_start_date);$.spe_salary_base_amt.setValue(rs1.salary_base_amt.toFixed(0));$.chk_pay_yn.setValue(rs1.pay_yn);$.spe_bonus_base_amt.setValue(rs1.bonus_base_amt);$.chk_bonus_pay_yn.setValue(rs1.bonus_pay_yn);$.chk_retire_pay_yn.setValue(rs1.retire_pay_yn);$.spe_supportee_qty.setValue(rs1.supportee_qty);$.txt_memo.setValue(rs1.memo);$.spe_taxtable_income_tax_rate.setValue(rs1.taxtable_income_tax_rate);$.spe_income_tax_rate.setValue(rs1.income_tax_rate);$.spe_children_qty.setValue(rs1.children_qty);$.chk_pension_yn.setValue(rs1.pension_yn);$.chk_health_insure_yn.setValue(rs1.health_insure_yn);$.chk_employ_insure_yn.setValue(rs1.employ_insure_yn);$.dte_pension_join_date.setValue(rs1.pension_join_date);$.dte_health_insure_join_date.setValue(rs1.health_insure_join_date);$.dte_pension_close_date.setValue(rs1.pension_close_date);$.dte_heath_insure_close_date.setValue(rs1.health_insure_close_date);$.txt_pension_no.setValue(rs1.pension_no);$.txt_health_insure_no.setValue(rs1.health_insure_no);$.spe_pension_base_amt.setValue(rs1.pension_base_amt);$.spe_health_insure_base_amt.setValue(rs1.health_insure_base_amt);$.spe_employ_insure_base_amt.setValue(rs1.employ_insure_base_amt);$.spe_longterm_care_deduct_rate.setValue(rs1.longterm_care_deduct_rate)}else{$.panAnnualInfo.clear();$.panInsurance.clear()}var rs2=ds.resultList[2];if(rs2.length>0){for(var i in rs2){rs2[i].apply_start_date=extFormat(rs2[i].apply_start_date,"yyyyMMdd");rs2[i].apply_end_date=extFormat(rs2[i].apply_end_date,"yyyyMMdd")}setDataGrid([$.grdPay],rs2,true);$.grdPay.selectRow(0);var pRow=$.grdPay.getAllRows();for(var i in pRow){pRow[i].pay_type_code_readonly=true;pRow[i].pay_item_code_code_readonly=true;pRow[i].pay_amt_readonly=true;pRow[i].apply_start_date_readonly=true;pRow[i].apply_end_date_readonly=true}}else{$.grdPay.clear()}var rs3=ds.resultList[3];if(rs3.length>0){for(var i in rs3){rs3[i].apply_start_date=extFormat(rs3[i].apply_start_date,"yyyyMMdd");rs3[i].apply_end_date=extFormat(rs3[i].apply_end_date,"yyyyMMdd")}setDataGrid([$.grdDed],rs3,true);$.grdDed.selectRow(0);var dRow=$.grdDed.getAllRows();for(var i in dRow){dRow[i].pay_type_code_readonly=true;dRow[i].pay_item_code_code_readonly=true;dRow[i].pay_amt_readonly=true;dRow[i].apply_start_date_readonly=true;dRow[i].apply_end_date_readonly=true}}else{$.grdDed.clear()}var rId=$.grdMaster.getSelectedRowIdx();if($.grdMaster.getValue(rId,"chk_yn")=="N"){$.dte_annual_salary_start_date.setValue($.dte_enter_date.getValue());$.chk_pay_yn.setValue("Y");$.chk_bonus_pay_yn.setValue("Y");$.chk_retire_pay_yn.setValue("Y");$.chk_pension_yn.setValue("Y");$.chk_health_insure_yn.setValue("Y");$.chk_employ_insure_yn.setValue("Y")}saveButton(false)}else{if(type=="N"||type=="D"){if(ds){if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg)}else{if(ds.errorCode=="MSG0000"){MessageBoxShow("정상적으로 저장되었습니다.")}else{if(ds.errorCode=="MSG0003"){MessageBoxShow("정상적으로 삭제되었습니다.")}}}}queryClick()}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){queryClick()}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){$.popUpCallId=id;if(id=="bte_dept_name"){var param={dept_name:$.bte_dept_name.getText()||"",};g_main.openPopup("popDept.html","popDept","",0,0,"","",param,"","")}else{if(id=="bte_emp_name"){var param={emp_name:$.bte_emp_name.getText()||"",searchAll:"Y"};g_main.openPopup("popEmp.html","popEmp","",0,0,"","",param,"","")}else{if(id=="bte_bank_name"){var param={bank_name:$.bte_bank_name.getText()||"",};g_main.openPopup("popBank.html","popBank","",0,0,"","",param,"","")}}}};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){saveButton(true)};$.fingercombobox_change=function(id,value){if(id=="cmb_site_code"||id=="cmb_emp_state"){return}else{saveButton(true)}};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){saveButton(true)};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdMaster"){focusedRowChanged()}else{if(id=="grdPay"){if($.grdPay.getRowStatus(rId)!="N"){var pRow=$.grdPay.getValue(rId);pRow.pay_type_readonly=true;pRow.pay_item_code_readonly=true}}else{if(id=="grdDed"){if($.grdDed.getRowStatus(rId)!="N"){var dRow=$.grdDed.getValue(rId);dRow.pay_type_readonly=true;dRow.pay_item_code_readonly=true}}}}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){saveButton(true);if(id=="grdPay"){if(cInd=="pay_amt"){var inputData=nValue.toString();if(inputData.trim()==""||isNaN(inputData)){$.grdPay.setValue(rId,cInd,oValue==""?0:oValue)}}}else{if(id=="grdDed"){if(cInd=="pay_amt"){var inputData=nValue.toString();if(inputData.trim()==""||isNaN(inputData)){$.grdDed.setValue(rId,cInd,oValue)}}}}};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){if(id=="txt_emp_code"||id=="txt_dept_code"){return}else{saveButton(true)}if(id=="spe_annual_salary_amt"){$.spe_salary_base_amt.setValue(($.spe_annual_salary_amt.getValue()/12).toFixed(0))}};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerimage_click=function(id){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panInfo"){if(btnId=="btnSave"){confirmBoxShow("저장하시겠습니까?",function(){if(g_main.msgShare==true){$.strfocus=$.txt_emp_code1.getValue();$.initRow=true;saveHRP1000("N")}})}else{if(btnId=="btnDelete"){confirmBoxShow("["+$.txt_emp_name1.getValue()+"] 의 급여정보를 삭제하시겠습니까?",function(){if(g_main.msgShare==true){saveHRP1000("D")}})}}}else{if(panelId=="panPay"){if(btnId=="btnAdd"){$.grdPay.addRow({pay_amt:"0",apply_start_date:extFormat(getToday(""),"yyyyMMdd"),apply_end_date:"9999-12-31"});saveButton(true)}else{if(btnId=="btnDelete"){var rId=$.grdPay.getSelectedRowIdx();if(!rId){return}if($.grdPay.getRowStatus(rId)!="N"){confirmBoxShow("정말 삭제하시겠습니까?",function(){if(g_main.msgShare==true){saveButton(true);$.grdPay.deleteCurrentRow()}})}else{saveButton(true);$.grdPay.deleteCurrentRow()}}}}else{if(panelId=="panDed"){if(btnId=="btnAdd"){$.grdDed.addRow({pay_amt:"0",apply_start_date:extFormat(getToday(""),"yyyyMMdd"),apply_end_date:"9999-12-31"});saveButton(true)}else{if(btnId=="btnDelete"){var rId=$.grdDed.getSelectedRowIdx();if(!rId){return}if($.grdDed.getRowStatus(rId)!="N"){confirmBoxShow("정말 삭제하시겠습니까?",function(){if(g_main.msgShare==true){saveButton(true);$.grdDed.deleteCurrentRow()}})}else{saveButton(true);$.grdDed.deleteCurrentRow()}}}}}}};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(popResult){if(id=="popDept"){if($.popUpCallId=="bte_dept_name"){$.bte_dept_name.setText(popResult.dept_name);$.txt_dept_code.setValue(popResult.dept_code)}}else{if(id=="popEmp"){if($.popUpCallId=="bte_emp_name"){$.bte_emp_name.setText(popResult.emp_name);$.txt_emp_code.setValue(popResult.employee_id)}}else{if(id=="popBank"){if($.popUpCallId=="bte_bank_name"){$.txt_bank_code.setValue(popResult.sub_code);$.bte_bank_name.setText(popResult.code_name)}}}}}};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>