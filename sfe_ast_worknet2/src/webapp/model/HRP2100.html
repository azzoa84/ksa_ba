<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panQuery=null;$.panQList=null;$.panInfo=null;$.panOnce=null;$.panList=null;$.lblQSite=null;$.lblQType=null;$.lblQDept=null;$.cmbQSite=null;$.cmbQType=null;$.txtQDept=null;$.bteQDept=null;$.grdQList=null;$.btnSearch=null;$.lblCodeInfo=null;$.lblNameInfo=null;$.lblDeptInfo=null;$.txtCodeInfo=null;$.txtNameInfo=null;$.txtDeptInfo=null;$.btnOnOff=null;$.txtDeptInfo2=null;$.lblGroupD=null;$.lblDeptD=null;$.lblDutyD=null;$.lblPositionD=null;$.lblJobD=null;$.lblJobD2=null;$.lblApplyD=null;$.lblAmtD=null;$.cmbGroupD=null;$.txtDeptD=null;$.bteDeptD=null;$.cmbDutyD=null;$.cmbPositionD=null;$.cmbJobD=null;$.cmbJobD2=null;$.dteStartD=null;$.dteEndD=null;$.speAmtD=null;$.lblWaveD=null;$.btnOnce=null;$.grdList=null;$.varOnOff="ON";$.varPayItemCode="";$.varDeleteRows=[];function createJSON_Q(workType){var json=createExecuteParamInfo("HR..P_HRP2100_Q",[workType,$.cmbQSite.getValue(),$.cmbQType.getValue(),$.txtQDept.getValue(),(workType=="DETAIL"?$.varPayItemCode:"")]);return json}function createJSON_S(workType,checkType){var json="";var rows=[];if(workType=="BATCH"){var aRows=$.grdList.getAllRows();for(var i in aRows){rows.push([workType,$.cmbQSite.getValue(),$.cmbQType.getValue(),$.varPayItemCode,$.cmbGroupD.getValue(),$.txtDeptD.getValue(),$.cmbDutyD.getValue(),$.cmbPositionD.getValue(),$.cmbJobD.getValue(),$.cmbJobD2.getValue(),aRows[i].emp_code,$.dteStartD.getValue(),$.dteEndD.getValue(),$.speAmtD.getValue(),aRows[i].memo||"",checkType,"#UserID#","#HostInfo#"])}json=createExecuteParamInfo("HR..P_HRP2100_S",rows)}else{var cRows=$.grdList.getChangedRows()||[];if($.varDeleteRows.length>0){for(var i in $.varDeleteRows){cRows.push($.varDeleteRows[i])}}for(var i in cRows){rows.push([cRows[i].rowType,"",$.cmbQType.getValue(),$.varPayItemCode,"","","","","","",cRows[i].emp_code,unmask(cRows[i].apply_start_date),unmask(cRows[i].apply_end_date),cRows[i].pay_amt,cRows[i].memo||"","","#UserID#","#HostInfo#"])}json=createExecuteParamInfo("HR..P_HRP2100_S",rows)}return json}function searchData(workType){if(!validateControls([$.cmbQSite,$.cmbQType])){return}var json=createJSON_Q(workType);callQuery(["req",json],workType,$)}function saveData(workType,checkType){var json=createJSON_S(workType,checkType);if(json){var ds=callExecuteSync(["req",json],workType,$);if(ds){if(ds.errorCode=="P_HRP2100_S_001"){confirmBoxShow("생성된 급여고정항목 정보가 존재합니다. 기존 자료를 삭제 후 재 생성하시겠습니까?",function(){if(g_main.msgShare){saveData("BATCH","SKIP_CHECK")}})}}$.varDeleteRows=[];searchData("DETAIL")}}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,855);$.panMain.setText("");$.panMain.setBottomLine(true);$.panQuery=new FingerPanel(host,"panQuery",0,0,335,160);$.panQuery.setText("급여 고정 항목 리스트");$.panQuery.setBottomLine(true);$.panQList=new FingerPanel(host,"panQList",0,175,335,660);$.panQList.setText("");$.panQList.setBottomLine(true);$.panInfo=new FingerPanel(host,"panInfo",345,0,850,135);$.panInfo.setText("급여 고정 항목 정보");$.panInfo.setBottomLine(true);$.panOnce=new FingerPanel(host,"panOnce",345,145,850,190);$.panOnce.setText("급여고정 항목 일괄 설정");$.panOnce.setBottomLine(true);$.panList=new FingerPanel(host,"panList",345,350,850,480);$.panList.setText("급여 고정 항목 리스트");$.panList.setBottomLine(true);$.lblQSite=new FingerLabel(host,"lblQSite",0,15,80,20);$.lblQSite.setText("사업장");$.lblQType=new FingerLabel(host,"lblQType",0,45,80,20);$.lblQType.setText("지급구분");$.lblQDept=new FingerLabel(host,"lblQDept",0,75,80,20);$.lblQDept.setText("입력부서");$.cmbQSite=new FingerComboBox(host,"cmbQSite",85,15,220,20);$.cmbQType=new FingerComboBox(host,"cmbQType",85,45,220,20);$.txtQDept=new FingerEdit(host,"txtQDept",85,75,80,20);$.bteQDept=new FingerButtonEdit(host,"bteQDept",170,75,135,20);$.bteQDept.setText("");$.grdQList=new FingerDataGrid(host,"grdQList",0,0,335,660);$.btnSearch=new FingerButton(host,"btnSearch",255,-37.5,80,20);$.btnSearch.setText("조회");$.lblCodeInfo=new FingerLabel(host,"lblCodeInfo",10,15,100,20);$.lblCodeInfo.setText("급여항목코드");$.lblNameInfo=new FingerLabel(host,"lblNameInfo",365,15,100,20);$.lblNameInfo.setText("급여항목명");$.lblDeptInfo=new FingerLabel(host,"lblDeptInfo",10,45,100,20);$.lblDeptInfo.setText("입력부서");$.txtCodeInfo=new FingerEdit(host,"txtCodeInfo",115,15,180,20);$.txtNameInfo=new FingerEdit(host,"txtNameInfo",470,15,180,20);$.txtDeptInfo=new FingerEdit(host,"txtDeptInfo",115,45,80,20);$.btnOnOff=new FingerButton(host,"btnOnOff",730,45,120,20);$.btnOnOff.setText("일괄설정▲");$.txtDeptInfo2=new FingerEdit(host,"txtDeptInfo2",200,45,140,20);$.lblGroupD=new FingerLabel(host,"lblGroupD",10,15,100,20);$.lblGroupD.setText("급여체계");$.lblDeptD=new FingerLabel(host,"lblDeptD",360,15,100,20);$.lblDeptD.setText("입력부서");$.lblDutyD=new FingerLabel(host,"lblDutyD",10,45,100,20);$.lblDutyD.setText("직책");$.lblPositionD=new FingerLabel(host,"lblPositionD",360,45,100,20);$.lblPositionD.setText("직위");$.lblJobD=new FingerLabel(host,"lblJobD",10,75,100,20);$.lblJobD.setText("직급");$.lblJobD2=new FingerLabel(host,"lblJobD2",360,75,100,20);$.lblJobD2.setText("직무");$.lblApplyD=new FingerLabel(host,"lblApplyD",10,105,100,20);$.lblApplyD.setText("적용기간");$.lblAmtD=new FingerLabel(host,"lblAmtD",360,105,100,20);$.lblAmtD.setText("금액");$.cmbGroupD=new FingerComboBox(host,"cmbGroupD",115,15,225,20);$.txtDeptD=new FingerEdit(host,"txtDeptD",465,15,80,20);$.bteDeptD=new FingerButtonEdit(host,"bteDeptD",550,15,140,20);$.bteDeptD.setText("");$.cmbDutyD=new FingerComboBox(host,"cmbDutyD",115,45,225,20);$.cmbPositionD=new FingerComboBox(host,"cmbPositionD",465,45,225,20);$.cmbJobD=new FingerComboBox(host,"cmbJobD",115,75,225,20);$.cmbJobD2=new FingerComboBox(host,"cmbJobD2",465,75,225,20);$.dteStartD=new FingerDateEdit(host,"dteStartD",115,105,100,20);$.dteEndD=new FingerDateEdit(host,"dteEndD",240,105,100,20);$.speAmtD=new FingerSpinEdit(host,"speAmtD",465,105,160,20);$.lblWaveD=new FingerLabel(host,"lblWaveD",215,105,20,20);$.lblWaveD.setText("~");$.btnOnce=new FingerButton(host,"btnOnce",730,105,120,20);$.btnOnce.setText("일괄설정");$.grdList=new FingerDataGrid(host,"grdList",0,0,850,435);$.panQuery.setBorder(true);$.panQList.setBorder(true);$.panList.addButtons(["btnDelete","btnSave","btnAdd"]);$.grdQList.setColumns([new FingerDataGridColumn("pay_item_category",100,"left","string","급여항목구분"),new FingerDataGridColumn("pay_item_code",100,"left","string","급여항목코드"),new FingerDataGridColumn("pay_item_name",120,"left","string","급여항목명"),new FingerDataGridColumn("entry_dept_code",99,"left","string","입력담당부서",{hidden:true}),new FingerDataGridColumn("entry_dept_name",100,"left","string","입력부서")]);$.grdQList.init({scroll:"xy"});$.grdQList.setBorder(false);$.grdList.setColumns([new FingerDataGridColumn("emp_state",80,"center","string","재직구분",{readonly:true}),new FingerDataGridColumn("dept_name",120,"left","string","부서",{readonly:true}),new FingerDataGridColumn("emp_code",80,"left","string","사번",{readonly:true}),new FingerDataGridColumn("emp_full_name",100,"left","string","이름",{readonly:true}),new FingerDataGridColumn("apply_start_date",100,"left","date","적용시작일",{format:"ymd"}),new FingerDataGridColumn("apply_end_date",100,"left","date","적용종료일",{format:"ymd"}),new FingerDataGridColumn("pay_amt",100,"right","int","금액",{format:"int"}),new FingerDataGridColumn("memo",150,"left","string","비고")]);$.grdList.init({panel:$.panList,scroll:"xy",eventCellReadOnly:true});$.grdList.setEditable(true);$.grdList.setBorder(false);$.cmbQSite.setAllowBlank(false,"사업장");$.cmbQType.setAllowBlank(false,"지급구분");$.txtQDept.setEnable(false);$.txtCodeInfo.setEnable(false);$.txtNameInfo.setEnable(false);$.txtDeptInfo.setEnable(false);$.txtDeptInfo2.setEnable(false);$.txtDeptD.setEnable(false);$.dteStartD.setAllowBlank(false,"적용시작일");$.dteEndD.setAllowBlank(false,"적용종료일");$.speAmtD.setAllowBlank(false,"금액");$.host=host;$.args=args};$.start=function(){$.panMain.add($.panQuery);$.panMain.add($.panQList);$.panMain.add($.panInfo);$.panMain.add($.panOnce);$.panMain.add($.panList);$.panQuery.add($.lblQSite);$.panQuery.add($.lblQDept);$.panQuery.add($.cmbQSite);$.panQuery.add($.cmbQType);$.panQuery.add($.txtQDept);$.panQuery.add($.bteQDept);$.panQuery.add($.lblQType);$.panQuery.add($.btnSearch);$.panQList.add($.grdQList);$.panInfo.add($.lblCodeInfo);$.panInfo.add($.lblNameInfo);$.panInfo.add($.lblDeptInfo);$.panInfo.add($.txtCodeInfo);$.panInfo.add($.txtNameInfo);$.panInfo.add($.txtDeptInfo);$.panInfo.add($.btnOnOff);$.panInfo.add($.txtDeptInfo2);$.panOnce.add($.btnOnce);$.panOnce.add($.lblWaveD);$.panOnce.add($.speAmtD);$.panOnce.add($.dteEndD);$.panOnce.add($.dteStartD);$.panOnce.add($.cmbJobD2);$.panOnce.add($.cmbJobD);$.panOnce.add($.cmbPositionD);$.panOnce.add($.cmbDutyD);$.panOnce.add($.bteDeptD);$.panOnce.add($.txtDeptD);$.panOnce.add($.cmbGroupD);$.panOnce.add($.lblAmtD);$.panOnce.add($.lblApplyD);$.panOnce.add($.lblJobD2);$.panOnce.add($.lblJobD);$.panOnce.add($.lblPositionD);$.panOnce.add($.lblDutyD);$.panOnce.add($.lblDeptD);$.panOnce.add($.lblGroupD);$.panList.add($.grdList);$.cmbQSite.setEmptyRow(true);$.cmbQType.setEmptyRow(true);$.cmbGroupD.setEmptyRow(true);$.cmbDutyD.setEmptyRow(true);$.cmbPositionD.setEmptyRow(true);$.cmbJobD.setEmptyRow(true);$.cmbJobD2.setEmptyRow(true);$.cmbQSite.setColumn("site_code","site_name");$.cmbGroupD.setColumn("pay_group_code","pay_group_name");var ds=bizComponentData2($,"Q1","L_ORG001|L_HRB008|L_HRI010|L_HRI003|L_HRI002|L_HRI005|L_HRI006|L_HRI009|L_HRB009");setComboBind([$.cmbQSite,$.cmbQType,$.cmbGroupD,$.cmbDutyD,$.cmbPositionD,$.cmbJobD,$.cmbJobD2],ds);$.grdList.setColumnDropDownList("emp_state",ds.resultList[7]);$.grdQList.setColumnDropDownList("pay_item_category",ds.resultList[8]);$.cmbQSite.setValue(1)};$.callback=function(type,ds){$.varDeleteRows=[];if(type=="MASTER"){setDataGrid([$.grdQList],ds);$.grdQList.selectRow(0)}else{if(type=="DETAIL"){for(var i=0;i<ds.resultList[0].length;i++){ds.resultList[0][i].apply_start_date=extFormat(ds.resultList[0][i].apply_start_date,"yyyyMMdd");ds.resultList[0][i].apply_end_date=extFormat(ds.resultList[0][i].apply_end_date,"yyyyMMdd");ds.resultList[0][i].emp_state_readonly=true}setDataGrid([$.grdList],ds);$.grdList.selectRow(0)}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){searchData("MASTER")}else{if(id=="btnOnOff"){if($.varOnOff=="ON"){$.btnOnOff.setText("일괄설정▼");$.panOnce.setVisible(false);$.panList.setProperty(345,150,850,480);$.grdList.extObj.resize();$.grdList.extObj.refresh();$.varOnOff="OFF"}else{if($.varOnOff=="OFF"){$.btnOnOff.setText("일괄설정▲");$.panOnce.setVisible(true);$.panList.setProperty(345,350,850,480);$.grdList.extObj.resize();$.grdList.extObj.refresh();$.varOnOff="ON"}}}else{if(id=="btnOnce"){if(!validateControls([$.dteStartD,$.dteEndD,$.speAmtD])){return}saveData("BATCH","CHECK")}}}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){$.popUpCallId=id;if(id=="bteQDept"){var param={dept_name:$.bteQDept.getText()||""};g_main.openPopup("popDept.html","popDept","",0,0,"","",param,"","")}else{if(id=="bteDeptD"){var param={dept_name:$.bteDeptD.getText()||""};g_main.openPopup("popDept.html","popDept","",0,0,"","",param,"","")}}};$.fingerbuttonedit_change=function(id,value){if(id=="bteQDept"){if(value==""){$.txtQDept.setValue("")}}else{if(id=="bteDeptD"){if(value==""){$.txtDeptD.setValue("")}}}};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){if(id=="grdList"){if(cInd=="emp_code"||cInd=="emp_full_name"){$.popUpCallId="grdList_emp";var param={emp_name:""};g_main.openPopup("popEmp.html","popEmp","",0,0,"","",param,"","")}}};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdQList"){if(rId==""||rId==-1){return}$.varPayItemCode=$.grdQList.getValue(rId,"pay_item_code");$.txtCodeInfo.setValue($.grdQList.getValue(rId,"pay_item_code"));$.txtNameInfo.setValue($.grdQList.getValue(rId,"pay_item_name"));$.txtDeptInfo.setValue($.grdQList.getValue(rId,"entry_dept_code"));$.txtDeptInfo2.setValue($.grdQList.getValue(rId,"entry_dept_name"));searchData("DETAIL")}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panList"){if(btnId=="btnAdd"){$.grdList.addRow({emp_state_readonly:true,apply_start_date:getToday("-"),apply_end_date:"9999-12-31",pay_amt:0})}else{if(btnId=="btnSave"){if($.grdList.getChangedRows().length<=0&&$.varDeleteRows.length<=0){return}saveData("","")}else{if(btnId=="btnDelete"){var rId=$.grdList.getSelectedRowIdx();if($.grdList.getValue(rId,"rowType")=="N"){$.grdList.deleteRow(rId)}else{confirmBoxShow("정말 삭제하시겠습니까?<br/>삭제하시려면 예를 클릭하세요.",function(){if(g_main.msgShare){$.varDeleteRows.push({rowType:"D",emp_state:$.grdList.getValue(rId,"emp_state"),dept_name:$.grdList.getValue(rId,"dept_name"),emp_code:$.grdList.getValue(rId,"emp_code"),emp_full_name:$.grdList.getValue(rId,"emp_full_name"),apply_start_date:$.grdList.getValue(rId,"apply_start_date"),apply_end_date:$.grdList.getValue(rId,"apply_end_date"),pay_amt:$.grdList.getValue(rId,"pay_amt"),memo:$.grdList.getValue(rId,"memo")});$.grdList.deleteRow(rId);$.grdList.selectRow(0)}})}}}}}};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(popResult){if(id=="popEmp"){if($.popUpCallId=="grdList_emp"){var rId=$.grdList.getSelectedRowIdx();$.grdList.setValue(rId,"emp_state",popResult.emp_state);$.grdList.setValue(rId,"dept_name",popResult.dept_name);$.grdList.setValue(rId,"emp_code",popResult.employee_id);$.grdList.setValue(rId,"emp_full_name",popResult.emp_name)}}else{if(id=="popDept"){if($.popUpCallId=="bteQDept"){$.txtQDept.setValue(popResult.dept_code);$.bteQDept.setText(popResult.dept_name)}else{if($.popUpCallId=="bteDeptD"){$.txtDeptD.setValue(popResult.dept_code);$.bteDeptD.setText(popResult.dept_name)}}}}}};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerimage_click=function(id){}};</script>