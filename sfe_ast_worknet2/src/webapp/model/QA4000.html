<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panQuery=null;$.panList=null;$.panRemark=null;$.panResult=null;$.panRequest=null;$.panInfo=null;$.panReqList=null;$.lbl32=null;$.lblInstockFromdate=null;$.lblStatus=null;$.lblProductCode=null;$.lblLotNo=null;$.lblTestResult=null;$.lblTestDocNo=null;$.lblTestEndDate=null;$.lblRequestNo=null;$.lblRequestDate=null;$.lblTestAgency=null;$.lblPurpose=null;$.lblTestStandard=null;$.lblTestItem=null;$.lblResultRequestDate=null;$.lblQaId=null;$.lblStatus1=null;$.lblLotNo1=null;$.lblProductName=null;$.lblProductCode1=null;$.lblManufacturer=null;$.lblPackUnit=null;$.lblInstockDate=null;$.lblInstockAmt=null;$.lblUseExpireDate=null;$.lblQcAmt=null;$.lblKeepAmt=null;$.lblProduceYear=null;$.lblValidMonth=null;$.lblUnusual=null;$.dteInstockTodate=null;$.dteInstockFromdate=null;$.dteTestEndDate=null;$.dteRequestDate=null;$.dteResultRequestDate=null;$.dteInstockDate=null;$.dteUseExpireDate=null;$.dteProduceYear=null;$.txtProductCode=null;$.txtLotNo=null;$.txtTestDocNo=null;$.txtTestStandardText=null;$.txtTestItemText=null;$.txtPurposeText=null;$.txtRequestNo=null;$.txtUnusual=null;$.txtIseq=null;$.txtPackUnit=null;$.txtLotNo1=null;$.txtManufacturer=null;$.txtQaId=null;$.txtProductCode1=null;$.memRemark=null;$.cmbStatus=null;$.cmbTestResult=null;$.cmbTestItem=null;$.cmbTestAgency=null;$.cmbPurpose=null;$.cmbTestStandard=null;$.cmbProductCheckResult1=null;$.cmbStatus1=null;$.btnRemarkSave=null;$.btnApprovalSendmail=null;$.btnMod=null;$.btnApproval=null;$.btnQaapproval=null;$.btnComplete=null;$.btnCancelExit=null;$.btnReport=null;$.btnDel=null;$.btnRequest=null;$.grdList=null;$.grdReqList=null;$.speInstockAmt=null;$.speQcAmt=null;$.speKeepAmt=null;$.speValidMonth=null;$.btnSearch=null;$.bteProductName=null;$.bteProductName1=null;$.btnReqEdit=null;$.lblTestDocu=null;$.txtTestDocu=null;$.btnUpload=null;$.btnView=null;$.txtTestDocuPath=null;$.lblReceipt=null;$.txtReceipt=null;$.btnUpload2=null;$.btnView2=null;$.txtReceiptPath=null;$.chkTestReportYN=null;$.chkCustomsReportYN=null;$.chkRedressing=null;$.btnSampleReceipt=null;$.varQaId="";$.varIseq="";$.varBtnType="1";function createJSON_Q1(){var json=createExecuteParamInfo("P_QA4000_Q1",["Q",$.dteInstockFromdate.getValue(),$.dteInstockTodate.getValue(),$.cmbStatus.getValue(),$.txtProductCode.getValue(),$.txtLotNo.getValue()]);return json}function createJSON_Q2(){var json=createExecuteParamInfo("P_QA4000_Q2",["Q",$.grdList.getValue($.grdListRid,"qa_id")]);return json}function createJSON_Q3(workType){var json=createExecuteParamInfo("P_QA4000_Q3",[workType,$.grdReqList.getValue($.grdReqListRid,"qa_id"),$.grdReqList.getValue($.grdReqListRid,"request_seq")]);return json}function createJSON_S(workType){var jsonParam=null;if(workType=="D"){jsonParam=[workType,$.grdReqList.getValue($.grdReqListRid,"qa_id"),$.grdReqList.getValue($.grdReqListRid,"request_seq"),$.dteTestEndDate.getValue(),$.cmbTestResult.getValue(),$.txtTestDocNo.getValue(),$.memRemark.getValue(),$.txtTestDocuPath.getValue(),$.txtTestDocu.getValue(),$.txtReceiptPath.getValue(),$.txtReceipt.getValue(),$.chkTestReportYN.getValue(),$.chkCustomsReportYN.getValue(),$.chkRedressing.getValue(),g_main.session.getValue("UserID")]}else{jsonParam=[workType,$.txtQaId.getValue(),$.txtIseq.getValue(),$.dteTestEndDate.getValue(),$.cmbTestResult.getValue(),$.txtTestDocNo.getValue(),$.memRemark.getValue(),$.txtTestDocuPath.getValue(),$.txtTestDocu.getValue(),$.txtReceiptPath.getValue(),$.txtReceipt.getValue(),$.chkTestReportYN.getValue(),$.chkCustomsReportYN.getValue(),$.chkRedressing.getValue(),g_main.session.getValue("UserID")]}var json=createExecuteParamInfo("P_QA4000_S",jsonParam);return json}function doComplete(){var json=createJSON_S("COMPLETE");callQuery(["req",json],"COMPLETE",$)}function doCancelExit(){var json=createJSON_S("REJECT");callQuery(["req",json],"REJECT",$)}function delGrdRegListItem(){var json=createJSON_S("D");var ds=callExecuteSync(["req",json],"D");syncCallback("D",ds)}function saveRemark(){var json=createJSON_S("REMARK");var ds=callExecuteSync(["req",json],"REMARK");syncCallback("REMARK",ds)}function saveApproval(){var json=createJSON_S("APPROVAL");callQuery(["req",json],"APPROVAL",$)}function saveCancel(){var json=createJSON_S("CANCEL");callQuery(["req",json],"CANCEL",$)}function syncCallback(type,ds){if(type=="REMARK"&&ds.T[0].result[0]=="MSG0004"){searchGrdList()}else{if(type=="D"&&ds.T[0].result[0]=="MSG0003"){searchGrdList()}}}function searchGrpRequestAndGrpResultAndGrpRemark(workType){var json=createJSON_Q3(workType);if(workType=="Q"){callQuery(["req",json],"Q3",$)}else{if(workType=="REPORT"){var ds=callExecuteSync(["req",json],workType,false);if(ds&&ds.errorCode=="MSG0001"){var params={report:"report_QA4000",isPrint:false};var datas="";if(ds.resultList[0][0].qa_user_sign){ds.resultList[0][0].qa_user_sign=convertByteArrayToImageSource(ds.resultList[0][0].qa_user_sign)}if(ds.resultList[0][0].qa_manager_sign){ds.resultList[0][0].qa_manager_sign=convertByteArrayToImageSource(ds.resultList[0][0].qa_manager_sign)}datas={Info:ds.resultList[0]};var data=[];for(var i=0;i<ds.resultList[0].length;i++){data.push(datas)}params.data={Info:ds.resultList[0]};g_printBrowser.callPrint(params)}}else{if(workType=="REPORT2"){var ds=callExecuteSync(["req",json],workType,false);var params={report:"report_QA4000_2",isPrint:false};var datas="";if(ds.resultList[0][0].qa_user_sign){ds.resultList[0][0].qa_user_sign=convertByteArrayToImageSource(ds.resultList[0][0].qa_user_sign)}if(ds.resultList[0][0].qa_manager_sign){ds.resultList[0][0].qa_manager_sign=convertByteArrayToImageSource(ds.resultList[0][0].qa_manager_sign)}if(ds.resultList[0][0].import_manager_sign){ds.resultList[0][0].import_manager_sign=convertByteArrayToImageSource(ds.resultList[0][0].import_manager_sign)}datas={Info:ds.resultList[0]};var data=[];for(var i=0;i<ds.resultList[0].length;i++){data.push(datas)}params.data={Info:ds.resultList[0]};g_printBrowser.callPrint(params)}else{if(workType=="REPORT3"){var ds=callExecuteSync(["req",json],workType,false);var params={report:"report_QA4000_3",isPrint:false};var datas="";if(ds.resultList[0][0].qa_user_sign){ds.resultList[0][0].qa_user_sign=convertByteArrayToImageSource(ds.resultList[0][0].qa_user_sign)}datas={Info:ds.resultList[0],Data:ds.resultList[1]};var data=[];for(var i=0;i<ds.resultList[0].length;i++){data.push(datas)}params.data={Info:ds.resultList[0],Data:ds.resultList[1]};g_printBrowser.callPrint(params)}}}}}function searchGrdReqList(){var json=createJSON_Q2();callQuery(["req",json],"Q2",$)}function searchGrdList(){if($.bteProductName.getText()==""){$.txtProductCode.setValue("")}var json=createJSON_Q1();callQuery(["req",json],"Q1",$)}function getTodays(){var date=new Date();var year=date.getFullYear();var month=date.getMonth()+1;var day=date.getDate();if((""+month).length==1){month="0"+month}if((""+day).length==1){day="0"+day}return""+year+month+day}function getOneMonthAgo(){var date=new Date();date.setMonth(date.getMonth()-1);var year=date.getFullYear();var month=date.getMonth()+1;var day=date.getDate();if((""+month).length==1){month="0"+month}if((""+day).length==1){day="0"+day}return""+year+month+day}function initLayoutAll(){initGrdList()}function initGrdList(){$.btnRequest.setEnable(false);$.btnDel.setEnable(false);$.btnReport.setEnable(false);$.btnSampleReceipt.setEnable(false);$.btnCancelExit.setEnable(false);$.btnComplete.setEnable(false);$.btnQaapproval.setEnable(false);$.btnApproval.setEnable(false);$.btnRemarkSave.setEnable(false);$.btnMod.setEnable(false);initControls("grpRequest");initControls("grpResult");initControls("grpRemark");initControls("grpInfo");initControls("grdReqList")}function initControls(target){if(target=="grpRequest"){$.txtUnusual.setValue("");$.txtUnusual.setEnable(false);$.txtTestStandardText.setValue("");$.txtTestStandardText.setEnable(false);$.txtTestItemText.setValue("");$.txtTestItemText.setEnable(false);$.txtPurposeText.setValue("");$.txtPurposeText.setEnable(false);$.cmbTestItem.setValue("");$.cmbTestItem.setEnable(false);$.txtRequestNo.setValue("");$.txtRequestNo.setEnable(false);$.dteRequestDate.setValue("");$.dteRequestDate.setEnable(false);$.cmbTestAgency.setValue("");$.cmbTestAgency.setEnable(false);$.cmbPurpose.setValue("");$.cmbPurpose.setEnable(false);$.cmbTestStandard.setValue("");$.cmbTestStandard.setEnable(false);$.dteResultRequestDate.setValue("");$.dteResultRequestDate.setEnable(false)}if(target=="grpResult"){$.cmbTestResult.setValue("");$.txtTestDocNo.setValue("");$.dteTestEndDate.setValue("");$.txtTestDocu.setValue("");$.txtTestDocuPath.setValue("");$.btnMod.setEnable(false)}if(target=="grpRemark"){$.memRemark.setValue("")}if(target=="grpInfo"){$.speValidMonth.setEnable(false);$.speValidMonth.setValue("");$.txtPackUnit.setEnable(false);$.txtPackUnit.setValue("");$.txtIseq.setVisible(false);$.txtIseq.setValue("");$.cmbProductCheckResult1.setValue("");$.cmbProductCheckResult1.setEnable(false);$.cmbProductCheckResult1.setVisible(false);$.bteProductName1.setText("");$.bteProductName1.setEnable(false);$.txtQaId.setValue("");$.txtQaId.setEnable(false);$.txtQaId.setVisible(false);$.lblQaId.setVisible(false);$.cmbStatus1.setValue("");$.cmbStatus1.setEnable(false);$.txtLotNo1.setValue("");$.txtLotNo1.setEnable(false);$.txtProductCode1.setValue("");$.txtProductCode1.setEnable(false);$.txtProductCode1.setVisible(false);$.lblProductCode1.setVisible(false);$.txtManufacturer.setValue("");$.txtManufacturer.setEnable(false);$.dteInstockDate.setValue("");$.dteInstockDate.setEnable(false);$.speInstockAmt.setValue("");$.speInstockAmt.setEnable(false);$.dteUseExpireDate.setValue("");$.dteUseExpireDate.setEnable(false);$.speQcAmt.setValue("");$.speQcAmt.setEnable(false);$.speKeepAmt.setValue("");$.speKeepAmt.setEnable(false);$.dteProduceYear.setValue("");$.dteProduceYear.setEnable(false)}if(target=="grdReqList"){$.grdReqList.setData([]);$.btnRequest.setEnable(false);$.btnDel.setEnable(false);$.btnReqEdit.setEnable(false)}}function setPanInfo(obj){initControls("grpInfo");$.dteProduceYear.setValue(obj.produce_year);$.speKeepAmt.setValue(obj.keep_amt);$.speQcAmt.setValue(obj.qc_amt);$.dteUseExpireDate.setValue(obj.use_expire_date);$.speInstockAmt.setValue(obj.instock_amt);$.dteInstockDate.setValue(obj.instock_date);$.txtManufacturer.setValue(obj.manufacturer);$.txtProductCode1.setValue(obj.product_code);$.txtLotNo1.setValue(obj.lot_no);$.txtQaId.setValue(obj.qa_id);$.bteProductName1.setText(obj.product_name);$.speValidMonth.setValue(obj.valid_month);$.txtPackUnit.setValue(obj.pack_unit);$.cmbStatus1.setValue(obj.status);$.cmbProductCheckResult1.setValue(obj.product_check_result)}function setPanRequest(obj){initControls("grpRequest");$.dteResultRequestDate.setValue(obj.result_request_date);$.dteRequestDate.setValue(obj.request_date);$.txtRequestNo.setValue(obj.request_no);$.txtPurposeText.setValue(obj.purpose_text);$.txtTestItemText.setValue(obj.test_item_text);$.txtTestStandardText.setValue(obj.test_standard_text);$.txtUnusual.setValue(obj.unusual);$.cmbTestItem.setValue(obj.test_item);$.cmbTestStandard.setValue(obj.test_standard);$.cmbPurpose.setValue(obj.purpose);$.cmbTestAgency.setValue(obj.test_agency)}function setPanResult(obj){initControls("grpResult");$.dteTestEndDate.setValue(obj.test_end_date);$.txtTestDocNo.setValue(obj.test_doc_no);$.cmbTestResult.setValue(obj.test_result);$.txtTestDocu.setValue(obj.test_docu);$.txtTestDocuPath.setValue(obj.test_docu_path);$.txtReceipt.setValue(obj.receipt);$.txtReceiptPath.setValue(obj.receipt_path);$.chkTestReportYN.setValue(obj.test_report_yn);$.chkCustomsReportYN.setValue(obj.customs_report_yn);$.chkRedressing.setValue(obj.redressing_yn);if(jQuery(".FingerDateEdit[id*=dteTestEndDate]").prop("disabled")&&$.dteTestEndDate.getValue()!=""&&($.cmbStatus1.getValue()=="70"||$.cmbStatus1.getValue()=="80"||$.cmbStatus1.getValue()=="90")){if($.TEST_RESULT_MODIFY){$.btnMod.setEnable(true)}}else{$.btnMod.setEnable(false)}}function setPanRemark(obj){initControls("grpRemark");$.memRemark.setValue(obj.remark)}function validateControls(target){if(target=="grpResult"){if($.cmbTestResult.getValue()==""){MessageBoxShow("판정결과는 필수입력항목입니다.");return false}if($.txtTestDocNo.getValue()==""){MessageBoxShow("시험성적서번호는 필수입력항목입니다.");return false}if($.dteTestEndDate.getValue()==""){MessageBoxShow("시험판정일은 필수입력항목입니다.");return false}return true}}function authChk(){$.btnReport.setEnable(false);$.btnSampleReceipt.setEnable(false);if($.cmbStatus1.getValue()=="57"||($.grdReqList.getRowCount()>0&&$.cmbStatus1.getValue()=="70"&&$.grdReqList.getValue($.grdReqListRid,"test_result")=="20")){if($.TEST_SM_NEW){$.btnRequest.setEnable(true)}}else{$.btnRequest.setEnable(false)}if($.grdReqList.getRowCount()>0){if($.cmbStatus1.getValue()=="70"&&$.grdList.getValue($.grdListRid,"test_result")=="20"){if($.TEST_RESULT_END){$.btnCancelExit.setEnable(true)}}else{$.btnCancelExit.setEnable(false)}}else{$.btnDel.setEnable(false)}if($.cmbStatus1.getValue()=="60"){if($.TEST_SM_APPROVAL&&$.grdReqList.getRowCount()>0){$.btnRequest.setText("시험승인");$.btnRequest.setEnable(true);$.varBtnType="2"}if($.TEST_SM_MODIFY){$.btnReqEdit.setEnable(true)}}else{$.btnComplete.setEnable(false);$.dteTestEndDate.setEnable(false);$.cmbTestResult.setEnable(false);$.txtTestDocNo.setEnable(false);$.btnUpload.setEnable(false);$.btnUpload2.setEnable(false);$.chkTestReportYN.setEnable(false);$.chkCustomsReportYN.setEnable(false);$.chkRedressing.setEnable(false)}if($.cmbStatus1.getValue()=="65"){$.btnReqEdit.setEnable(false);$.btnDel.setEnable(false);if($.TEST_SM_APPROVAL&&$.grdReqList.getRowCount()>0){$.btnRequest.setText("승인취소");$.btnRequest.setEnable(true);$.varBtnType="3"}if($.TEST_REPORT){$.btnReport.setEnable(true);$.btnSampleReceipt.setEnable(true)}if($.TEST_RESULT_SAVE){$.dteTestEndDate.getValue($.grdReqList.getValue($.grdReqListRid,"request_date"));$.dteTestEndDate.setEnable(true);$.cmbTestResult.setEnable(true);$.txtTestDocNo.setEnable(true);$.btnComplete.setEnable(true);$.btnUpload.setEnable(true);$.btnUpload2.setEnable(true);$.chkTestReportYN.setEnable(true);$.chkCustomsReportYN.setEnable(true);$.chkRedressing.setEnable(true)}}if($.cmbStatus1.getValue()=="70"&&$.grdList.getValue($.grdListRid,"test_result")=="10"){if($.TEST_RESULT_QA){$.btnQaapproval.setEnable(true)}if($.TEST_RESULT_SAVE){$.dteTestEndDate.getValue($.grdReqList.getValue($.grdReqListRid,"request_date"));$.dteTestEndDate.setEnable(true);$.cmbTestResult.setEnable(true);$.txtTestDocNo.setEnable(true);$.btnComplete.setEnable(true);$.btnUpload.setEnable(true);$.btnUpload2.setEnable(true);$.chkTestReportYN.setEnable(true);$.chkCustomsReportYN.setEnable(true);$.chkRedressing.setEnable(true)}if($.TEST_REPORT){$.btnReport.setEnable(true);$.btnSampleReceipt.setEnable(true)}}else{$.btnQaapproval.setEnable(false)}if($.cmbStatus1.getValue()=="80"||$.cmbStatus1.getValue()=="90"){if($.TEST_RESULT_REPORT){$.btnApproval.setEnable(true)}if($.TEST_REPORT){$.btnReport.setEnable(true);$.btnSampleReceipt.setEnable(true)}}else{$.btnApproval.setEnable(false);$.btnApprovalSendmail.setEnable(false)}}function setAuthority(){var authList=searchQAAuth("Q_AUTH");$.TEST_SM_NEW=false;$.TEST_SM_MODIFY=false;$.TEST_SM_DELETE=false;$.TEST_SM_APPROVAL=false;$.TEST_REPORT=false;$.TEST_RESULT_MODIFY=false;$.TEST_RESULT_END=false;$.TEST_RESULT_SAVE=false;$.TEST_RESULT_QA=false;$.TEST_RESULT_APPROVAL=false;$.TEST_RESULT_REPORT=false;$.TEST_QA_SENDMAIL=false;$.TEST_REMARK_SAVE=false;if(authList){for(var i=0;i<authList.length;i++){if(authList[i].perm_code=="TEST_SM_NEW"){$.TEST_SM_NEW=true}else{if(authList[i].perm_code=="TEST_SM_MODIFY"){$.TEST_SM_MODIFY=true}else{if(authList[i].perm_code=="TEST_SM_DELETE"){$.TEST_SM_DELETE=true}else{if(authList[i].perm_code=="TEST_SM_APPROVAL"){$.TEST_SM_APPROVAL=true}else{if(authList[i].perm_code=="TEST_REPORT"){$.TEST_REPORT=true}else{if(authList[i].perm_code=="TEST_RESULT_MODIFY"){$.TEST_RESULT_MODIFY=true}else{if(authList[i].perm_code=="TEST_RESULT_END"){$.TEST_RESULT_END=true}else{if(authList[i].perm_code=="TEST_RESULT_SAVE"){$.TEST_RESULT_SAVE=true}else{if(authList[i].perm_code=="TEST_RESULT_QA"){$.TEST_RESULT_QA=true}else{if(authList[i].perm_code=="TEST_RESULT_APPROVAL"){$.TEST_RESULT_APPROVAL=true}else{if(authList[i].perm_code=="TEST_RESULT_REPORT"){$.TEST_RESULT_REPORT=true}else{if(authList[i].perm_code=="TEST_QA_SENDMAIL"){$.TEST_QA_SENDMAIL=true}else{if(authList[i].perm_code=="TEST_REMARK_SAVE"){$.TEST_REMARK_SAVE=true}}}}}}}}}}}}}}}}function searchQAAuth(workType){var json=createJSON_Q_AUTH(workType);var ds=callQuerySync(["req",json],workType);if(ds&&ds.resultList){return ds.resultList[0]}else{return false}}function createJSON_Q_AUTH(workType){var json=createExecuteParamInfo("P_stQAAuth_Q",[workType,"","","QA4000","#UserID#"]);return json}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,1120);$.panMain.setText("");$.panMain.setBottomLine(true);$.panQuery=new FingerPanel(host,"panQuery",0,0,1200,55);$.panQuery.setText("");$.panQuery.setBottomLine(true);$.panList=new FingerPanel(host,"panList",0,60,1200,300);$.panList.setText("품목 입고 목록");$.panList.setBottomLine(true);$.panRemark=new FingerPanel(host,"panRemark",835,975,365,130);$.panRemark.setText("비고");$.panRemark.setBottomLine(true);$.panResult=new FingerPanel(host,"panResult",835,685,365,285);$.panResult.setText("시험 결과");$.panResult.setBottomLine(true);$.panRequest=new FingerPanel(host,"panRequest",405,685,415,420);$.panRequest.setText("시험 의뢰");$.panRequest.setBottomLine(true);$.panInfo=new FingerPanel(host,"panInfo",0,685,390,420);$.panInfo.setText("입고 품목 정보");$.panInfo.setBottomLine(true);$.panReqList=new FingerPanel(host,"panReqList",0,370,1200,305);$.panReqList.setText("시험 의뢰 목록");$.panReqList.setBottomLine(true);$.lbl32=new FingerLabel(host,"lbl32",205,15,20,20);$.lbl32.setText("~");$.lblInstockFromdate=new FingerLabel(host,"lblInstockFromdate",0,15,100,20);$.lblInstockFromdate.setText("입고일");$.lblStatus=new FingerLabel(host,"lblStatus",340,15,100,20);$.lblStatus.setText("QA진행상태");$.lblProductCode=new FingerLabel(host,"lblProductCode",545,15,100,20);$.lblProductCode.setText("품목");$.lblLotNo=new FingerLabel(host,"lblLotNo",780,15,100,20);$.lblLotNo.setText("Lot No");$.lblTestResult=new FingerLabel(host,"lblTestResult",30,70,70,20);$.lblTestResult.setText("판정결과");$.lblTestDocNo=new FingerLabel(host,"lblTestDocNo",0,105,100,20);$.lblTestDocNo.setText("시험성적서번호");$.lblTestEndDate=new FingerLabel(host,"lblTestEndDate",20,35,80,20);$.lblTestEndDate.setText("시험판정일");$.lblRequestNo=new FingerLabel(host,"lblRequestNo",25,70,100,20);$.lblRequestNo.setText("의뢰번호");$.lblRequestDate=new FingerLabel(host,"lblRequestDate",25,40,100,20);$.lblRequestDate.setText("시험의뢰일");$.lblTestAgency=new FingerLabel(host,"lblTestAgency",25,10,100,20);$.lblTestAgency.setText("시험위탁기관");$.lblPurpose=new FingerLabel(host,"lblPurpose",25,100,100,20);$.lblPurpose.setText("의뢰목적");$.lblTestStandard=new FingerLabel(host,"lblTestStandard",25,160,100,20);$.lblTestStandard.setText("시험규격");$.lblTestItem=new FingerLabel(host,"lblTestItem",25,130,100,20);$.lblTestItem.setText("시험항목");$.lblResultRequestDate=new FingerLabel(host,"lblResultRequestDate",5,190,120,20);$.lblResultRequestDate.setText("결과통보요망일");$.lblQaId=new FingerLabel(host,"lblQaId",0,275,100,20);$.lblQaId.setText("입고ID");$.lblStatus1=new FingerLabel(host,"lblStatus1",0,10,100,20);$.lblStatus1.setText("QA진행단계");$.lblLotNo1=new FingerLabel(host,"lblLotNo1",0,40,100,20);$.lblLotNo1.setText("Lot No");$.lblProductName=new FingerLabel(host,"lblProductName",0,130,100,20);$.lblProductName.setText("품목");$.lblProductCode1=new FingerLabel(host,"lblProductCode1",205,275,100,20);$.lblProductCode1.setText("품목코드");$.lblManufacturer=new FingerLabel(host,"lblManufacturer",0,160,100,20);$.lblManufacturer.setText("제조원");$.lblPackUnit=new FingerLabel(host,"lblPackUnit",0,190,100,20);$.lblPackUnit.setText("포장단위");$.lblInstockDate=new FingerLabel(host,"lblInstockDate",0,70,100,20);$.lblInstockDate.setText("입고일");$.lblInstockAmt=new FingerLabel(host,"lblInstockAmt",0,100,100,20);$.lblInstockAmt.setText("입고수량");$.lblUseExpireDate=new FingerLabel(host,"lblUseExpireDate",0,250,100,20);$.lblUseExpireDate.setText("사용기한");$.lblQcAmt=new FingerLabel(host,"lblQcAmt",225,190,55,20);$.lblQcAmt.setText("QC용");$.lblKeepAmt=new FingerLabel(host,"lblKeepAmt",225,220,55,20);$.lblKeepAmt.setText("보관용");$.lblProduceYear=new FingerLabel(host,"lblProduceYear",0,280,100,20);$.lblProduceYear.setText("제조일자");$.lblValidMonth=new FingerLabel(host,"lblValidMonth",0,220,100,20);$.lblValidMonth.setText("유효기한(월)");$.lblUnusual=new FingerLabel(host,"lblUnusual",25,220,100,20);$.lblUnusual.setText("특이사항");$.dteInstockTodate=new FingerDateEdit(host,"dteInstockTodate",230,15,100,20);$.dteInstockFromdate=new FingerDateEdit(host,"dteInstockFromdate",105,15,100,20);$.dteTestEndDate=new FingerDateEdit(host,"dteTestEndDate",110,35,135,20);$.dteRequestDate=new FingerDateEdit(host,"dteRequestDate",130,40,140,20);$.dteResultRequestDate=new FingerDateEdit(host,"dteResultRequestDate",130,190,140,20);$.dteInstockDate=new FingerDateEdit(host,"dteInstockDate",105,70,140,20);$.dteUseExpireDate=new FingerDateEdit(host,"dteUseExpireDate",105,250,140,20);$.dteProduceYear=new FingerDateEdit(host,"dteProduceYear",105,280,140,20);$.txtProductCode=new FingerEdit(host,"txtProductCode",725,45,140,20);$.txtLotNo=new FingerEdit(host,"txtLotNo",885,15,120,20);$.txtTestDocNo=new FingerEdit(host,"txtTestDocNo",110,105,135,20);$.txtTestStandardText=new FingerEdit(host,"txtTestStandardText",275,160,135,20);$.txtTestItemText=new FingerEdit(host,"txtTestItemText",275,130,135,20);$.txtPurposeText=new FingerEdit(host,"txtPurposeText",275,100,135,20);$.txtRequestNo=new FingerEdit(host,"txtRequestNo",130,70,140,20);$.txtUnusual=new FingerEdit(host,"txtUnusual",130,220,140,20);$.txtIseq=new FingerEdit(host,"txtIseq",50,305,140,20);$.txtPackUnit=new FingerEdit(host,"txtPackUnit",105,190,115,20);$.txtLotNo1=new FingerEdit(host,"txtLotNo1",105,40,140,20);$.txtManufacturer=new FingerEdit(host,"txtManufacturer",105,160,277,20);$.txtQaId=new FingerEdit(host,"txtQaId",105,275,140,20);$.txtProductCode1=new FingerEdit(host,"txtProductCode1",235,305,140,20);$.memRemark=new FingerMemoEdit(host,"memRemark",5,10,350,60);$.cmbStatus=new FingerComboBox(host,"cmbStatus",445,15,120,20);$.cmbTestResult=new FingerComboBox(host,"cmbTestResult",110,70,140,20);$.cmbTestItem=new FingerComboBox(host,"cmbTestItem",130,130,145,20);$.cmbTestAgency=new FingerComboBox(host,"cmbTestAgency",130,10,145,20);$.cmbPurpose=new FingerComboBox(host,"cmbPurpose",130,100,145,20);$.cmbTestStandard=new FingerComboBox(host,"cmbTestStandard",130,160,145,20);$.cmbProductCheckResult1=new FingerComboBox(host,"cmbProductCheckResult1",105,335,140,20);$.cmbStatus1=new FingerComboBox(host,"cmbStatus1",105,10,145,20);$.btnRemarkSave=new FingerButton(host,"btnRemarkSave",280,-35,100,20);$.btnRemarkSave.setText("저장");$.btnApprovalSendmail=new FingerButton(host,"btnApprovalSendmail",90,200,240,20);$.btnApprovalSendmail.setText("QA출하승인 메일발송");$.btnMod=new FingerButton(host,"btnMod",5,5,100,20);$.btnMod.setText("수정");$.btnApproval=new FingerButton(host,"btnApproval",280,70,100,20);$.btnApproval.setText("출하승인서");$.btnQaapproval=new FingerButton(host,"btnQaapproval",280,35,100,20);$.btnQaapproval.setText("QA출하승인");$.btnComplete=new FingerButton(host,"btnComplete",280,5,100,20);$.btnComplete.setText("저장");$.btnCancelExit=new FingerButton(host,"btnCancelExit",90,5,205,20);$.btnCancelExit.setText("시험부적합종료처리");$.btnReport=new FingerButton(host,"btnReport",330,5,100,20);$.btnReport.setText("시험의뢰서");$.btnDel=new FingerButton(host,"btnDel",950,-40,100,30);$.btnDel.setText("삭제");$.btnRequest=new FingerButton(host,"btnRequest",780,-40,100,30);$.btnRequest.setText("시험의뢰");$.grdList=new FingerDataGrid(host,"grdList",0,0,1200,255);$.grdReqList=new FingerDataGrid(host,"grdReqList",0,0,1200,260);$.speInstockAmt=new FingerSpinEdit(host,"speInstockAmt",105,100,140,20);$.speQcAmt=new FingerSpinEdit(host,"speQcAmt",285,190,95,20);$.speKeepAmt=new FingerSpinEdit(host,"speKeepAmt",285,220,95,20);$.speValidMonth=new FingerSpinEdit(host,"speValidMonth",105,220,115,20);$.btnSearch=new FingerButton(host,"btnSearch",1120,15,80,20);$.btnSearch.setText("조회");$.bteProductName=new FingerButtonEdit(host,"bteProductName",650,15,140,20);$.bteProductName.setText("");$.bteProductName1=new FingerButtonEdit(host,"bteProductName1",105,130,275,25);$.bteProductName1.setText("");$.btnReqEdit=new FingerButton(host,"btnReqEdit",865,-40,100,30);$.btnReqEdit.setText("수정");$.lblTestDocu=new FingerLabel(host,"lblTestDocu",0,140,100,20);$.lblTestDocu.setText("시험결과서");$.txtTestDocu=new FingerEdit(host,"txtTestDocu",110,140,135,20);$.btnUpload=new FingerButton(host,"btnUpload",255,140,80,20);$.btnUpload.setText("업로드");$.btnView=new FingerButton(host,"btnView",320,140,60,20);$.btnView.setText("보기");$.txtTestDocuPath=new FingerEdit(host,"txtTestDocuPath",250,105,50,20);$.lblReceipt=new FingerLabel(host,"lblReceipt",0,175,100,20);$.lblReceipt.setText("검체인수증");$.txtReceipt=new FingerEdit(host,"txtReceipt",110,175,135,20);$.btnUpload2=new FingerButton(host,"btnUpload2",255,175,80,20);$.btnUpload2.setText("업로드");$.btnView2=new FingerButton(host,"btnView2",320,175,60,20);$.btnView2.setText("보기");$.txtReceiptPath=new FingerEdit(host,"txtReceiptPath",300,105,50,20);$.chkTestReportYN=new FingerCheckBox(host,"chkTestReportYN",10,210,110,20);$.chkTestReportYN.setText("제조원 성적서");$.chkCustomsReportYN=new FingerCheckBox(host,"chkCustomsReportYN",120,210,140,20);$.chkCustomsReportYN.setText("표준통관예정보고서");$.chkRedressing=new FingerCheckBox(host,"chkRedressing",260,210,140,20);$.chkRedressing.setText("Redressing");$.btnSampleReceipt=new FingerButton(host,"btnSampleReceipt",330,35,100,20);$.btnSampleReceipt.setText("검체인수증");$.varQaId="";$.varIseq="";$.panQuery.setBorder(true);$.cmbStatus.setColumn("sub_code","code_name");$.cmbTestResult.setColumn("sub_code","code_name");$.cmbTestItem.setColumn("sub_code","code_name");$.cmbTestAgency.setColumn("sub_code","code_name");$.cmbPurpose.setColumn("sub_code","code_name");$.cmbTestStandard.setColumn("sub_code","code_name");$.cmbProductCheckResult1.setColumn("sub_code","code_name");$.cmbStatus1.setColumn("sub_code","code_name");$.cmbStatus.setEmptyRow(true);$.cmbTestResult.setEmptyRow(true);$.cmbTestItem.setEmptyRow(true);$.cmbTestAgency.setEmptyRow(true);$.cmbPurpose.setEmptyRow(true);$.cmbTestStandard.setEmptyRow(true);$.cmbProductCheckResult1.setEmptyRow(true);$.cmbStatus1.setEmptyRow(true);$.grdList.setColumns([new FingerDataGridColumn("instock_date",110,"center","string","입고일","yyyyMMdd"),new FingerDataGridColumn("lot_no",130,"left","string","Lot No"),new FingerDataGridColumn("product_name",200,"left","string","품목"),new FingerDataGridColumn("instock_amt",130,"right","string","입고수량","#,###"),new FingerDataGridColumn("good_instock_amt",130,"right","string","적합입고수량","#,###"),new FingerDataGridColumn("status_name",130,"center","string","QA진행단계"),new FingerDataGridColumn("status",130,"left","string","QA진행단계"),new FingerDataGridColumn("product_check_date",120,"left","string","검수완료일","yyyyMMdd"),new FingerDataGridColumn("test_end_date",120,"left","string","QC완료일","yyyyMMdd"),new FingerDataGridColumn("approval_date_qa",120,"left","string","출하승인일(QA)","yyyyMMdd"),new FingerDataGridColumn("qa_id",130,"center","string","입고ID"),new FingerDataGridColumn("product_check_result",130,"center","string","검수결과"),new FingerDataGridColumn("test_result",130,"center","string","시험결과"),new FingerDataGridColumn("take_date",130,"center","string","검체채취완료일"),new FingerDataGridColumn("approval_date",130,"center","string","출하승인일(최종)")]);$.grdList.init({panel:$.panList});$.grdList.setColumnHidden(["qa_id","product_check_result","test_result","take_date","approval_date","status"],true);$.grdList.setBorder(false);$.grdReqList.setColumns([new FingerDataGridColumn("request_seq",50,"right","string","순번"),new FingerDataGridColumn("request_date",130,"left","string","시험의뢰일","yyyyMMdd"),new FingerDataGridColumn("request_no",130,"left","string","의뢰번호"),new FingerDataGridColumn("test_agency_name",130,"left","string","시험기관"),new FingerDataGridColumn("purpose_text",130,"left","string","의뢰목적"),new FingerDataGridColumn("test_item_text",130,"left","string","시험항목"),new FingerDataGridColumn("test_standard_text",130,"left","string","규격"),new FingerDataGridColumn("test_end_date",130,"center","string","시험판정일","yyyyMMdd"),new FingerDataGridColumn("test_result_name",110,"center","string","판정결과"),new FingerDataGridColumn("test_doc_no",130,"center","string","성적서번호"),new FingerDataGridColumn("qa_id",130,"center","string","입고ID"),new FingerDataGridColumn("test_agency",130,"left","string","시험기관"),new FingerDataGridColumn("test_result",130,"center","string","판정결과")]);$.grdReqList.init({panel:$.panReqList});$.grdReqList.setColumnHidden(["qa_id","test_agency","test_result"],true);$.grdReqList.setBorder(false);$.btnRequest.setEnable(false);$.btnDel.setEnable(false);$.btnReport.setEnable(false);$.btnSampleReceipt.setEnable(false);$.btnCancelExit.setEnable(false);$.btnComplete.setEnable(false);$.btnQaapproval.setEnable(false);$.btnApproval.setEnable(false);$.btnRemarkSave.setEnable(false);$.btnMod.setEnable(false);$.dteTestEndDate.setEnable(false);$.cmbTestResult.setEnable(false);$.txtTestDocNo.setEnable(false);$.txtTestDocu.setEnable(false);$.txtReceipt.setEnable(false);$.btnApprovalSendmail.setEnable(false);$.btnReqEdit.setEnable(false);$.btnUpload.setEnable(false);$.btnUpload2.setEnable(false);$.chkTestReportYN.setEnable(false);$.chkCustomsReportYN.setEnable(false);$.chkRedressing.setEnable(false);log(123);$.txtProductCode.setVisible(false);$.txtTestDocuPath.setVisible(false);$.btnApprovalSendmail.setVisible(false);$.txtReceiptPath.setVisible(false);$.host=host;$.args=args};$.start=function(){$.panMain.add($.panQuery);$.panMain.add($.panList);$.panMain.add($.panRemark);$.panMain.add($.panResult);$.panMain.add($.panRequest);$.panMain.add($.panInfo);$.panMain.add($.panReqList);$.panQuery.add($.lblInstockFromdate);$.panQuery.add($.lbl32);$.panQuery.add($.lblStatus);$.panQuery.add($.lblProductCode);$.panQuery.add($.lblLotNo);$.panQuery.add($.dteInstockTodate);$.panQuery.add($.dteInstockFromdate);$.panQuery.add($.txtLotNo);$.panQuery.add($.txtProductCode);$.panQuery.add($.cmbStatus);$.panQuery.add($.btnSearch);$.panQuery.add($.bteProductName);$.panList.add($.grdList);$.panRemark.add($.memRemark);$.panRemark.add($.btnRemarkSave);$.panResult.add($.lblTestResult);$.panResult.add($.lblTestDocNo);$.panResult.add($.lblTestEndDate);$.panResult.add($.dteTestEndDate);$.panResult.add($.txtTestDocNo);$.panResult.add($.cmbTestResult);$.panResult.add($.btnApprovalSendmail);$.panResult.add($.btnMod);$.panResult.add($.btnApproval);$.panResult.add($.btnQaapproval);$.panResult.add($.btnComplete);$.panResult.add($.btnCancelExit);$.panResult.add($.lblTestDocu);$.panResult.add($.btnUpload);$.panResult.add($.btnView);$.panResult.add($.txtTestDocu);$.panResult.add($.txtTestDocuPath);$.panResult.add($.lblReceipt);$.panResult.add($.txtReceipt);$.panResult.add($.btnUpload2);$.panResult.add($.btnView2);$.panResult.add($.txtReceiptPath);$.panResult.add($.chkTestReportYN);$.panResult.add($.chkCustomsReportYN);$.panResult.add($.chkRedressing);$.panRequest.add($.lblUnusual);$.panRequest.add($.lblRequestNo);$.panRequest.add($.lblRequestDate);$.panRequest.add($.lblTestAgency);$.panRequest.add($.lblPurpose);$.panRequest.add($.lblTestStandard);$.panRequest.add($.lblTestItem);$.panRequest.add($.lblResultRequestDate);$.panRequest.add($.dteResultRequestDate);$.panRequest.add($.dteRequestDate);$.panRequest.add($.txtPurposeText);$.panRequest.add($.txtRequestNo);$.panRequest.add($.txtTestItemText);$.panRequest.add($.txtTestStandardText);$.panRequest.add($.txtUnusual);$.panRequest.add($.cmbTestItem);$.panRequest.add($.cmbTestAgency);$.panRequest.add($.cmbPurpose);$.panRequest.add($.cmbTestStandard);$.panRequest.add($.btnReport);$.panRequest.add($.btnSampleReceipt);$.panInfo.add($.lblValidMonth);$.panInfo.add($.lblQaId);$.panInfo.add($.lblStatus1);$.panInfo.add($.lblLotNo1);$.panInfo.add($.lblProductCode1);$.panInfo.add($.lblProductName);$.panInfo.add($.lblManufacturer);$.panInfo.add($.lblPackUnit);$.panInfo.add($.lblInstockDate);$.panInfo.add($.lblInstockAmt);$.panInfo.add($.lblKeepAmt);$.panInfo.add($.lblProduceYear);$.panInfo.add($.lblUseExpireDate);$.panInfo.add($.lblQcAmt);$.panInfo.add($.dteUseExpireDate);$.panInfo.add($.dteProduceYear);$.panInfo.add($.dteInstockDate);$.panInfo.add($.txtQaId);$.panInfo.add($.txtProductCode1);$.panInfo.add($.txtPackUnit);$.panInfo.add($.txtManufacturer);$.panInfo.add($.txtLotNo1);$.panInfo.add($.txtIseq);$.panInfo.add($.cmbStatus1);$.panInfo.add($.cmbProductCheckResult1);$.panInfo.add($.speInstockAmt);$.panInfo.add($.speKeepAmt);$.panInfo.add($.speQcAmt);$.panInfo.add($.speValidMonth);$.panInfo.add($.bteProductName1);$.panReqList.add($.btnDel);$.panReqList.add($.btnRequest);$.panReqList.add($.grdReqList);$.panReqList.add($.btnReqEdit);initLayoutAll();$.dteInstockFromdate.setValue(getOneMonthAgo());$.dteInstockTodate.setValue(getTodays());searchGrdList();$.dsL_ST0002=bizComponentData2($,"Q1","L_ST0002");$.dsL_ST0008=bizComponentData2($,"Q1","L_ST0008");$.dsL_ST0001=bizComponentData2($,"Q1","L_ST0001");$.dsL_ST0011=bizComponentData2($,"Q1","L_ST0011");$.dsL_ST0006=bizComponentData2($,"Q1","L_ST0006");$.dsL_ST0009=bizComponentData2($,"Q1","L_ST0009");$.dsL_ST0007=bizComponentData2($,"Q1","L_ST0007");setComboBind([$.cmbProductCheckResult1],$.dsL_ST0002);setComboBind([$.cmbPurpose],$.dsL_ST0008);setComboBind([$.cmbStatus],$.dsL_ST0001);setComboBind([$.cmbStatus1],$.dsL_ST0001);setComboBind([$.cmbTestAgency],$.dsL_ST0011);setComboBind([$.cmbTestItem],$.dsL_ST0006);setComboBind([$.cmbTestResult],$.dsL_ST0009);setComboBind([$.cmbTestStandard],$.dsL_ST0007);setAuthority()};$.callback=function(type,ds){if(type=="Q1"){initGrdList();setDataGrid([$.grdList],ds);if($.grdList.getRowCount()>0){if($.varQaId==""){$.grdList.selectRow(0)}else{if(-1==$.grdList.getGridRowIndex("qa_id",$.varQaId)){MessageBoxShow("그리드에 해당 데이터가 존재하지 않습니다.");$.varQaId="";$.varIseq="";$.grdList.selectRow(0)}else{$.grdList.selectRow($.grdList.getGridRowIndex("qa_id",$.varQaId))}}}else{if($.varQaId!=""){MessageBoxShow("그리드에 해당 데이터가 존재하지 않습니다.");$.varQaId="";$.varIseq=""}}}else{if(type=="Q2"){setDataGrid([null,$.grdReqList],ds);if(ds.resultList[0].length>0){setPanInfo(ds.resultList[0][0])}if($.grdReqList.getRowCount()<1){if($.varIseq!=""){MessageBoxShow("그리드에 해당 데이터가 존재하지 않습니다.")}initControls("grdReqList");initControls("grpRequest");initControls("grpResult");initControls("grpRemark");authChk();$.btnReqEdit.setEnable(false);$.varIseq==""}else{if($.varIseq==""){$.grdReqList.selectRow(0)}else{if(-1==$.grdReqList.getGridRowIndex("request_seq",$.varIseq)){MessageBoxShow("그리드에 해당 데이터가 존재하지 않습니다.");$.varIseq="";$.grdReqList.selectRow(0)}else{$.grdReqList.selectRow($.grdReqList.getGridRowIndex("request_seq",$.varIseq))}}authChk()}}else{if(type=="Q3"){if(ds.errorCode=="MSG0001"){setPanRequest(ds.resultList[0][0]);setPanResult(ds.resultList[1][0]);setPanRemark(ds.resultList[2][0])}}else{if(type=="REJECT"){if(ds.errorCode=="MSG0003"){searchGrdList()}}else{if(type=="COMPLETE"){if(ds.errorCode=="MSG0002"){searchGrdList();$.dteTestEndDate.setValue("");$.dteTestEndDate.setEnable(false);$.cmbTestResult.setEnable(false);$.txtTestDocNo.setEnable(false);$.btnComplete.setEnable(false)}}else{if(type=="APPROVAL"){if(ds.errorCode=="MSG0004"){searchGrdList()}}else{if(type=="CANCEL"){if(ds.errorCode=="MSG0004"){searchGrdList()}}}}}}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){$.varQaId="";$.varIseq="";searchGrdList()}else{if(id=="btnRemarkSave"){if(validateControls("grpResult")){saveRemark()}}else{if(id=="btnApprovalSendmail"){var param={mail_type:"30",product_name:$.bteProductName1.getText(),test_end_date:$.dteTestEndDate.getText(),test_result:$.cmbTestResult.getValue(),test_doc_no:$.txtTestDocNo.getValue(),lot_no:$.txtLotNo1.getValue(),instock_date:$.dteInstockDate.getText(),use_expire_date:$.dteUseExpireDate.getText(),request_date:$.dteRequestDate.getText(),approval_date_qa:$.grdList.getValue($.grdListRid,"approval_date_qa")};g_main.openPopup("QAP5000.html","popBtnApprovalSendmail","메일발송",570,530,"","",param,"","")}else{if(id=="btnMod"){if($.cmbStatus1.getValue()=="70"){$.dteTestEndDate.setEnable(true);$.cmbTestResult.setEnable(true);$.txtTestDocNo.setEnable(true);if($.TEST_RESULT_SAVE){$.btnComplete.setEnable(true)}}else{if($.cmbStatus1.getValue()=="80"||$.cmbStatus1.getValue()=="90"){$.dteTestEndDate.setEnable(true);if($.TEST_RESULT_SAVE){$.btnComplete.setEnable(true)}}}}else{if(id=="btnApproval"){var rId=$.grdList.getSelectedRowIdx();if($.grdList.getValue(rId,"approval_date_qa")!=""){searchGrpRequestAndGrpResultAndGrpRemark("REPORT2")}else{MessageBoxShow("출하승인일이 존재하지 않습니다.");return}}else{if(id=="btnQaapproval"){var param={lot_no:$.txtLotNo1.getValue(),instock_date:$.dteInstockDate.getValue(),instock_amt:$.speInstockAmt.getValue(),product_name:$.bteProductName1.getText(),manufacturer:$.txtManufacturer.getValue(),pack_unit:$.txtPackUnit.getValue(),qc_amt:$.speQcAmt.getValue(),keep_amt:$.speKeepAmt.getValue(),use_expire_date:$.dteUseExpireDate.getValue(),produce_year:$.dteProduceYear.getValue(),qa_id:$.txtQaId.getValue(),test_end_date:$.dteTestEndDate.getValue(),test_result:$.cmbTestResult.getValue(),test_doc_no:$.txtTestDocNo.getValue(),request_seq:$.grdReqList.getValue($.grdReqListRid,"request_seq"),valid_month:$.speValidMonth.getValue()};g_main.openPopup("QAP4100.html","popBtnQaapproval","QA출하승인",535,650,"","",param,"","")}else{if(id=="btnComplete"){if(validateControls("grpResult")){doComplete()}}else{if(id=="btnCancelExit"){doCancelExit()}else{if(id=="btnReport"){searchGrpRequestAndGrpResultAndGrpRemark("REPORT")}else{if(id=="btnSampleReceipt"){searchGrpRequestAndGrpResultAndGrpRemark("REPORT3")}else{if(id=="btnDel"){confirmBoxShow("정말 삭제하시겠습니까?",function(){if(g_main.msgShare==true){delGrdRegListItem()}})}else{if(id=="btnRequest"){if($.varBtnType=="1"){var param={lot_no:$.txtLotNo1.getValue(),instock_date:$.dteInstockDate.getValue(),instock_amt:$.speInstockAmt.getValue(),product_name:$.bteProductName1.getText(),manufacturer:$.txtManufacturer.getValue(),pack_unit:$.txtPackUnit.getValue(),qc_amt:$.speQcAmt.getValue(),keep_amt:$.speKeepAmt.getValue(),use_expire_date:$.dteUseExpireDate.getValue(),produce_year:$.dteProduceYear.getValue(),qa_id:$.txtQaId.getValue(),take_date:$.grdList.getValue($.grdListRid,"take_date"),valid_month:$.speValidMonth.getValue()};g_main.openPopup("QAP4000.html","popBtnRequest","시험의뢰",535,660,"","",param,"","")}else{if($.varBtnType=="2"){confirmBoxShow("시험의뢰 승인하시겠습니까?",function(){if(g_main.msgShare==true){$.popUpCallId=id;var param=null;g_main.openPopup("popWFPassword.html","popWFPassword","",0,0,"","",param,"","")}})}else{if($.varBtnType=="3"){confirmBoxShow("시험의뢰 승인취소하시겠습니까?",function(){if(g_main.msgShare==true){$.popUpCallId=id;var param=null;g_main.openPopup("popWFPassword.html","popWFPassword","",0,0,"","",param,"","")}})}}}}else{if(id=="btnReqEdit"){var param={lot_no:$.txtLotNo1.getValue(),instock_date:$.dteInstockDate.getValue(),instock_amt:$.speInstockAmt.getValue(),product_name:$.bteProductName1.getText(),manufacturer:$.txtManufacturer.getValue(),pack_unit:$.txtPackUnit.getValue(),qc_amt:$.speQcAmt.getValue(),keep_amt:$.speKeepAmt.getValue(),use_expire_date:$.dteUseExpireDate.getValue(),produce_year:$.dteProduceYear.getValue(),qa_id:$.txtQaId.getValue(),take_date:$.grdList.getValue($.grdListRid,"take_date"),valid_month:$.speValidMonth.getValue(),test_agency:$.cmbTestAgency.getValue(),request_date:$.dteRequestDate.getValue(),purpose:$.cmbPurpose.getValue(),purpose_text:$.txtPurposeText.getValue(),test_item:$.cmbTestItem.getValue(),test_item_text:$.txtTestItemText.getValue(),test_standard:$.cmbTestStandard.getValue(),test_standard_text:$.txtTestStandardText.getValue(),result_request_date:$.dteResultRequestDate.getValue(),request_seq:$.grdReqList.getValue($.grdReqListRid,"request_seq"),unusual:$.txtUnusual.getValue()};g_main.openPopup("QAP4000.html","popBtnReqEdit","시험의뢰",535,660,"","",param,"","")}else{if(id=="btnUpload"){OpenFileUploader("QA",function(ds){if(!ds||ds.errorCode=="ERR0000"){MessageBoxShow("파일 업로드가 실패 하였습니다.");return}var fileList=ds.resultList[0];$.txtTestDocuPath.setValue(ds.resultList[0][0].server_path);$.txtTestDocu.setValue(ds.resultList[0][0].server_fname)})}else{if(id=="btnView"){if($.txtTestDocu.getValue()!=""){g_fileBrowser.download(getServerFileUrl($.txtTestDocuPath.getValue()+$.txtTestDocu.getValue()))}}else{if(id=="btnUpload2"){OpenFileUploader("QA",function(ds){if(!ds||ds.errorCode=="ERR0000"){MessageBoxShow("파일 업로드가 실패 하였습니다.");return}var fileList=ds.resultList[0];$.txtReceiptPath.setValue(ds.resultList[0][0].server_path);$.txtReceipt.setValue(ds.resultList[0][0].server_fname)})}else{if(id=="btnView2"){if($.txtReceipt.getValue()!=""){g_fileBrowser.download(getServerFileUrl($.txtReceiptPath.getValue()+$.txtReceipt.getValue()))}}}}}}}}}}}}}}}}}}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){if(id=="bteProductName"){var param={product_code:$.txtProductCode.getValue(),product_name:$.bteProductName.getText()};g_main.openPopup("popQAProduct.html","popBteProductName","QA제품팝업",705,500,"","",param,"","")}};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){if(id=="dteInstockFromdate"){if($.dteInstockFromdate==""||$.dteInstockFromdate.getValue().length<8||$.dteInstockFromdate.getValue().length>8){return}else{if($.dteInstockFromdate.getValue()>$.dteInstockTodate.getValue()){$.dteInstockTodate.setValue($.dteInstockFromdate.getValue())}}}};$.fingerdatagrid_itemclick=function(id,rId,cInd){if(id=="grdList"){$.varIseq=""}};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdList"){$.grdListRid=rId;$.varQaId=$.grdList.getValue(rId,"qa_id");searchGrdReqList()}else{if(id=="grdReqList"){$.grdReqListRid=rId;$.txtIseq.setValue($.grdReqList.getValue(rId,"request_seq"));$.varIseq=$.grdReqList.getValue(rId,"request_seq");searchGrpRequestAndGrpResultAndGrpRemark("Q");if($.grdReqList.getValue(rId,"test_result")==""){if($.TEST_SM_DELETE){$.btnDel.setEnable(true)}}else{$.btnDel.setEnable(false)}}}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){if(id=="txtLotNo"&&value=="13"){$.varQaId="";$.varIseq="";searchGrdList()}};$.fingeredit_lostfocus=function(id,value){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(popResult){if(id=="popBteProductName"){$.bteProductName.setText(popResult.product_name);$.txtProductCode.setValue(popResult.product_code)}else{if(id=="popBtnRequest"){if(popResult.result=="OK"){searchGrdList();$.grdList.selectRow($.grdListRid)}}else{if(id=="popBtnQaapproval"){if(popResult.result=="OK"){searchGrdList();$.grdList.selectRow($.grdListRid)}}else{if(id=="popBtnReqEdit"){if(popResult.result=="OK"){searchGrdList();$.grdList.selectRow($.grdListRid)}}else{if(id=="popBtnApprovalSendmail"){if(popResult.send_yn=="Y"){MessageBoxShow("메일이 발송 되었습니다.")}}else{if(id=="popWFPassword"){if(popResult.result&&$.varBtnType=="2"){saveApproval()}else{if(popResult.result&&$.varBtnType=="3"){saveCancel()}}}}}}}}}};$.fingerpopup2_close=function(id){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerradiobox_change=function(id,value){};$.fingerimage_click=function(id){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>