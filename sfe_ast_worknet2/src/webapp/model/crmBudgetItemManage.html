<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panInfo=null;$.panList=null;$.lblEx1=null;$.lblEx10=null;$.lblEx2=null;$.lblEx3=null;$.lblEx4=null;$.lblEx5=null;$.lblEx6=null;$.lblEx7=null;$.lblEx8=null;$.lblEx9=null;$.lblAccountCode=null;$.lblBudgetAcctype=null;$.lblBudgetCode=null;$.lblBudgetCode1=null;$.lblBudgetName=null;$.lblBudgetName1=null;$.lblBudgetNameEng=null;$.lblBudgetNameFor=null;$.lblParentBudgetCode=null;$.lblRemark=null;$.lblUseYn=null;$.cmbBudgetAcctype=null;$.cmbBudgetReportType=null;$.cmbBudgetTransferType=null;$.cmbUcoaCode=null;$.memRemark=null;$.txtAccountCode=null;$.txtBudgetCode=null;$.txtBudgetCode1=null;$.txtBudgetName=null;$.txtBudgetName1=null;$.txtBudgetNameEng=null;$.txtBudgetNameFor=null;$.txtParentBudgetCode=null;$.bteAccountName=null;$.bteParentBudgetName=null;$.panQuery=null;$.btnSearch=null;$.grdList=null;$.chkNotGiveYn=null;$.chkNotOverYn=null;$.chkNotReceiveYn=null;$.chkPlanHalfYn=null;$.chkPlanMonthYn=null;$.chkProdBudgetYn=null;$.chkPromoBudgetYn=null;$.chkUseYn=null;$.lblAccount=null;$.memAccount=null;$.panUserInfo=null;$.lblBudgetCode2=null;$.txtBudgetCode2=null;$.lblBudgetName2=null;$.txtBudgetName2=null;$.lblUcoa2=null;$.txtUcoa2=null;$.chkHalfNotOverYn=null;$.chkNotGiveYn2=null;$.chkNotReceiveYn2=null;$.lblAccount2=null;$.memAccount2=null;$.lblHalfNotOverYn=null;$.lblNotGiveYn2=null;$.lblNotReceiveYn2=null;$.panBudgetLimitClear=null;$.grdBudgetLimitClear=null;$.btnAccountSearch=null;$.varBudgetCode="";$.varIsAdmin=false;$.deleteRows=[];$.isAllSearch=true;function createJSON_S(workType){var json=createExecuteParamInfo("P_crmBudgetAcc_S",[workType,$.txtBudgetCode1.getValue(),$.txtBudgetName1.getValue(),$.txtBudgetNameEng.getValue(),$.txtBudgetNameFor.getValue(),$.txtParentBudgetCode.getValue(),$.chkProdBudgetYn.getValue(),$.chkPromoBudgetYn.getValue(),$.chkPlanMonthYn.getValue(),$.chkPlanHalfYn.getValue(),$.txtAccountCode.getValue(),$.cmbUcoaCode.getValue(),$.cmbBudgetAcctype.getValue(),$.cmbBudgetTransferType.getValue(),$.cmbBudgetReportType.getValue(),$.chkNotOverYn.getValue(),$.chkNotGiveYn.getValue(),$.chkNotReceiveYn.getValue(),$.chkUseYn.getValue(),$.memRemark.getValue()||"",$.memAccount.getValue()||"","#UserID#"]);return json}function createJSON_S1(){var rows=[];var changedRows=$.grdBudgetLimitClear.getChangedRows();if($.deleteRows.length>0){for(var i in $.deleteRows){changedRows.push($.deleteRows[i])}}if(changedRows.length==0){MessageBoxShow("변경된 내역이 없습니다.");return false}var budgetCode="";if(!$.isAllSearch){budgetCode=$.grdList.getValue($.grdListRid,"budget_code")}for(var i in changedRows){workType=changedRows[i].rowType;rows.push([workType,budgetCode?budgetCode:changedRows[i].budget_code,changedRows[i].product_code||"",changedRows[i].current_product_code||"",changedRows[i].seq||0,getFormatDate(changedRows[i].allow_due_date,"yyyyMMdd").substr(0,8),changedRows[i].allow_amt||0,1,changedRows[i].dept_code||"",changedRows[i].target_dept_code||"",changedRows[i].target_budget_code||"",changedRows[i].target_product_code||"","","","#UserID#"])}var json=createExecuteParamInfo("P_crmBudgetAssignAllow_S",rows);return json}function createJSON_Q(workType){var json=createExecuteParamInfo("P_crmBudgetAcc_Q",[workType,$.txtBudgetCode.getValue(),$.txtBudgetName.getValue(),$.varIsAdmin?"ADMIN":""]);return json}function createJSON_Q1(workType,type){var json=createExecuteParamInfo("P_crmBudgetAssignAllow_Q",[workType,type?"":$.grdList.getValue($.grdListRid,"budget_code"),"",0,"#UserID#"]);return json}function delBudgetInfo(){var json=createJSON_S("D");callExecute(["req",json],"D",$)}function saveBudgetInfo(){if(!validateControls([$.txtBudgetCode1,$.txtBudgetName1])){return}var json=createJSON_S($.strType);callExecute(["req",json],"save",$)}function saveBudgetAssignAllow(){var json=createJSON_S1();if(json){callExecute(["req",json],"SAVE_ALLOW",$)}}function searchBudgetList(){var json=createJSON_Q("Q1");callQuery(["req",json],"Q1",$)}function searchBudgetAssignAllowList(type){var json=createJSON_Q1("Q",type);callQuery(["req",json],"Q_ALLOW",$)}function setPanInfo(rId){if($.varIsAdmin){$.cmbBudgetAcctype.setValue($.grdList.getValue(rId,"budget_acctype"));$.cmbBudgetReportType.setValue($.grdList.getValue(rId,"budget_report_type"));$.cmbBudgetTransferType.setValue($.grdList.getValue(rId,"budget_transfer_type"));$.cmbUcoaCode.setValue($.grdList.getValue(rId,"ucoa_code"));$.memRemark.setValue($.grdList.getValue(rId,"remark"));$.txtAccountCode.setValue($.grdList.getValue(rId,"account_code"));$.txtBudgetCode1.setValue($.grdList.getValue(rId,"budget_code"));$.txtBudgetName1.setValue($.grdList.getValue(rId,"budget_name"));$.txtBudgetNameEng.setValue($.grdList.getValue(rId,"budget_name_eng"));$.txtBudgetNameFor.setValue($.grdList.getValue(rId,"budget_name_for"));$.txtParentBudgetCode.setValue($.grdList.getValue(rId,"parent_budget_code"));$.bteAccountName.setText($.grdList.getValue(rId,"account_name"));$.bteParentBudgetName.setText($.grdList.getValue(rId,"parent_budget_name"));$.chkNotGiveYn.setValue($.grdList.getValue(rId,"not_give_yn"));$.chkNotOverYn.setValue($.grdList.getValue(rId,"not_over_yn"));$.chkNotReceiveYn.setValue($.grdList.getValue(rId,"not_receive_yn"));$.chkPlanHalfYn.setValue($.grdList.getValue(rId,"plan_half_yn"));$.chkPlanMonthYn.setValue($.grdList.getValue(rId,"plan_month_yn"));$.chkProdBudgetYn.setValue($.grdList.getValue(rId,"prod_budget_yn"));$.chkPromoBudgetYn.setValue($.grdList.getValue(rId,"promo_budget_yn"));$.chkUseYn.setValue($.grdList.getValue(rId,"use_yn"));$.memAccount.setValue($.grdList.getValue(rId,"define_account"))}else{$.txtBudgetCode2.setValue($.grdList.getValue(rId,"budget_code"));$.txtBudgetName2.setValue($.grdList.getValue(rId,"budget_name"));$.txtUcoa2.setValue($.grdList.getValue(rId,"ucoa_name"));$.chkHalfNotOverYn.setValue($.grdList.getValue(rId,"not_over_yn"));$.chkNotGiveYn2.setValue($.grdList.getValue(rId,"not_give_yn"));$.chkNotReceiveYn2.setValue($.grdList.getValue(rId,"not_receive_yn"));$.memAccount2.setValue($.grdList.getValue(rId,"define_account"))}}function chk(){var dt=$.grdBudgetLimitClear.getAllRows();for(var i=0;i<dt.length;i++){if(!dt[i].allow_due_date){MessageBoxShow("제한해제기한은 필수 입력입니다.");return false}}return true}function allowChk(a,b,c,d){if(b.allow_yn=="Y"&&b.allow_date_yn=="Y"){return{background:"#bfdff9 !important"}}}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,965);$.panMain.setText("");$.panMain.setBottomLine(true);$.panInfo=new FingerPanel(host,"panInfo",500,0,700,665);$.panInfo.setText("예산항목 정보");$.panInfo.setBottomLine(true);$.panList=new FingerPanel(host,"panList",0,0,490,945);$.panList.setText("예산항목 리스트");$.panList.setBottomLine(true);$.lblEx1=new FingerLabel(host,"lblEx1",20,220,100,20);$.lblEx1.setText("품목예산");$.lblEx10=new FingerLabel(host,"lblEx10",305,310,100,20);$.lblEx10.setText("U-CoA");$.lblEx2=new FingerLabel(host,"lblEx2",20,250,100,20);$.lblEx2.setText("월대상예산");$.lblEx3=new FingerLabel(host,"lblEx3",160,250,100,20);$.lblEx3.setText("반기대상예산");$.lblEx4=new FingerLabel(host,"lblEx4",160,220,100,20);$.lblEx4.setText("판촉예산");$.lblEx5=new FingerLabel(host,"lblEx5",300,220,105,20);$.lblEx5.setText("하반기이월불가");$.lblEx6=new FingerLabel(host,"lblEx6",300,250,105,20);$.lblEx6.setText("전용(주기)불가");$.lblEx7=new FingerLabel(host,"lblEx7",305,280,100,20);$.lblEx7.setText("예산전용분류");$.lblEx8=new FingerLabel(host,"lblEx8",450,250,105,20);$.lblEx8.setText("전용(받기)불가");$.lblEx9=new FingerLabel(host,"lblEx9",20,310,100,20);$.lblEx9.setText("예산집계분류");$.lblAccountCode=new FingerLabel(host,"lblAccountCode",20,160,100,20);$.lblAccountCode.setText("계정코드(ERP)");$.lblBudgetAcctype=new FingerLabel(host,"lblBudgetAcctype",20,280,100,20);$.lblBudgetAcctype.setText("예산항목유형");$.lblBudgetCode=new FingerLabel(host,"lblBudgetCode",0,15,100,20);$.lblBudgetCode.setText("항목코드");$.lblBudgetCode1=new FingerLabel(host,"lblBudgetCode1",20,10,100,20);$.lblBudgetCode1.setText("예산항목코드");$.lblBudgetName=new FingerLabel(host,"lblBudgetName",0,45,100,20);$.lblBudgetName.setText("항목명");$.lblBudgetName1=new FingerLabel(host,"lblBudgetName1",20,40,100,20);$.lblBudgetName1.setText("예산항목명");$.lblBudgetNameEng=new FingerLabel(host,"lblBudgetNameEng",15,70,105,20);$.lblBudgetNameEng.setText("영문예산항목명");$.lblBudgetNameFor=new FingerLabel(host,"lblBudgetNameFor",15,100,105,20);$.lblBudgetNameFor.setText("한자예산항목명");$.lblParentBudgetCode=new FingerLabel(host,"lblParentBudgetCode",0,130,120,20);$.lblParentBudgetCode.setText("상위예산항목코드");$.lblRemark=new FingerLabel(host,"lblRemark",20,340,100,20);$.lblRemark.setText("적요");$.lblUseYn=new FingerLabel(host,"lblUseYn",20,190,100,20);$.lblUseYn.setText("사용여부");$.cmbBudgetAcctype=new FingerComboBox(host,"cmbBudgetAcctype",130,280,140,20);$.cmbBudgetReportType=new FingerComboBox(host,"cmbBudgetReportType",130,310,140,20);$.cmbBudgetTransferType=new FingerComboBox(host,"cmbBudgetTransferType",415,280,140,20);$.cmbUcoaCode=new FingerComboBox(host,"cmbUcoaCode",415,310,140,20);$.memRemark=new FingerMemoEdit(host,"memRemark",130,340,460,50);$.txtAccountCode=new FingerEdit(host,"txtAccountCode",130,160,140,20);$.txtBudgetCode=new FingerEdit(host,"txtBudgetCode",110,15,140,20);$.txtBudgetCode1=new FingerEdit(host,"txtBudgetCode1",130,10,140,20);$.txtBudgetName=new FingerEdit(host,"txtBudgetName",110,45,140,20);$.txtBudgetName1=new FingerEdit(host,"txtBudgetName1",130,40,460,20);$.txtBudgetNameEng=new FingerEdit(host,"txtBudgetNameEng",130,70,460,20);$.txtBudgetNameFor=new FingerEdit(host,"txtBudgetNameFor",130,100,460,20);$.txtParentBudgetCode=new FingerEdit(host,"txtParentBudgetCode",130,130,140,20);$.bteAccountName=new FingerButtonEdit(host,"bteAccountName",275,160,315,20);$.bteAccountName.setText("");$.bteParentBudgetName=new FingerButtonEdit(host,"bteParentBudgetName",275,130,315,20);$.bteParentBudgetName.setText("");$.panQuery=new FingerPanel(host,"panQuery",0,0,490,80);$.panQuery.setText("");$.panQuery.setBottomLine(true);$.btnSearch=new FingerButton(host,"btnSearch",330,45,80,20);$.btnSearch.setText("조회");$.grdList=new FingerDataGrid(host,"grdList",0,80,489,819);$.chkNotGiveYn=new FingerCheckBox(host,"chkNotGiveYn",415,250,20,20);$.chkNotGiveYn.setText("");$.chkNotOverYn=new FingerCheckBox(host,"chkNotOverYn",415,220,20,20);$.chkNotOverYn.setText("");$.chkNotReceiveYn=new FingerCheckBox(host,"chkNotReceiveYn",565,250,20,20);$.chkNotReceiveYn.setText("");$.chkPlanHalfYn=new FingerCheckBox(host,"chkPlanHalfYn",270,250,20,20);$.chkPlanHalfYn.setText("");$.chkPlanMonthYn=new FingerCheckBox(host,"chkPlanMonthYn",130,250,20,20);$.chkPlanMonthYn.setText("");$.chkProdBudgetYn=new FingerCheckBox(host,"chkProdBudgetYn",130,220,20,20);$.chkProdBudgetYn.setText("");$.chkPromoBudgetYn=new FingerCheckBox(host,"chkPromoBudgetYn",270,220,20,20);$.chkPromoBudgetYn.setText("");$.chkUseYn=new FingerCheckBox(host,"chkUseYn",130,190,20,20);$.chkUseYn.setText("");$.lblAccount=new FingerLabel(host,"lblAccount",0,400,120,20);$.lblAccount.setText("정의");$.memAccount=new FingerMemoEdit(host,"memAccount",130,400,460,195);$.panUserInfo=new FingerPanel(host,"panUserInfo",500,0,700,665);$.panUserInfo.setText("예산항목 정보");$.panUserInfo.setBottomLine(true);$.lblBudgetCode2=new FingerLabel(host,"lblBudgetCode2",0,10,120,20);$.lblBudgetCode2.setText("예산항목코드");$.txtBudgetCode2=new FingerEdit(host,"txtBudgetCode2",125,10,460,20);$.lblBudgetName2=new FingerLabel(host,"lblBudgetName2",0,40,120,20);$.lblBudgetName2.setText("예산항목명");$.txtBudgetName2=new FingerEdit(host,"txtBudgetName2",125,40,460,20);$.lblUcoa2=new FingerLabel(host,"lblUcoa2",0,70,120,20);$.lblUcoa2.setText("U-CoA");$.txtUcoa2=new FingerEdit(host,"txtUcoa2",125,70,460,20);$.chkHalfNotOverYn=new FingerCheckBox(host,"chkHalfNotOverYn",125,100,20,20);$.chkHalfNotOverYn.setText("");$.chkNotGiveYn2=new FingerCheckBox(host,"chkNotGiveYn2",260,100,20,20);$.chkNotGiveYn2.setText("");$.chkNotReceiveYn2=new FingerCheckBox(host,"chkNotReceiveYn2",400,100,20,20);$.chkNotReceiveYn2.setText("");$.lblAccount2=new FingerLabel(host,"lblAccount2",0,130,120,20);$.lblAccount2.setText("정의");$.memAccount2=new FingerMemoEdit(host,"memAccount2",125,130,460,470);$.lblHalfNotOverYn=new FingerLabel(host,"lblHalfNotOverYn",0,100,120,20);$.lblHalfNotOverYn.setText("반기이월불가");$.lblNotGiveYn2=new FingerLabel(host,"lblNotGiveYn2",155,100,100,20);$.lblNotGiveYn2.setText("전용(주기)불가");$.lblNotReceiveYn2=new FingerLabel(host,"lblNotReceiveYn2",290,100,105,20);$.lblNotReceiveYn2.setText("전용(받기)불가");$.panBudgetLimitClear=new FingerPanel(host,"panBudgetLimitClear",500,675,700,270);$.panBudgetLimitClear.setText("예산 전용 제한 해제");$.panBudgetLimitClear.setBottomLine(true);$.grdBudgetLimitClear=new FingerDataGrid(host,"grdBudgetLimitClear",0,0,700,225);$.btnAccountSearch=new FingerButton(host,"btnAccountSearch",379,-40,90,30);$.btnAccountSearch.setText("전체조회");$.strType="N";$.panInfo.addButtons(["btnDelete","btnSave","btnNew"]);$.cmbBudgetAcctype.setColumn("sub_code","code_name");$.cmbBudgetReportType.setColumn("sub_code","code_name");$.cmbBudgetTransferType.setColumn("sub_code","code_name");$.cmbUcoaCode.setColumn("sub_code","code_name");$.cmbBudgetAcctype.setEmptyRow(true);$.cmbBudgetReportType.setEmptyRow(true);$.cmbBudgetTransferType.setEmptyRow(true);$.cmbUcoaCode.setEmptyRow(true);$.bteAccountName.setEnable(false);$.txtParentBudgetCode.setEnable(false);$.grdList.setColumns([new FingerDataGridColumn("budget_code",170,"left","string","예산항목코드",{template:"tree"}),new FingerDataGridColumn("budget_name",302,"left","string","예산항목명"),new FingerDataGridColumn("budget_name_eng",130,"center","string","영문예산항목명",{excelHidden:true}),new FingerDataGridColumn("budget_name_for",130,"center","string","한자예산항목명",{excelHidden:true}),new FingerDataGridColumn("parent_budget_code",130,"center","string","상위예산항목코드",{excelHidden:true}),new FingerDataGridColumn("parent_budget_name",130,"center","string","상위예산항목명",{excelHidden:true}),new FingerDataGridColumn("account_code",130,"center","string","계정코드(ERP, {excelHidden: true})",{excelHidden:true}),new FingerDataGridColumn("account_name",130,"center","string","계정명(ERP, {excelHidden: true})",{excelHidden:true}),new FingerDataGridColumn("ucoa_code",130,"center","string","U_CoA",{excelHidden:true}),new FingerDataGridColumn("budget_acctype",130,"center","string","예산항목유형",{excelHidden:true}),new FingerDataGridColumn("budget_transfer_type",130,"center","string","예산전용분류",{excelHidden:true}),new FingerDataGridColumn("budget_report_type",130,"center","string","예산집계분류",{excelHidden:true}),new FingerDataGridColumn("not_over_yn",130,"center","string","하반기이월불가",{excelHidden:true}),new FingerDataGridColumn("not_give_yn",130,"center","string","전용불가(주기, {excelHidden: true})",{excelHidden:true}),new FingerDataGridColumn("not_receive_yn",130,"center","string","전용불가(받기, {excelHidden: true})",{excelHidden:true}),new FingerDataGridColumn("use_yn",130,"center","string","사용",{excelHidden:true}),new FingerDataGridColumn("remark",130,"center","string","적요",{excelHidden:true}),new FingerDataGridColumn("define_account",130,"center","string","정의/정산",{excelHidden:true}),new FingerDataGridColumn("prod_budget_yn",130,"center","string","품목예산여부",{excelHidden:true}),new FingerDataGridColumn("promo_budget_yn",130,"center","string","판촉예산여부",{excelHidden:true}),new FingerDataGridColumn("plan_month_yn",130,"center","string","월예산대상여부",{excelHidden:true}),new FingerDataGridColumn("plan_half_yn",130,"center","string","반기예산대상여부",{excelHidden:true}),new FingerDataGridColumn("ucoa_name",130,"center","string","",{hidden:true})]);$.grdList.init({panel:$.panList,view:"treetable",treeKey:{id:"budget_code",parent:"parent_budget_code"}});$.grdList.setColumnHidden(["budget_name_eng","budget_name_for","parent_budget_code","parent_budget_name","account_code","account_name","ucoa_code","budget_acctype","budget_transfer_type","budget_report_type","not_over_yn","not_give_yn","not_receive_yn","use_yn","remark","prod_budget_yn","promo_budget_yn","plan_month_yn","plan_half_yn"],true);$.txtBudgetCode1.setAllowBlank(false,"예산항목코드");$.txtBudgetName1.setAllowBlank(false,"예산항목명");$.panBudgetLimitClear.addButtons(["btnDelete","btnSave","btnAdd"]);$.panBudgetLimitClear.disableButton(["btnAdd"]);$.txtBudgetCode2.setReadOnly(true);$.txtBudgetName2.setReadOnly(true);$.txtUcoa2.setReadOnly(true);$.chkHalfNotOverYn.setEnable(false);$.chkNotGiveYn2.setEnable(false);$.chkNotReceiveYn2.setEnable(false);$.memAccount2.setReadOnly(true);$.grdBudgetLimitClear.setColumns([new FingerDataGridColumn("budget_name",120,"left","string","받기(예산항목)",{readonly:true,cssFormat:allowChk}),new FingerDataGridColumn("product_code",80,"left","string","받기(품목)",{cssFormat:allowChk}),new FingerDataGridColumn("dept_name",120,"left","string","받기(부서)",{readonly:true,isLink:true,cssFormat:allowChk}),new FingerDataGridColumn("target_budget_name",130,"left","string","주기(예산항목)",{readonly:true,isLink:true,cssFormat:allowChk}),new FingerDataGridColumn("target_product_name",80,"left","string","주기(품목)",{hidden:true,cssFormat:allowChk}),new FingerDataGridColumn("target_dept_name",120,"left","string","주기(부서)",{readonly:true,isLink:true,cssFormat:allowChk}),new FingerDataGridColumn("allow_due_date",95,"left","date","전용기한",{format:"ymd_dot",cssFormat:allowChk}),new FingerDataGridColumn("allow_amt",75,"right","int","전용금액",{format:"int",cssFormat:allowChk}),new FingerDataGridColumn("create_time",80,"left","string","등록일자",{readonly:true,cssFormat:allowChk}),new FingerDataGridColumn("update_time",80,"left","string","갱신일자",{readonly:true,cssFormat:allowChk}),new FingerDataGridColumn("seq",0,"left","string","",{hidden:true}),new FingerDataGridColumn("dept_code",0,"left","string","",{hidden:true}),new FingerDataGridColumn("target_dept_code",0,"left","string","",{hidden:true}),new FingerDataGridColumn("target_budget_code",0,"left","string","",{hidden:true}),new FingerDataGridColumn("current_product_code",0,"left","string","",{hidden:true}),new FingerDataGridColumn("budget_code",0,"left","string","",{hidden:true}),new FingerDataGridColumn("target_product_code",0,"left","string","",{hidden:true})]);$.grdBudgetLimitClear.init({scroll:"xy",eventCellReadOnly:true,headerRowHeight:45});$.grdBudgetLimitClear.setEditable(true);$.grdBudgetLimitClear.setBorder(false);$.host=host;$.args=args};$.start=function(){$.panMain.add($.panInfo);$.panMain.add($.panList);$.panMain.add($.panUserInfo);$.panMain.add($.panBudgetLimitClear);$.panInfo.add($.cmbBudgetAcctype);$.panInfo.add($.cmbBudgetReportType);$.panInfo.add($.cmbBudgetTransferType);$.panInfo.add($.cmbUcoaCode);$.panInfo.add($.bteParentBudgetName);$.panInfo.add($.bteAccountName);$.panInfo.add($.txtParentBudgetCode);$.panInfo.add($.txtBudgetNameFor);$.panInfo.add($.txtBudgetNameEng);$.panInfo.add($.txtBudgetName1);$.panInfo.add($.txtBudgetCode1);$.panInfo.add($.txtAccountCode);$.panInfo.add($.memRemark);$.panInfo.add($.lblUseYn);$.panInfo.add($.lblRemark);$.panInfo.add($.lblParentBudgetCode);$.panInfo.add($.lblBudgetNameFor);$.panInfo.add($.lblBudgetNameEng);$.panInfo.add($.lblBudgetName1);$.panInfo.add($.lblBudgetCode1);$.panInfo.add($.lblBudgetAcctype);$.panInfo.add($.lblAccountCode);$.panInfo.add($.lblEx9);$.panInfo.add($.lblEx8);$.panInfo.add($.lblEx7);$.panInfo.add($.lblEx6);$.panInfo.add($.lblEx5);$.panInfo.add($.lblEx4);$.panInfo.add($.lblEx3);$.panInfo.add($.lblEx2);$.panInfo.add($.lblEx10);$.panInfo.add($.lblEx1);$.panInfo.add($.chkNotGiveYn);$.panInfo.add($.chkNotOverYn);$.panInfo.add($.chkNotReceiveYn);$.panInfo.add($.chkPlanHalfYn);$.panInfo.add($.chkPlanMonthYn);$.panInfo.add($.chkProdBudgetYn);$.panInfo.add($.chkPromoBudgetYn);$.panInfo.add($.chkUseYn);$.panInfo.add($.lblAccount);$.panInfo.add($.memAccount);$.panList.add($.panQuery);$.panList.add($.grdList);$.panQuery.add($.lblBudgetCode);$.panQuery.add($.lblBudgetName);$.panQuery.add($.txtBudgetCode);$.panQuery.add($.txtBudgetName);$.panQuery.add($.btnSearch);$.panUserInfo.add($.memAccount2);$.panUserInfo.add($.lblAccount2);$.panUserInfo.add($.chkNotReceiveYn2);$.panUserInfo.add($.chkNotGiveYn2);$.panUserInfo.add($.chkHalfNotOverYn);$.panUserInfo.add($.txtUcoa2);$.panUserInfo.add($.lblUcoa2);$.panUserInfo.add($.txtBudgetName2);$.panUserInfo.add($.lblBudgetName2);$.panUserInfo.add($.txtBudgetCode2);$.panUserInfo.add($.lblBudgetCode2);$.panUserInfo.add($.lblHalfNotOverYn);$.panUserInfo.add($.lblNotGiveYn2);$.panUserInfo.add($.lblNotReceiveYn2);$.panBudgetLimitClear.add($.grdBudgetLimitClear);$.panBudgetLimitClear.add($.btnAccountSearch);var session=g_main.session.obj;if(session.SystemDeveloper=="Y"||session.DeptCode=="A110"||session.DeptCode=="G100"){$.varIsAdmin=true;$.panInfo.setVisible(true);$.panUserInfo.setVisible(false)}else{$.varIsAdmin=false;$.panInfo.setVisible(false);$.panUserInfo.setVisible(true);$.panBudgetLimitClear.setVisible(false);$.panBudgetLimitClear.setProperty(500,395,700,270);$.panList.setProperty(0,0,490,665);$.grdList.setSize(489,539)}relocateChildIndexInPanel([$.panInfo,$.panQuery]);var productDs=bizComponentData2($,"Q1","L_CRM0059");$.grdBudgetLimitClear.setColumnDropDownList("product_code",productDs.resultList[0],{key:"product_code",name:"product_name"});$.dsL_CRM0049=bizComponentData2($,"Q1","L_CRM0049");setComboBind([$.cmbBudgetAcctype],$.dsL_CRM0049);$.dsL_CRM0256=bizComponentData2($,"Q1","L_CRM0256");setComboBind([$.cmbBudgetReportType],$.dsL_CRM0256);$.dsL_CRM0249=bizComponentData2($,"Q1","L_CRM0249");setComboBind([$.cmbBudgetTransferType],$.dsL_CRM0249);$.dsL_CRM275=bizComponentData2($,"Q1","L_CRM275");setComboBind([$.cmbUcoaCode],$.dsL_CRM275);searchBudgetList();searchBudgetAssignAllowList("ALL")};$.callback=function(type,ds){if(type=="Q1"){setDataGrid([$.grdList],ds);if($.grdList.getRowCount()>0){if($.varBudgetCode==""){}else{$.grdList.selectRow($.grdList.getGridRowIndex("budget_code",$.varBudgetCode))}}else{$.panInfo.clear()}}else{if(type=="save"){MessageBoxShow("정상적으로 저장되었습니다.");searchBudgetList()}else{if(type=="D"){$.varBudgetCode="";searchBudgetList()}else{if(type=="SAVE_ALLOW"){if(ds){MessageBoxShow("정상적으로 저장되었습니다.");if(!$.isAllSearch){searchBudgetAssignAllowList()}else{searchBudgetAssignAllowList("ALL")}}}else{if(type=="Q_ALLOW"){setDataGrid([$.grdBudgetLimitClear],ds)}}}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){searchBudgetList()}else{if(id=="btnAccountSearch"){$.isAllSearch=true;$.grdList.clearSelect();$.panBudgetLimitClear.enableButton(["btnSave","btnDelete"]);$.panBudgetLimitClear.disableButton(["btnAdd"]);searchBudgetAssignAllowList("ALL")}}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){if(id=="bteParentBudgetName"){var param={};g_main.openPopup("crmBudgetItemManagePop.html","popBteParentBudgetName","예산항목",535,655,"","",param,"","")}};$.fingerbuttonedit_change=function(id,value){if(id=="bteParentBudgetName"){if($.bteParentBudgetName.getValue()==""){$.txtParentBudgetCode.setValue("")}}};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){if(id=="grdBudgetLimitClear"){$.popUpCallId=cInd;$.varRowId=rId;var rowData=$.grdBudgetLimitClear.getValue(rId);if(cInd=="dept_name"||cInd=="target_dept_name"){var strDeptCodeList="";if(cInd=="dept_name"){strDeptCodeList=rowData.dept_code||""}else{strDeptCodeList=rowData.target_dept_code||""}var param={deptCodeList:strDeptCodeList,isMultiSelect:true};g_main.openPopup("popDept.html","popDept","",0,0,"","",param,"","")}else{if(cInd=="target_budget_name"){var param={budgetCodeList:rowData.target_budget_code,productCodeList:rowData.target_product_code};g_main.openPopup("popBudgetMultiList.html","popBudgetMultiList","",0,0,"","",param,"","")}}}};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdList"){$.panBudgetLimitClear.enableButton(["btnAdd"]);$.isAllSearch=false;$.grdListRid=rId;$.strType="U";setPanInfo(rId);$.txtBudgetCode1.setReadOnly(true);var rowData=$.grdList.getValue(rId);if(!rowData.ParentKeyID){$.panBudgetLimitClear.disableButton("all");$.grdBudgetLimitClear.clear()}else{$.panBudgetLimitClear.enableButton("all");searchBudgetAssignAllowList()}}else{if(id=="grdBudgetLimitClear"){var grdRow=$.grdBudgetLimitClear.getValue(rId);var rId=$.grdList.getSelectedRowIdx();var rowData=$.grdList.getValue(rId);if(rowData&&rowData.prod_budget_yn=="Y"){grdRow.product_code_readonly=false}else{grdRow.product_code_readonly=true}}}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){if(id=="grdBudgetLimitClear"){if(cInd=="allow_amt"){var inputData=nValue.toString();if(inputData.trim()==""||isNaN(inputData)){$.grdBudgetLimitClear.setValue(rId,cInd,oValue==""?"":oValue)}}}};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){if(id=="txtBudgetCode"&&value=="13"){searchBudgetList()}else{if(id=="txtBudgetName"&&value=="13"){searchBudgetList()}}};$.fingeredit_lostfocus=function(id,value){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panInfo"){if(btnId=="btnNew"){$.strType="N";$.panInfo.clear();$.chkUseYn.setValue("Y");$.txtBudgetCode1.setReadOnly(false);$.txtBudgetCode1.setAllowBlank(false,"예산항목코드");$.txtBudgetCode1.setFocus()}else{if(btnId=="btnSave"){$.varBudgetCode=$.txtBudgetCode1.getValue();saveBudgetInfo()}else{if(btnId=="btnDelete"){var rId=$.grdList.getSelectedRowIdx();if(rId===""||rId=="-1"){return}if($.txtBudgetCode1.getValue()==""){return}confirmBoxShow("정말로 삭제하시겠습니까?",function(){if(g_main.msgShare==true){delBudgetInfo()}})}}}}else{if(panelId=="panBudgetLimitClear"){$.grdBudgetLimitClear.editStop();if(btnId=="btnAdd"){var rId=$.grdList.getSelectedRowIdx();if(!rId){MessageBoxShow("예산항목을 선택해 주세요.");return false}var rowData=$.grdList.getValue(rId);$.grdBudgetLimitClear.addRow({budget_code:rowData.budget_code,budget_name:rowData.budget_name})}else{if(btnId=="btnSave"){if(!chk()){return}confirmBoxShow("저장하시겠습니까?",function(){if(g_main.msgShare==true){saveBudgetAssignAllow()}})}else{if(btnId=="btnDelete"){var rId=$.grdBudgetLimitClear.getSelectedRowIdx();if(!rId){MessageBoxShow("삭제할 데이터를 선택하세요.");return}if($.grdBudgetLimitClear.getRowStatus(rId)!="N"){confirmBoxShow("삭제하시겠습니까?",function(){if(g_main.msgShare==true){$.grdBudgetLimitClear.getItem(rId).rowType="D";$.deleteRows.push($.grdBudgetLimitClear.getValue(rId));$.grdBudgetLimitClear.deleteCurrentRow()}})}else{$.grdBudgetLimitClear.deleteCurrentRow()}}}}}}};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(popResult){if(id=="popBteParentBudgetName"){if(popResult.isSelected=="Y"){$.bteParentBudgetName.setText(popResult.budget_name);$.txtParentBudgetCode.setValue(popResult.budget_code)}}else{if(id=="popDept"){var deptCodeList=popResult.dept_code;var deptNameList=popResult.dept_name;var strDeptCode="";var strDeptName="";for(var i=0;i<deptCodeList.length;i++){strDeptCode+=deptCodeList[i];strDeptName+=deptNameList[i];if(i!=deptCodeList.length-1){strDeptCode+=",";strDeptName+=","}}if($.popUpCallId=="dept_name"){$.grdBudgetLimitClear.setValue($.varRowId,"dept_code",strDeptCode);$.grdBudgetLimitClear.setValue($.varRowId,"dept_name",strDeptName)}else{$.grdBudgetLimitClear.setValue($.varRowId,"target_dept_code",strDeptCode);$.grdBudgetLimitClear.setValue($.varRowId,"target_dept_name",strDeptName)}}else{if(id=="popBudgetMultiList"){if($.popUpCallId=="target_budget_name"){var targetBudgetCode="";var targetBudgetName="";var targetProductCode="";for(var i=0;i<popResult.length;i++){targetBudgetCode+=popResult[i].budget_code;targetBudgetName+=popResult[i].budget_name+(popResult[i].product_code?"("+popResult[i].product_name+")":"");targetProductCode+=popResult[i].product_code;if(i!=popResult.length-1){targetBudgetCode+=",";targetBudgetName+=",";targetProductCode+=","}}$.grdBudgetLimitClear.setValue($.varRowId,"target_budget_code",targetBudgetCode);$.grdBudgetLimitClear.setValue($.varRowId,"target_budget_name",targetBudgetName);$.grdBudgetLimitClear.setValue($.varRowId,"target_product_code",targetProductCode)}}}}}};$.fingerpopup2_close=function(id){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerradiobox_change=function(id,value){};$.fingerimage_click=function(id){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>