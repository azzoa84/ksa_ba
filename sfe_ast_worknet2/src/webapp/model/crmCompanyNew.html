<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panQuery=null;$.panCompany=null;$.panContact=null;$.panList=null;$.cmbNewType=null;$.btnRequest=null;$.lblCompanyName=null;$.bteCompanyName=null;$.lblAddress=null;$.bteZipCode=null;$.txtAddress=null;$.lblCompanyPhone=null;$.txtCompanyPhone=null;$.lblContactName=null;$.bteContactName=null;$.lblSpeciality=null;$.cmbSpeciality=null;$.panSub=null;$.lblDetail=null;$.txtDetail=null;$.grdList=null;$.lblEx1=null;$.txtCompany=null;$.lblEx2=null;$.companychange="";$.contactchange="";$.txtcompany_id="";$.txtcompany_id2="";$.txtcompany_nameChange="";$.txtaddress2="";$.txtcontact_id="";$.txtcontact_id2="";$.txtcontact_nameChange="";$.txtbefore_company_name="";function createJSON_Q(workType){var json=createExecuteParamInfo("P_crmCompanyNew_Q",[workType,"#UserID#"]);return json}function createJSON_S(workType){var json=createExecuteParamInfo("P_crmCompanyNew_S",[$.cmbNewType.getValue(),$.txtcompany_id2,$.cmbNewType.getValue()=="10"?$.txtCompany.getValue():$.bteCompanyName.getText(),$.txtAddress.getValue(),$.txtaddress2,$.txtCompanyPhone.getValue(),$.txtcontact_id2,$.bteContactName.getText(),$.cmbSpeciality.getValue(),"#UserID#","#UserName#",$.txtDetail.getValue()]);return json}function searchList(workType){var json=createJSON_Q(workType);callQuery(["req",json],workType,$)}function saveContent(workType){if($.companychange=="N"){if($.cmbNewType.getValue()=="10"){if(!validateControls([$.cmbNewType,$.txtCompany,$.bteZipCode,$.txtAddress])){return}}else{if(!validateControls([$.cmbNewType,$.bteCompanyName,$.bteZipCode,$.txtAddress])){return}}}if($.contactchange=="N"){if(!validateControls([$.cmbNewType,$.bteContactName,$.cmbSpeciality])){return}}var json=createJSON_S(workType);callExecute(["req",json],workType,$)}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,770);$.panMain.setText("");$.panMain.setBottomLine(true);$.panQuery=new FingerPanel(host,"panQuery",0,0,1200,55);$.panQuery.setText("");$.panQuery.setBottomLine(true);$.panCompany=new FingerPanel(host,"panCompany",0,65,595,165);$.panCompany.setText("거래처 요청");$.panCompany.setBottomLine(true);$.panContact=new FingerPanel(host,"panContact",605,65,595,165);$.panContact.setText("고객 요청");$.panContact.setBottomLine(true);$.panList=new FingerPanel(host,"panList",0,305,1200,455);$.panList.setText("요청내역");$.panList.setBottomLine(true);$.cmbNewType=new FingerComboBox(host,"cmbNewType",30,15,200,20);$.btnRequest=new FingerButton(host,"btnRequest",240,15,80,20);$.btnRequest.setText("요청");$.lblCompanyName=new FingerLabel(host,"lblCompanyName",0,15,100,20);$.lblCompanyName.setText("거래처명");$.bteCompanyName=new FingerButtonEdit(host,"bteCompanyName",105,15,480,20);$.bteCompanyName.setText("");$.lblAddress=new FingerLabel(host,"lblAddress",0,45,100,20);$.lblAddress.setText("주소");$.bteZipCode=new FingerButtonEdit(host,"bteZipCode",105,45,140,20);$.bteZipCode.setText("");$.txtAddress=new FingerEdit(host,"txtAddress",250,45,335,20);$.lblCompanyPhone=new FingerLabel(host,"lblCompanyPhone",0,75,100,20);$.lblCompanyPhone.setText("전화번호");$.txtCompanyPhone=new FingerEdit(host,"txtCompanyPhone",105,75,140,20);$.lblContactName=new FingerLabel(host,"lblContactName",0,15,100,20);$.lblContactName.setText("고객명");$.bteContactName=new FingerButtonEdit(host,"bteContactName",105,15,140,20);$.bteContactName.setText("");$.lblSpeciality=new FingerLabel(host,"lblSpeciality",0,45,100,20);$.lblSpeciality.setText("진료과목");$.cmbSpeciality=new FingerComboBox(host,"cmbSpeciality",105,45,140,20);$.panSub=new FingerPanel(host,"panSub",0,240,1200,55);$.panSub.setText("");$.panSub.setBottomLine(true);$.lblDetail=new FingerLabel(host,"lblDetail",0,15,100,20);$.lblDetail.setText("상세");$.txtDetail=new FingerEdit(host,"txtDetail",105,15,1085,20);$.grdList=new FingerDataGrid(host,"grdList",0,0,1200,410);$.lblEx1=new FingerLabel(host,"lblEx1",305,5,375,20);$.lblEx1.setText("거래처 사업자 등록번호 변경은 여신/IT팀으로 문의 바랍니다.");$.txtCompany=new FingerEdit(host,"txtCompany",105,15,480,20);$.lblEx2=new FingerLabel(host,"lblEx2",335,25,640,20);$.lblEx2.setText('결과상세가 "이미 등록..."임에도 불구하고 검색 불가 시, 거래처+고객명+진료과 기입 후 IT팀에 메일 보내길 바랍니다.');$.panQuery.setBorder(true);$.panSub.setBorder(true);$.grdList.colIdx=$.grdList.setColumns([new FingerDataGridColumn("type",60,"left","string","구분"),new FingerDataGridColumn("request_date",80,"left","string","일시"),new FingerDataGridColumn("company_name",200,"left","string","거래처"),new FingerDataGridColumn("contact_name",70,"left","string","고객"),new FingerDataGridColumn("validation_status",70,"left","string","결과"),new FingerDataGridColumn("response_detail",630,"left","string","결과상세"),new FingerDataGridColumn("response_comment",80,"left","string","사유")]);$.grdList.init({panel:$.panList});$.grdList.setEditable(false);$.txtDetail.setReadOnly(true);$.bteCompanyName.setReadOnly(true);$.cmbSpeciality.setEmptyRow(true);$.cmbNewType.setAllowBlank(false,"구분");$.bteCompanyName.setAllowBlank(false,"거래처명");$.txtCompany.setAllowBlank(false,"거래처명");$.bteZipCode.setAllowBlank(false,"우편번호");$.txtAddress.setAllowBlank(false,"주소");$.bteContactName.setAllowBlank(false,"고객명");$.cmbSpeciality.setAllowBlank(false,"진료과목");$.bteCompanyName.setVisible(false);$.txtCompany.setVisible(true);$.host=host;$.args=args};$.start=function(){$.panMain.add($.panQuery);$.panMain.add($.panCompany);$.panMain.add($.panContact);$.panMain.add($.panList);$.panMain.add($.panSub);$.panQuery.add($.cmbNewType);$.panQuery.add($.btnRequest);$.panQuery.add($.lblEx1);$.panQuery.add($.lblEx2);$.panCompany.add($.lblCompanyName);$.panCompany.add($.bteCompanyName);$.panCompany.add($.lblAddress);$.panCompany.add($.bteZipCode);$.panCompany.add($.txtAddress);$.panCompany.add($.lblCompanyPhone);$.panCompany.add($.txtCompanyPhone);$.panCompany.add($.txtCompany);$.panContact.add($.lblContactName);$.panContact.add($.bteContactName);$.panContact.add($.lblSpeciality);$.panContact.add($.cmbSpeciality);$.panList.add($.grdList);$.panSub.add($.lblDetail);$.panSub.add($.txtDetail);searchList("Q");var ds=bizComponentData2($,"Q2","S_019|S_022");setComboBind([$.cmbNewType,$.cmbSpeciality],ds);$.cmbNewType.setValue("10")};$.callback=function(type,ds){if(type=="Q"){setDataGrid([$.grdList],ds);$.panCompany.clear();$.panContact.clear();$.panSub.clear()}else{if(type=="10"){if(ds){if(ds.errorCode.substring(0,1)=="P"||ds.errorCode.substring(0,1)=="E"){MessageBoxShow(ds.errorCode+"</br>"+ds.errorMsg)}else{searchList("Q")}}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnRequest"){saveContent("10")}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){$.popUpCallId=id;if(id=="bteCompanyName"){if($.cmbNewType.getValue()=="10"){return}param={company_name:$.bteCompanyName.getText()};g_main.openPopup("popCompanyNew.html","popCompanyNew","",0,0,"","",param,"","")}else{if(id=="bteZipCode"){param={zip_code:$.bteZipCode.getText()};g_main.openPopup("popBaseZipCode.html","popBaseZipCode","",0,0,"","",param,"","")}else{if(id=="bteContactName"){param={contact_name:$.bteContactName.getText()};g_main.openPopup("popContactNew.html","popContactNew","",0,0,"","",param,"","")}}}};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){if(id=="cmbNewType"){$.panCompany.clear();$.panContact.clear();$.companychange="N";$.contactchange="N";if($.cmbNewType.getValue()=="10"){$.bteCompanyName.setVisible(false);$.txtCompany.setVisible(true);$.txtDetail.setReadOnly(true)}else{if($.cmbNewType.getValue()=="30"){$.bteCompanyName.setVisible(true);$.txtCompany.setVisible(false);$.txtDetail.setReadOnly(false)}else{$.bteCompanyName.setVisible(true);$.txtCompany.setVisible(false);$.txtDetail.setReadOnly(true)}}}};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerimage_click=function(id){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(popResult){if($.popUpCallId=="bteCompanyName"){if(popResult.company_id!=""){$.txtcompany_id=popResult.company_id;$.txtcompany_id2=popResult.wkp_id_cegedim;$.txtcompany_nameChange=popResult.company_name;$.txtaddress2=popResult.address2;$.bteCompanyName.setText(popResult.company_name);$.bteZipCode.setText(popResult.zip_code);$.bteCompanyName.setValue(popResult.company_name);$.bteZipCode.setValue(popResult.zip_code);$.txtAddress.setValue(popResult.address1);$.txtCompanyPhone.setValue(popResult.company_phone);$.companychange="N"}else{$.txtcompany_id="";$.txtcompany_id2="";$.txtcompany_nameChange="";$.txtaddress2="";$.bteCompanyName.setText("");$.bteZipCode.setText("");$.bteCompanyName.setValue("");$.bteZipCode.setValue("");$.txtAddress.setValue("");$.txtCompanyPhone.setValue("");$.companychange=""}}else{if($.popUpCallId=="bteZipCode"){if(popResult.zip_code!=""){$.bteZipCode.setText(popResult.zip_code);$.bteZipCode.setValue(popResult.zip_code);$.txtAddress.setValue(popResult.Addr)}else{$.bteZipCode.setText("");$.bteZipCode.setValue("");$.txtAddress.setValue("")}}else{if($.popUpCallId=="bteContactName"){log(popResult);if(popResult.contact_id!=""){$.txtcontact_id=popResult.contact_id;$.txtcontact_id2=popResult.ind_id_cegedim;$.txtcontact_nameChange=popResult.contact_name;$.txtbefore_company_name=popResult.company_name;$.bteContactName.setText(popResult.contact_name);$.bteContactName.setValue(popResult.contact_name);$.cmbSpeciality.setValue(popResult.speciality,"code_name");if($.cmbNewType.getValue()=="30"){$.txtcompany_id2=popResult.wkp_id_cegedim;$.bteCompanyName.setText(popResult.company_name);$.bteZipCode.setText(popResult.zip_code);$.bteCompanyName.setValue(popResult.company_name);$.bteZipCode.setValue(popResult.zip_code);$.txtAddress.setValue(popResult.address1);$.txtCompanyPhone.setValue(popResult.office_phone)}$.contactchange="N"}else{$.txtcontact_id="";$.txtcontact_id2="";$.txtcontact_nameChange="";$.txtbefore_company_name="";$.bteContactName.setText("");$.bteContactName.setValue("");$.cmbSpeciality.setValue("")}}}}}};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>