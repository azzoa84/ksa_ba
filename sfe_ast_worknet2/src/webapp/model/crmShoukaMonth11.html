<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panQuery=null;$.panList=null;$.lbl_yyyy=null;$.dte_start=null;$.lbl_wave=null;$.dte_end=null;$.btnSearch=null;$.chk_etc_yn=null;$.dte_start2=null;$.lbl_wave2=null;$.dte_end2=null;$.grdList=null;$.lblex=null;function fnQRY_P_crmShoukaMonth11_Q(workType){var json=createJSON_Q("Q");callQuery(["req",json],"Q",$)}function createJSON_Q(workType){var json=createExecuteParamInfo("P_crmShoukaMonth11_Q",[workType,$.dte_start.getValue(),$.dte_end.getValue()]);return json}function fnQRY_P_crmShoukaMonth11_S(workType){var json=createJSON_S("S");callQuery(["req",json],"S",$)}function createJSON_S(workType){var changedRows=$.grdList.getChangedRows();var rows=[];for(var i in changedRows){rows.push([workType,changedRows[i].ids,changedRows[i].pharm_name||"",changedRows[i].business_no||"",changedRows[i].equal||"",changedRows[i].sale_result||"",changedRows[i].sale_content||""])}var json=createExecuteParamInfo("P_crmShoukaMonth11_S",rows);return json}function fnQRY_P_crmShoukaMonth100_Q(workType){var json=createJSON_Q1("Q");callQuery(["req",json],"Q1",$)}function createJSON_Q1(workType){var json=createExecuteParamInfo("P_crmShoukaMonth100_Q",[workType,$.chk_etc_yn.getValue()]);return json}function fnQRY_P_crmShoukaMonth100_S(workType){var json=createJSON_S1("S");callQuery(["req",json],"S1",$)}function createJSON_S1(workType){var json=createExecuteParamInfo("P_crmShoukaMonth100_S",[workType,$.chk_etc_yn.getValue()]);return json}function fnQRY_P_etc_start_end_Q(workType){var json=createJSON_Q2("Q");callQuery(["req",json],"Q2",$)}function createJSON_Q2(workType){var json=createExecuteParamInfo("P_etc_start_end_Q",[workType]);return json}function fnQRY_P_etc_start_end_S(workType){var json=createJSON_S2("S");callQuery(["req",json],"S2",$)}function createJSON_S2(workType){var json=createExecuteParamInfo("P_etc_start_end_S",[workType,$.dte_start2.getValue(),$.dte_end2.getValue()]);return json}function fnQRY_P_crmShoukaMonth10_S2(workType){var json=createJSON_S3("D");callQuery(["req",json],"D",$)}function createJSON_S3(workType){var rows=[];var strnoncheck="N";for(var i=0;i<$.grdList.getRowCount();i++){if($.grdList.getValue(i,"CheckYN")=="Y"){rows.push([workType,$.grdList.getValue(i,"ids")]);strnoncheck="Y"}}if(strnoncheck=="N"){MessageBoxShow("삭제할 기타실적을 선택하세요.");return false}var json=createExecuteParamInfo("P_crmShoukaMonth10_S2",rows);return json}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,745);$.panMain.setText("");$.panMain.setBottomLine(true);$.panQuery=new FingerPanel(host,"panQuery",0,0,1200,85);$.panQuery.setText("");$.panQuery.setBottomLine(true);$.panList=new FingerPanel(host,"panList",0,90,1200,655);$.panList.setText("기타실적처리");$.panList.setBottomLine(true);$.lbl_yyyy=new FingerLabel(host,"lbl_yyyy",0,15,100,20);$.lbl_yyyy.setText("조회년월");$.dte_start=new FingerDateEdit(host,"dte_start",105,15,140,20);$.lbl_wave=new FingerLabel(host,"lbl_wave",245,15,20,20);$.lbl_wave.setText("~");$.dte_end=new FingerDateEdit(host,"dte_end",270,15,140,20);$.btnSearch=new FingerButton(host,"btnSearch",415,15,80,20);$.btnSearch.setText("조회");$.chk_etc_yn=new FingerCheckBox(host,"chk_etc_yn",1035,15,140,20);$.chk_etc_yn.setText("기타실적 요청 On/Off");$.dte_start2=new FingerDateEdit(host,"dte_start2",875,45,140,20);$.lbl_wave2=new FingerLabel(host,"lbl_wave2",1015,45,20,20);$.lbl_wave2.setText("~");$.dte_end2=new FingerDateEdit(host,"dte_end2",1040,45,140,20);$.grdList=new FingerDataGrid(host,"grdList",0,0,1200,610);$.lblex=new FingerLabel(host,"lblex",770,45,100,20);$.lblex.setText("요청가능기간");$.panQuery.setBorder(true);$.panList.setBorder(false);$.dte_start.setDateFormat("yyyymm");$.dte_end.setDateFormat("yyyymm");$.dte_start.setValue(getToday(""));$.dte_end.setValue(getToday(""));$.panList.addButtons(["btnDelete","btnSave"]);$.dte_start.setAllowBlank(false,"시작일");$.dte_end.setAllowBlank(false,"종료일");$.dte_start2.setAllowBlank(false,"시작일");$.dte_end2.setAllowBlank(false,"종료일");colMap=$.grdList.setColumns([new FingerDataGridColumn("CheckYN",60,"center","checkbox",{text:"선택",css:"col_edit"}),new FingerDataGridColumn("ids",60,"center","checkbox","id",{hidden:true}),new FingerDataGridColumn("create_time",100,"left","date","요청일자",{format:"s_ymd",readonly:true}),new FingerDataGridColumn("emp_name",100,"left","string","담당자",{readonly:true}),new FingerDataGridColumn("fore_company_name",140,"left","string","예상거래처",{readonly:true}),new FingerDataGridColumn("sale_seq",80,"right","int","순번",{format:"int",readonly:true}),new FingerDataGridColumn("wholesaler_name",140,"left","string","도매상명",{readonly:true}),new FingerDataGridColumn("pharm_name",120,"left","string","실납처",{readonly:true}),new FingerDataGridColumn("business_no",120,"left","string","사업자번호",{readonly:true}),new FingerDataGridColumn("equal",80,"left","string",{text:"일치",css:"col_edit"}),new FingerDataGridColumn("addr",140,"left","string","주소",{readonly:true}),new FingerDataGridColumn("product_name",110,"left","string","품목명",{readonly:true}),new FingerDataGridColumn("sale_qty",80,"right","string","수량",{format:"number",readonly:true}),new FingerDataGridColumn("sale_date",100,"left","string","판매일자",{readonly:true}),new FingerDataGridColumn("sale_result",120,"left","string",{text:"결과",css:"col_edit"}),new FingerDataGridColumn("sale_content",150,"left","string",{text:"내용",css:"col_edit"})]);$.grdList.init({panel:$.panList,scroll:"xy"});$.grdList.setEditable(true);$.host=host;$.args=args};$.start=function(){$.panMain.add($.panQuery);$.panMain.add($.panList);$.panQuery.add($.lbl_yyyy);$.panQuery.add($.dte_start);$.panQuery.add($.lbl_wave);$.panQuery.add($.dte_end);$.panQuery.add($.btnSearch);$.panQuery.add($.chk_etc_yn);$.panQuery.add($.dte_start2);$.panQuery.add($.lbl_wave2);$.panQuery.add($.dte_end2);$.panQuery.add($.lblex);$.panList.add($.grdList);fnQRY_P_crmShoukaMonth100_Q("Q1");fnQRY_P_etc_start_end_Q("Q2")};$.callback=function(type,ds){if(type=="Q"){convertJavaDateToJs(ds.resultList);setDataGrid([$.grdList],ds);$.grdList.selectRow(0);log(JSON.stringify(ds))}else{if(type=="Q1"){var rst=ds.resultList;$.chk_etc_yn.setValue(rst[0][0].etc_yn)}else{if(type=="Q2"){var rst2=ds.resultList;$.dte_start2.setValue(getFormatDate(rst2[0][0].etc_start_date,"yyyyMMdd"));$.dte_end2.setValue(getFormatDate(rst2[0][0].etc_end_date,"yyyyMMdd"))}else{if(type=="D"){fnQRY_P_crmShoukaMonth11_Q("Q")}else{if(type=="S1"){fnQRY_P_crmShoukaMonth100_Q("Q1")}else{if(type=="S"){fnQRY_P_crmShoukaMonth11_Q("Q")}}}}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){fnQRY_P_crmShoukaMonth11_Q("Q")}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){if(id=="chk_etc_yn"){fnQRY_P_crmShoukaMonth100_S("S1")}};$.fingercombobox_change=function(id,value){};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){if(id=="dte_start2"||id=="dte_end2"){var dtes=$.dte_start2.getValue();var dtee=$.dte_end2.getValue();if((dtes!=null)&&(dtee!=null)){fnQRY_P_etc_start_end_S("S2")}}};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerimage_click=function(id){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(btnId=="btnSave"){var changedRows=$.grdList.getChangedRows();if(changedRows==0){MessageBoxShow("저장할 내용이 없습니다.")}else{fnQRY_P_crmShoukaMonth11_S("S")}}else{if(btnId=="btnDelete"){fnQRY_P_crmShoukaMonth10_S2("D")}}};$.fingerpopup_close=function(id){};$.fingerpopup2_close=function(id){};$.fingerradiobox_change=function(id,value){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>