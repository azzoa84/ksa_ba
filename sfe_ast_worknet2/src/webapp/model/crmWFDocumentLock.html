<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panQuery=null;$.panList=null;$.panDetail=null;$.lblBusinessIdQ=null;$.lblEmpNameQ=null;$.lblWfDocIdQ=null;$.lblDocIdQ=null;$.lblDocTitleQ=null;$.cmbBusinessIdQ=null;$.txtEmpNameQ=null;$.txtWfDocIdQ=null;$.txtDocIdQ=null;$.txtDocTitleQ=null;$.btnSearch=null;$.grdList=null;$.lblWfDocIdD=null;$.lblDocIdD=null;$.lblEmployeeIdD=null;$.lblDocTitleD=null;$.lblPreEmployeeIdD=null;$.lblAllEmployeeIdD=null;$.txtWfDocIdD=null;$.txtDocIdD=null;$.txtEmployeeIdD=null;$.txtEmpNameD=null;$.txtDocTitleD=null;$.txtPreEmployeeIdD=null;$.btePreEmpNameD=null;$.txtAllEmployeeIdD=null;$.bteAllEmpNameD=null;function createJson_Q(workType){var json=createExecuteParamInfo("P_crmWFDocumentLock_Q",[workType,$.txtWfDocIdQ.getValue(),$.txtDocIdQ.getValue(),$.cmbBusinessIdQ.getValue(),$.txtDocTitleQ.getValue(),$.txtEmpNameQ.getValue()]);return json}function createJSON_S(workType){var json=createExecuteParamInfo("P_crmWFDocumentLock_S",[workType,$.txtWfDocIdD.getValue()||"",$.txtPreEmployeeIdD.getValue()||"",$.txtAllEmployeeIdD.getValue()||""]);return json}function searchList(){var json=createJson_Q("Q");callQuery(["req",json],"Q",$)}function saveDetail(){var json=createJSON_S("N");if(json){var ds=callExecuteSync(["req",json],"S",false);if(ds.errorCode=="MSG0004"){$.panQuery.clear();searchList()}}}function initControls(){$.txtWfDocIdD.setValue("");$.txtDocIdD.setValue("");$.txtEmployeeIdD.setValue("");$.txtEmpNameD.setValue("");$.txtDocTitleD.setValue("");$.txtPreEmployeeIdD.setValue("");$.btePreEmpNameD.setText("");$.txtAllEmployeeIdD.setValue("");$.bteAllEmpNameD.setText("")}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,1200,800);$.panMain.setText("");$.panMain.setBottomLine(true);$.panQuery=new FingerPanel(host,"panQuery",0,0,1200,110);$.panQuery.setText("");$.panQuery.setBottomLine(true);$.panList=new FingerPanel(host,"panList",0,120,1200,460);$.panList.setText("결재라인 권한 목록");$.panList.setBottomLine(true);$.panDetail=new FingerPanel(host,"panDetail",0,590,1200,180);$.panDetail.setText("결재라인 권한 상세");$.panDetail.setBottomLine(true);$.lblBusinessIdQ=new FingerLabel(host,"lblBusinessIdQ",5,10,100,20);$.lblBusinessIdQ.setText("업무아이디");$.lblEmpNameQ=new FingerLabel(host,"lblEmpNameQ",300,10,100,20);$.lblEmpNameQ.setText("기안자");$.lblWfDocIdQ=new FingerLabel(host,"lblWfDocIdQ",0,40,105,20);$.lblWfDocIdQ.setText("결재문서아이디");$.lblDocIdQ=new FingerLabel(host,"lblDocIdQ",300,40,100,20);$.lblDocIdQ.setText("문서번호");$.lblDocTitleQ=new FingerLabel(host,"lblDocTitleQ",5,70,100,20);$.lblDocTitleQ.setText("문서제목");$.cmbBusinessIdQ=new FingerComboBox(host,"cmbBusinessIdQ",110,10,200,20);$.txtEmpNameQ=new FingerEdit(host,"txtEmpNameQ",405,10,200,20);$.txtWfDocIdQ=new FingerEdit(host,"txtWfDocIdQ",110,40,200,20);$.txtDocIdQ=new FingerEdit(host,"txtDocIdQ",405,40,200,20);$.txtDocTitleQ=new FingerEdit(host,"txtDocTitleQ",110,70,495,20);$.btnSearch=new FingerButton(host,"btnSearch",1120,70,80,20);$.btnSearch.setText("조회");$.grdList=new FingerDataGrid(host,"grdList",0,0,1200,410);$.lblWfDocIdD=new FingerLabel(host,"lblWfDocIdD",0,25,110,20);$.lblWfDocIdD.setText("결재문서 아이디");$.lblDocIdD=new FingerLabel(host,"lblDocIdD",10,55,100,20);$.lblDocIdD.setText("문서번호");$.lblEmployeeIdD=new FingerLabel(host,"lblEmployeeIdD",420,25,100,20);$.lblEmployeeIdD.setText("사원아이디");$.lblDocTitleD=new FingerLabel(host,"lblDocTitleD",420,55,100,20);$.lblDocTitleD.setText("문서제목");$.lblPreEmployeeIdD=new FingerLabel(host,"lblPreEmployeeIdD",10,85,100,20);$.lblPreEmployeeIdD.setText("선결권한자");$.lblAllEmployeeIdD=new FingerLabel(host,"lblAllEmployeeIdD",420,85,100,20);$.lblAllEmployeeIdD.setText("전결권한자");$.txtWfDocIdD=new FingerEdit(host,"txtWfDocIdD",115,25,290,20);$.txtDocIdD=new FingerEdit(host,"txtDocIdD",115,55,290,20);$.txtEmployeeIdD=new FingerEdit(host,"txtEmployeeIdD",525,25,135,20);$.txtEmpNameD=new FingerEdit(host,"txtEmpNameD",665,25,150,20);$.txtDocTitleD=new FingerEdit(host,"txtDocTitleD",525,55,290,20);$.txtPreEmployeeIdD=new FingerEdit(host,"txtPreEmployeeIdD",115,85,135,20);$.btePreEmpNameD=new FingerButtonEdit(host,"btePreEmpNameD",255,85,150,20);$.btePreEmpNameD.setText("");$.txtAllEmployeeIdD=new FingerEdit(host,"txtAllEmployeeIdD",525,85,135,20);$.bteAllEmpNameD=new FingerButtonEdit(host,"bteAllEmpNameD",665,85,150,20);$.bteAllEmpNameD.setText("");$.panQuery.setBorder(true);$.panDetail.addButton("btnSave","수정");$.panDetail.setButtonAction("btnSave","save");$.panDetail.disableButton(["btnSave"]);$.grdList.setColumns([new FingerDataGridColumn("wf_doc_id",150,"left","string","결재문서아이디"),new FingerDataGridColumn("doc_id",120,"left","string","문서번호"),new FingerDataGridColumn("doc_title",250,"left","string","문서제목"),new FingerDataGridColumn("employee_id",120,"left","string","기안자"),new FingerDataGridColumn("emp_name",100,"left","string","기안자명"),new FingerDataGridColumn("pre_employee_id",120,"left","string","선결 권한자"),new FingerDataGridColumn("pre_employee_name",100,"left","string","선결 권한자명"),new FingerDataGridColumn("all_employee_id",120,"left","string","전결 권한자"),new FingerDataGridColumn("all_employee_name",100,"left","string","전결 권한자명")]);$.grdList.init({panel:$.panList});$.grdList.setBorder(false);$.txtWfDocIdD.setReadOnly(true);$.txtDocIdD.setReadOnly(true);$.txtEmployeeIdD.setReadOnly(true);$.txtEmpNameD.setReadOnly(true);$.txtDocTitleD.setReadOnly(true);$.txtPreEmployeeIdD.setReadOnly(true);$.txtAllEmployeeIdD.setReadOnly(true);$.cmbBusinessIdQ.setEmptyRow(true);$.host=host;$.args=args};$.start=function(){$.panMain.add($.panQuery);$.panMain.add($.panList);$.panMain.add($.panDetail);$.panQuery.add($.txtDocTitleQ);$.panQuery.add($.txtDocIdQ);$.panQuery.add($.txtWfDocIdQ);$.panQuery.add($.txtEmpNameQ);$.panQuery.add($.cmbBusinessIdQ);$.panQuery.add($.lblDocTitleQ);$.panQuery.add($.lblDocIdQ);$.panQuery.add($.lblWfDocIdQ);$.panQuery.add($.lblEmpNameQ);$.panQuery.add($.lblBusinessIdQ);$.panQuery.add($.btnSearch);$.panList.add($.grdList);$.panDetail.add($.txtEmpNameD);$.panDetail.add($.txtEmployeeIdD);$.panDetail.add($.txtDocIdD);$.panDetail.add($.txtWfDocIdD);$.panDetail.add($.lblAllEmployeeIdD);$.panDetail.add($.lblPreEmployeeIdD);$.panDetail.add($.lblDocTitleD);$.panDetail.add($.lblEmployeeIdD);$.panDetail.add($.lblDocIdD);$.panDetail.add($.lblWfDocIdD);$.panDetail.add($.txtDocTitleD);$.panDetail.add($.txtPreEmployeeIdD);$.panDetail.add($.btePreEmpNameD);$.panDetail.add($.txtAllEmployeeIdD);$.panDetail.add($.bteAllEmpNameD);$.cmbBusinessIdQ.setColumn("business_id","business_name");var ds=bizComponentData2($,"Q1","L_CRM0002");setComboBind([$.cmbBusinessIdQ],ds);relocateChildIndexInPanel([$.panQuery,$.panDetail])};$.callback=function(type,ds){if(type=="Q"){setDataGrid([$.grdList],ds);if(ds.resultList[0].length>0){$.grdList.selectRow(0)}else{initControls();$.panDetail.disableButton(["btnSave"])}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSearch"){if($.cmbBusinessIdQ.getValue()==""){MessageBoxShow("업무아이디 은(는) 필수입력 항목 입니다.");return}searchList()}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){if(id=="btePreEmpNameD"){$.popUpCallId="btePreEmpNameD";var param={employee_id:$.txtPreEmployeeIdD.getValue()||"",emp_name:$.btePreEmpNameD.getText()||""};g_main.openPopup("popEmp.html","popEmp","사원팝업",750,500,"","",param,"","")}else{if(id=="bteAllEmpNameD"){$.popUpCallId="bteAllEmpNameD";var param={employee_id:$.txtAllEmployeeIdD.getValue()||"",emp_name:$.bteAllEmpNameD.getText()||""};g_main.openPopup("popEmp.html","popEmp","사원팝업",750,500,"","",param,"","")}}};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){if(id=="btePreEmpNameD"){if(value==""){$.txtPreEmployeeIdD.setValue("")}}else{if(id=="bteAllEmpNameD"){if(value==""){$.txtAllEmployeeIdD.setValue("")}}}};$.fingercheckbox_change=function(id,value){};$.fingercombobox_change=function(id,value){};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){if(id=="grdList"){if($.grdList.getRowCount()==0){return}if(rId!=-1){$.txtWfDocIdD.setValue($.grdList.getValue(rId,"wf_doc_id"));$.txtDocIdD.setValue($.grdList.getValue(rId,"doc_id"));$.txtEmployeeIdD.setValue($.grdList.getValue(rId,"employee_id"));$.txtEmpNameD.setValue($.grdList.getValue(rId,"emp_name"));$.txtDocTitleD.setValue($.grdList.getValue(rId,"doc_title"));$.txtPreEmployeeIdD.setValue($.grdList.getValue(rId,"pre_employee_id"));$.btePreEmpNameD.setText($.grdList.getValue(rId,"pre_employee_name"));$.txtAllEmployeeIdD.setValue($.grdList.getValue(rId,"all_employee_id"));$.bteAllEmpNameD.setText($.grdList.getValue(rId,"all_employee_name"));$.panDetail.enableButton(["btnSave"])}}};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){if((id=="txtEmpNameQ"||id=="txtWfDocIdQ"||id=="txtDocIdQ"||id=="txtDocTitleQ")&&value=="13"){if($.cmbBusinessIdQ.getValue()==""){MessageBoxShow("업무아이디 은(는) 필수입력 항목 입니다.");return}searchList()}};$.fingeredit_lostfocus=function(id,value){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){if(panelId=="panDetail"){if(btnId=="btnSave"){if($.txtWfDocIdD.getValue()!=""){saveDetail()}else{MessageBoxShow("선택한 결재라인 권한이 없습니다.");return}}}};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(popResult){if(id=="popEmp"){if($.popUpCallId=="btePreEmpNameD"){$.txtPreEmployeeIdD.setValue(popResult.employee_id);$.btePreEmpNameD.setText(popResult.emp_name)}else{if($.popUpCallId=="bteAllEmpNameD"){$.txtAllEmployeeIdD.setValue(popResult.employee_id);$.bteAllEmpNameD.setText(popResult.emp_name)}}}}};$.fingerpopup2_close=function(id){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerradiobox_change=function(id,value){}};</script>