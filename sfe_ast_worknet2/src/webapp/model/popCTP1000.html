<script>function Main(){var $=this;$.host=null;$.panMain=null;$.panInfo=null;$.panContract=null;$.lblProjectName=null;$.lblProjectNickname=null;$.lblProductCode=null;$.lblProjectType=null;$.lblTotProjectAmt=null;$.lblInstituteName=null;$.lblTotGoalPeopleCnt=null;$.lblTotActualPeopleCnt=null;$.memProjectName=null;$.txtProjectNickname=null;$.cmbProductCode=null;$.cmbProjectType=null;$.txtInstituteName=null;$.txtInvestigatorName=null;$.lblInvestigatorName2=null;$.lblStartDate=null;$.lblEndDate=null;$.lblContractAmt=null;$.lblPayCount=null;$.lblGoalPeopleCnt=null;$.lblremark=null;$.lblActualPeopleCnt=null;$.lblContractDate=null;$.lblIrbApprovalDate=null;$.lblIrbApprovalNo=null;$.txtInstituteName1=null;$.bteInvestigatorName1=null;$.dteStartDate=null;$.dteEndDate=null;$.chkProjectEndYn=null;$.chkMedicineSupportYn=null;$.dteContractDate=null;$.dteIrbApprovalDate=null;$.txtIrbApprovalNo=null;$.memRemark=null;$.btnEnd=null;$.btnSave=null;$.btnClose=null;$.lblMedicine_yn=null;$.chkExceptionEndYn=null;$.txtEndText=null;$.txtTotProjectAmt=null;$.txtTotGoalPeopleCnt=null;$.txtTotActualPeopleCnt=null;$.txtContractAmt=null;$.txtPayCount=null;$.txtGoalPeopleCnt=null;$.txtActualPeopleCnt=null;$.lblContactType=null;$.cmbContactType=null;$.clinical_id="";$.contract_id="";$.institute="";$.investigator="";$.contract_id="";$.exception_end_yn="";function createJSON_Q(workType){var json=createExecuteParamInfo("P_CTP1000_Q",[workType,$.clinical_id,$.contract_id]);return json}function createJSON_S(workType){var json=createExecuteParamInfo("P_CTP1000_S",[workType=="END"?workType:($.contract_id==""?"N":"U"),$.clinical_id,$.contract_id,$.institute,$.txtInstituteName1.getText(),$.investigator,$.bteInvestigatorName1.getText(),$.cmbContactType.getValue(),$.dteContractDate.getValue(),$.dteStartDate.getValue(),$.dteEndDate.getValue(),$.chkProjectEndYn.getValue(),$.txtContractAmt.getValue(),$.txtPayCount.getValue(),$.txtGoalPeopleCnt.getValue(),$.txtActualPeopleCnt.getValue(),$.dteIrbApprovalDate.getValue(),$.txtIrbApprovalNo.getText(),$.chkMedicineSupportYn.getValue(),$.exception_end_yn,$.txtEndText.getText(),$.memRemark.getText(),"#UserID#"]);return json}function search(){var json=createJSON_Q("Q");callQuery(["req",json],"Q",$)}function save(workType){if(workType==""){var json=createJSON_S("");callQuery(["req",json],"save",$)}else{if(workType=="END"){var json=createJSON_S("END");callQuery(["req",json],"END",$)}}}function dataSelect(){var share={result:"Y"};g_popupStack.setData(share);g_popupStack.close()}function changeCheckBox(value){if(value=="Y"){$.dteEndDate.setAllowBlank(true,"계약종료일");$.dteEndDate.setValue("")}else{$.dteEndDate.setAllowBlank(false,"계약종료일")}}$.init=function(host,args){$.panMain=new FingerPanel(host,"panMain",0,0,525,735);$.panMain.setText("");$.panMain.setBottomLine(true);$.panInfo=new FingerPanel(host,"panInfo",0,0,525,280);$.panInfo.setText("연구 상세 정보");$.panInfo.setBottomLine(true);$.panContract=new FingerPanel(host,"panContract",0,285,523,450);$.panContract.setText("연구 계약 정보");$.panContract.setBottomLine(true);$.lblProjectName=new FingerLabel(host,"lblProjectName",5,20,80,20);$.lblProjectName.setText("연구제목");$.lblProjectNickname=new FingerLabel(host,"lblProjectNickname",5,75,80,20);$.lblProjectNickname.setText("nickname");$.lblProductCode=new FingerLabel(host,"lblProductCode",5,105,80,20);$.lblProductCode.setText("품목");$.lblProjectType=new FingerLabel(host,"lblProjectType",5,135,80,20);$.lblProjectType.setText("연구구분");$.lblTotProjectAmt=new FingerLabel(host,"lblTotProjectAmt",5,165,80,20);$.lblTotProjectAmt.setText("총연구비");$.lblInstituteName=new FingerLabel(host,"lblInstituteName",5,195,80,20);$.lblInstituteName.setText("연구의뢰자");$.lblTotGoalPeopleCnt=new FingerLabel(host,"lblTotGoalPeopleCnt",245,135,110,20);$.lblTotGoalPeopleCnt.setText("총목표피험자수");$.lblTotActualPeopleCnt=new FingerLabel(host,"lblTotActualPeopleCnt",245,165,110,20);$.lblTotActualPeopleCnt.setText("총실제피험자수");$.memProjectName=new FingerMemoEdit(host,"memProjectName",85,20,405,45);$.txtProjectNickname=new FingerEdit(host,"txtProjectNickname",85,75,410,20);$.cmbProductCode=new FingerComboBox(host,"cmbProductCode",85,105,140,20);$.cmbProjectType=new FingerComboBox(host,"cmbProjectType",85,135,140,20);$.txtInstituteName=new FingerEdit(host,"txtInstituteName",85,195,285,20);$.txtInvestigatorName=new FingerEdit(host,"txtInvestigatorName",375,195,115,20);$.lblInvestigatorName2=new FingerLabel(host,"lblInvestigatorName2",15,10,80,20);$.lblInvestigatorName2.setText("연구자");$.lblStartDate=new FingerLabel(host,"lblStartDate",15,40,80,20);$.lblStartDate.setText("계약시작일");$.lblEndDate=new FingerLabel(host,"lblEndDate",15,70,80,20);$.lblEndDate.setText("계약종료일");$.lblContractAmt=new FingerLabel(host,"lblContractAmt",15,100,80,20);$.lblContractAmt.setText("연구비");$.lblPayCount=new FingerLabel(host,"lblPayCount",260,100,80,20);$.lblPayCount.setText("분납횟수");$.lblGoalPeopleCnt=new FingerLabel(host,"lblGoalPeopleCnt",0,155,95,20);$.lblGoalPeopleCnt.setText("목표피험자수");$.lblremark=new FingerLabel(host,"lblremark",285,150,50,20);$.lblremark.setText("비고");$.lblActualPeopleCnt=new FingerLabel(host,"lblActualPeopleCnt",0,185,95,20);$.lblActualPeopleCnt.setText("실제피험자수");$.lblContractDate=new FingerLabel(host,"lblContractDate",0,215,95,20);$.lblContractDate.setText("계약체결일");$.lblIrbApprovalDate=new FingerLabel(host,"lblIrbApprovalDate",0,245,95,20);$.lblIrbApprovalDate.setText("IRB승인일");$.lblIrbApprovalNo=new FingerLabel(host,"lblIrbApprovalNo",0,275,95,20);$.lblIrbApprovalNo.setText("IRB승인번호");$.txtInstituteName1=new FingerEdit(host,"txtInstituteName1",105,10,265,20);$.bteInvestigatorName1=new FingerButtonEdit(host,"bteInvestigatorName1",375,10,110,20);$.bteInvestigatorName1.setText("");$.dteStartDate=new FingerDateEdit(host,"dteStartDate",105,40,140,20);$.dteEndDate=new FingerDateEdit(host,"dteEndDate",105,70,140,20);$.chkProjectEndYn=new FingerCheckBox(host,"chkProjectEndYn",250,70,140,20);$.chkProjectEndYn.setText("연구 종료시");$.chkMedicineSupportYn=new FingerCheckBox(host,"chkMedicineSupportYn",105,130,140,20);$.chkMedicineSupportYn.setText("");$.dteContractDate=new FingerDateEdit(host,"dteContractDate",105,215,140,20);$.dteIrbApprovalDate=new FingerDateEdit(host,"dteIrbApprovalDate",105,245,140,20);$.txtIrbApprovalNo=new FingerEdit(host,"txtIrbApprovalNo",105,275,140,20);$.memRemark=new FingerMemoEdit(host,"memRemark",340,155,140,180);$.btnEnd=new FingerButton(host,"btnEnd",10,365,120,20);$.btnEnd.setText("계약임의종료");$.btnSave=new FingerButton(host,"btnSave",385,365,80,20);$.btnSave.setText("저장");$.btnClose=new FingerButton(host,"btnClose",450,365,80,20);$.btnClose.setText("닫기");$.lblMedicine_yn=new FingerLabel(host,"lblMedicine_yn",0,125,95,20);$.lblMedicine_yn.setText("임상약지급");$.chkExceptionEndYn=new FingerCheckBox(host,"chkExceptionEndYn",265,45,140,20);$.chkExceptionEndYn.setText("");$.txtEndText=new FingerEdit(host,"txtEndText",310,45,135,20);$.txtTotProjectAmt=new FingerSpinEdit(host,"txtTotProjectAmt",85,165,140,25);$.txtTotGoalPeopleCnt=new FingerSpinEdit(host,"txtTotGoalPeopleCnt",355,135,140,25);$.txtTotActualPeopleCnt=new FingerSpinEdit(host,"txtTotActualPeopleCnt",355,165,140,25);$.txtContractAmt=new FingerSpinEdit(host,"txtContractAmt",105,100,140,25);$.txtPayCount=new FingerSpinEdit(host,"txtPayCount",345,100,80,25);$.txtGoalPeopleCnt=new FingerSpinEdit(host,"txtGoalPeopleCnt",105,155,140,25);$.txtActualPeopleCnt=new FingerSpinEdit(host,"txtActualPeopleCnt",105,185,140,25);$.lblContactType=new FingerLabel(host,"lblContactType",240,40,100,20);$.lblContactType.setText("역할");$.cmbContactType=new FingerComboBox(host,"cmbContactType",345,40,140,20);$.txtInstituteName1.setReadOnly(true);$.txtInstituteName1.setAllowBlank(false,"의뢰기관");$.bteInvestigatorName1.setAllowBlank(false,"의뢰자");$.dteStartDate.setAllowBlank(false,"계약시작일");$.dteEndDate.setAllowBlank(false,"계약종료일");$.dteContractDate.setAllowBlank(false,"계약체결일");$.cmbContactType.setAllowBlank(false,"역할");$.memProjectName.setReadOnly(true);$.txtProjectNickname.setReadOnly(true);$.cmbProductCode.setEnable(false);$.cmbProjectType.setEnable(false);$.txtInstituteName.setReadOnly(true);$.txtInvestigatorName.setReadOnly(true);$.txtTotProjectAmt.setReadOnly(true);$.txtTotGoalPeopleCnt.setReadOnly(true);$.txtTotActualPeopleCnt.setReadOnly(true);$.chkExceptionEndYn.setVisible(false);$.txtEndText.setVisible(false);$.cmbProductCode.setEmptyRow(true);$.cmbProjectType.setEmptyRow(true);$.cmbContactType.setEmptyRow(true);$.host=host;$.args=args};$.start=function(){$.panMain.add($.panInfo);$.panMain.add($.panContract);$.panInfo.add($.txtInvestigatorName);$.panInfo.add($.txtInstituteName);$.panInfo.add($.cmbProjectType);$.panInfo.add($.cmbProductCode);$.panInfo.add($.txtProjectNickname);$.panInfo.add($.memProjectName);$.panInfo.add($.lblTotActualPeopleCnt);$.panInfo.add($.lblTotGoalPeopleCnt);$.panInfo.add($.lblInstituteName);$.panInfo.add($.lblTotProjectAmt);$.panInfo.add($.lblProjectType);$.panInfo.add($.lblProductCode);$.panInfo.add($.lblProjectNickname);$.panInfo.add($.lblProjectName);$.panInfo.add($.txtTotProjectAmt);$.panInfo.add($.txtTotGoalPeopleCnt);$.panInfo.add($.txtTotActualPeopleCnt);$.panContract.add($.lblInvestigatorName2);$.panContract.add($.lblStartDate);$.panContract.add($.lblEndDate);$.panContract.add($.lblContractAmt);$.panContract.add($.lblPayCount);$.panContract.add($.lblGoalPeopleCnt);$.panContract.add($.lblremark);$.panContract.add($.lblActualPeopleCnt);$.panContract.add($.lblContractDate);$.panContract.add($.lblIrbApprovalDate);$.panContract.add($.lblIrbApprovalNo);$.panContract.add($.txtInstituteName1);$.panContract.add($.bteInvestigatorName1);$.panContract.add($.dteStartDate);$.panContract.add($.dteEndDate);$.panContract.add($.chkProjectEndYn);$.panContract.add($.chkMedicineSupportYn);$.panContract.add($.dteContractDate);$.panContract.add($.dteIrbApprovalDate);$.panContract.add($.txtIrbApprovalNo);$.panContract.add($.memRemark);$.panContract.add($.btnEnd);$.panContract.add($.btnSave);$.panContract.add($.btnClose);$.panContract.add($.lblMedicine_yn);$.panContract.add($.chkExceptionEndYn);$.panContract.add($.txtEndText);$.panContract.add($.txtContractAmt);$.panContract.add($.txtPayCount);$.panContract.add($.txtGoalPeopleCnt);$.panContract.add($.txtActualPeopleCnt);$.panContract.add($.lblContactType);$.panContract.add($.cmbContactType);relocateChildIndexInPanel([$.panContract]);var ds=bizComponentData2($,"Q1","L_ST0067|L_CRM0286");$.cmbProductCode.setColumn("product_code","product_name");setComboBind([$.cmbProductCode,$.cmbContactType],ds);var ds2=bizComponentData2($,"Q1","L_ST0062");setComboBind([$.cmbProjectType],ds2);if($.p_argument&&$.p_argument!=""){$.clinical_id=$.p_argument.clinical_id;$.contract_id=$.p_argument.contract_id;if($.p_argument.end_visible=="N"){$.btnEnd.setVisible(false)}if($.p_argument.save_visible=="N"){$.btnEnd.setVisible(false);$.btnSave.setVisible(false);$.txtInstituteName1$.setEnable(false);$.bteInvestigatorName1.setEnable(false);$.dteStartDate.setEnable(false);$.dteEndDate.setEnable(false);$.chkProjectEndYn.setEnable(false);$.txtContractAmt.setEnable(false);$.txtPayCount.setEnable(false);$.chkMedicineSupportYn.setEnable(false);6;$.txtGoalPeopleCnt.setEnable(false);$.txtActualPeopleCnt.setEnable(false);$.dteContractDate.setEnable(false);$.dteIrbApprovalDate.setEnable(false);$.txtIrbApprovalNo.setEnable(false);$.memRemark.setReadOnly(true)}if($.p_argument.exception_end_yn=="Y"){$.btnEnd.setText("임의종료취소");$.exception_end_yn="Y"}else{$.exception_end_yn="N"}search()}};$.callback=function(type,ds){if(type=="Q"){$.memProjectName.setValue(ds.resultList[0][0].project_name);$.txtProjectNickname.setValue(ds.resultList[0][0].project_nickname);$.cmbProductCode.setValue(ds.resultList[0][0].product_code);$.cmbProjectType.setValue(ds.resultList[0][0].project_type);$.txtTotProjectAmt.setValue(ds.resultList[0][0].tot_project_amt);$.txtTotGoalPeopleCnt.setValue(ds.resultList[0][0].tot_goal_people_cnt);$.txtTotActualPeopleCnt.setValue(ds.resultList[0][0].tot_actual_people_cnt);$.txtInstituteName.setValue(ds.resultList[0][0].institute_name);$.txtInvestigatorName.setValue(ds.resultList[0][0].investigator_name);if($.p_argument.contract_id!=""){$.contract_id=ds.resultList[1][0].contract_id;$.institute=ds.resultList[1][0].institute;$.txtInstituteName1.setValue(ds.resultList[1][0].institute_name);$.investigator=ds.resultList[1][0].investigator;$.bteInvestigatorName1.setText(ds.resultList[1][0].investigator_name);$.dteStartDate.setValue(ds.resultList[1][0].start_date);$.dteEndDate.setValue(ds.resultList[1][0].end_date);$.chkProjectEndYn.setValue(ds.resultList[1][0].project_end_yn);$.txtContractAmt.setValue(ds.resultList[1][0].contract_amt);$.txtPayCount.setValue(ds.resultList[1][0].pay_count);$.txtGoalPeopleCnt.setValue(ds.resultList[1][0].goal_people_cnt);$.txtActualPeopleCnt.setValue(ds.resultList[1][0].actual_people_cnt);$.dteContractDate.setValue(ds.resultList[1][0].contract_date);$.dteIrbApprovalDate.setValue(ds.resultList[1][0].irb_approval_date);$.txtIrbApprovalNo.setValue(ds.resultList[1][0].irb_approval_no);$.chkMedicineSupportYn.setValue(ds.resultList[1][0].medicine_support_yn);$.chkExceptionEndYn.setValue(ds.resultList[1][0].exception_end_yn);$.txtEndText.setValue(ds.resultList[1][0].end_text);$.memRemark.setValue(ds.resultList[1][0].remark);$.cmbContactType.setValue(ds.resultList[1][0].contact_type)}}else{if(type=="save"){dataSelect()}else{if(type=="END"){dataSelect()}}}};$.update=function(args){$.args=args};$.executeScript=function(script){eval(script)};$.fingerbutton_click=function(id){if(id=="btnSave"){if(!$.panContract.validateControls()){return}save("")}else{if(id=="btnClose"){g_popupStack.close()}else{if(id=="btnEnd"){confirmBoxShow($.btnEnd.getText()+"을(를) 진행 하시겠습니까?",function(){if(g_main.msgShare==true){$.exception_end_yn=($.exception_end_yn=="Y"?"N":"Y");save("END")}})}}}};$.fingermultiselect_checkchange=function(id,index){};$.fingermultiselect_itemchange=function(id){};$.fingerbuttonedit_click=function(id){$.popUpCallId=id;if(id=="bteInvestigatorName1"){var param={contact_name:$.bteInvestigatorName1.getText()||""};g_main.openPopup("popContact.html","popContact","의뢰자 조회",600,550,"","",param,"","")}};$.fingerbuttonedit_change=function(id,value){};$.fingerbuttonedit_keypress=function(id,value){};$.fingerbuttonedit_lostfocus=function(id,value){};$.fingercheckbox_change=function(id,value){if(id=="chkProjectEndYn"){changeCheckBox(value)}};$.fingercombobox_change=function(id,value){};$.fingerdateedit_click=function(id){};$.fingerdateedit_change=function(id,value){if(id=="dteStartDate"){if(!value){return}if(value!=""||value){if(value>$.dteEndDate.getValue()||$.dteEndDate.getValue()==""||!$.dteEndDate.getValue()){$.dteEndDate.setValue($.dteStartDate.getValue())}if($.contract_id==""){$.dteContractDate.setValue($.dteStartDate.getValue())}}}else{if(id=="dteEndDate"){if(value!=""||value){$.chkProjectEndYn.setValue("N")}}}};$.fingerdatagrid_itemclick=function(id,rId,cInd){};$.fingerdatagrid_selectionchange=function(id,rId){};$.fingerdatagrid_cellvaluechange=function(id,rId,cInd,nValue,oValue){};$.fingerdatagrid_rowdblclicked=function(id,rId,cInd){};$.fingerdatagrid_celllink_click=function(e,gridid,rId,cId,value){};$.fingerdatagrid_popupcelldblclicked=function(id,rId,cInd){};$.fingerdatagrid_drag=function(id,sId,tId,sObj,tObj,sInd,tInd){};$.fingeredit_change=function(id,value){};$.fingeredit_keypress=function(id,value){};$.fingeredit_lostfocus=function(id,value){};$.fingerlayout_panelresizefinish=function(id){};$.fingerlayout_resizefinish=function(id){};$.fingerpanel_button_click=function(panelId,btnId){};$.fingerpopup_close=function(id){var popResult=g_popupStack.shareData;if(popResult){if(id=="popContact"){if($.popUpCallId=="bteInvestigatorName1"){if(typeof popResult.company_id!="undefined"){$.institute=popResult.company_id;$.investigator=popResult.contact_id;$.txtInstituteName1.setValue(popResult.company_name);$.bteInvestigatorName1.setText(popResult.contact_name)}}}}};$.fingerpopup2_close=function(id){};$.fingertab_selectionchange=function(id,tabid){};$.fingertab_ontabclose=function(id,tabid){};$.fingertree_select=function(id,value){};$.fingertree_dblclick=function(id,nodeid){};$.fingertree_refresh=function(id){};$.fingerscheduler_before_event_changed=function(id,event_object,native_event,is_new,unmodified_event){};$.fingerscheduler_before_event_delete=function(id,event_id,event_object){};$.fingerscheduler_event_click=function(id,event_id,event_object,native_event_object){};$.fingerscheduler_ready=function(id){};$.fingerscheduler_before_event_created=function(id,start_date,end_date){};$.fingerscheduler_view_display=function(id,view){};$.fingerscheduler_event_reg=function(id,obj){};$.fingerfilepanel_upload_click=function(id,fileId,fileName){};$.fingerfilepanel_download_click=function(id,fileId,fileName){};$.fingerfilepanel_delete_click=function(id,fileId,fileName){};$.fingerradiobox_change=function(id,value){};$.fingerimage_click=function(id){};$.fingerimage_change=function(id,value){};$.fingerimage_rotate=function(id,value){};$.fingertab_click=function(id,tabid){};$.fingerpopup_click_x_button=function(){};$.fingeriframe_onload=function(id){};$.fingerhtmlview_click=function(id){}};</script>